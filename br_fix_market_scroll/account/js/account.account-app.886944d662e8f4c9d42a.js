(self.webpackChunk_deriv_account=self.webpackChunk_deriv_account||[]).push([["account-app","poa-status-codes"],{"./App.jsx":(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>rr});var a=n("react"),r=n.n(a),o=n("@deriv/shared"),i=n("mobx-react"),l=n("../../../node_modules/prop-types/index.js"),s=n.n(l),c=n("react-router"),u=n("react-router-dom"),d=n("@deriv/translations"),m=n("@deriv/components"),_=n("./Stores/connect.js"),f=n("./Components/form-sub-header/index.js"),p=n("./Components/sent-email-modal/index.js");const h=function(e){var t=e.onClose,n=e.identifier_title,a=e.is_open,o=e.onClickSendEmail;return r().createElement(m.Modal,{is_open:a,should_header_stick_body:!0,title:r().createElement(d.Localize,{i18n_default_text:"Are you sure you want to unlink from {{identifier_title}}?",values:{identifier_title:n}}),toggleModal:t,width:"440px"},r().createElement(r().Fragment,null,r().createElement(m.Text,{className:"sent-email__modal-unlink-title",size:"xs"},(0,d.localize)("You will need to set a password to complete the process.")),r().createElement(m.Modal.Footer,null,r().createElement(m.Button,{onClick:t,has_effect:!0,text:(0,d.localize)("Cancel"),secondary:!0,large:!0}),r().createElement(m.Button,{has_effect:!0,onClick:o,primary:!0,large:!0},r().createElement(d.Localize,{i18n_default_text:"Unlink from {{identifier_title}}",values:{identifier_title:n}})))))};function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const y=function(e){e.styles;var t=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["styles"]);return r().createElement("svg",g({xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"none"},t),r().createElement("path",{d:"M3.6.7L9.2 8l-9 7.3h9.1c1.3 0 2.6-.4 3.6-1.2 1-.8 1.7-1.9 2-3.2l.7-3.3c.2-.8.2-1.7 0-2.5s-.5-1.6-1.1-2.3c-.5-.7-1.2-1.2-2-1.6-.7-.3-1.6-.5-2.4-.5H3.6z",fill:"url(#paint0_linear)"}),r().createElement("path",{d:"M9.2 8l-4 7.3h-5l9-7.3z",fill:"#CC2F3E"}))};function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const v=function(e){e.styles;var t=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["styles"]);return r().createElement("svg",b({width:"32",height:"32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),r().createElement("rect",{width:"32",height:"32",rx:"6",fill:"#0E0E0E"}),r().createElement("path",{d:"M7.64 12.67L10.19 16 6.1 19.33h4.14a2.6 2.6 0 002.52-2l.34-1.49a2.6 2.6 0 00-2.52-3.17H7.64z",fill:"url(#paint0_linear)"}),r().createElement("path",{d:"M10.2 16l-1.83 3.33H6.1L10.2 16z",fill:"#CC2F3E"}),r().createElement("path",{d:"M25.73 14.32a2.49 2.49 0 00-1.43-1.45 3.04 3.04 0 00-1.14-.2 3.35 3.35 0 00-.94.13 3.2 3.2 0 00-.84.38 3.43 3.43 0 00-.7.6c-.2.23-.39.5-.53.79-.14.3-.26.61-.33.94l-.03.12h-3.13l-.28 1.34h1.43l-.13.19a1.74 1.74 0 01-.54.47 1.33 1.33 0 01-1.12.08.98.98 0 01-.35-.25 1.21 1.21 0 01-.23-.41 1.65 1.65 0 01-.09-.55 2.97 2.97 0 01.14-.92c.08-.27.21-.52.38-.74.14-.2.33-.36.54-.47a1.32 1.32 0 011.12-.08 1 1 0 01.35.25c.1.12.18.26.23.4l1.58-.62a2.49 2.49 0 00-1.43-1.45 3.04 3.04 0 00-1.14-.2 3.35 3.35 0 00-.94.13 3.2 3.2 0 00-.84.38 3.43 3.43 0 00-.7.6 4.32 4.32 0 00-.79 3.9 2.54 2.54 0 001.45 1.44c.34.13.72.2 1.14.2a3.24 3.24 0 002.46-1.1c.21-.24.4-.5.53-.8a3.92 3.92 0 00.28-.7c0 .33.07.65.19.95a2.56 2.56 0 001.44 1.45c.34.13.72.2 1.13.2a3.24 3.24 0 002.47-1.1c.21-.24.39-.5.53-.8a4.17 4.17 0 00.34-.94c.07-.36.11-.72.11-1.08a2.97 2.97 0 00-.2-1.08zm-1.64 2.1c-.08.27-.2.51-.37.73a1.74 1.74 0 01-.54.48 1.33 1.33 0 01-1.13.07.98.98 0 01-.34-.25 1.22 1.22 0 01-.23-.4 1.66 1.66 0 01-.09-.55 2.97 2.97 0 01.14-.92c.08-.27.21-.52.38-.74.14-.2.33-.36.54-.48a1.32 1.32 0 011.12-.07 1 1 0 01.34.25c.1.12.19.25.24.4.06.18.08.36.08.55 0 .32-.04.63-.14.93z",fill:"#fff"}),r().createElement("defs",null,r().createElement("linearGradient",{id:"paint0_linear",x1:"10.57",y1:"11.52",x2:"9.24",y2:"19.89",gradientUnits:"userSpaceOnUse"},r().createElement("stop",{stopColor:"#F26447"}),r().createElement("stop",{offset:"1",stopColor:"#EF4852"}))))};function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const E=function(e){e.styles;var t=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["styles"]);return r().createElement("svg",x({width:"32",height:"32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t),r().createElement("rect",{width:"32",height:"32",rx:"6",fill:"#fff"}),r().createElement("path",{d:"M7.64 12.67L10.19 16 6.1 19.33h4.14a2.6 2.6 0 002.52-2l.34-1.49a2.6 2.6 0 00-2.52-3.17H7.64z",fill:"url(#paint0_linear)"}),r().createElement("path",{d:"M10.2 16l-1.83 3.33H6.1L10.2 16z",fill:"#CC2F3E"}),r().createElement("path",{d:"M25.74 14.32a2.49 2.49 0 00-1.43-1.45 3.04 3.04 0 00-1.14-.2 3.35 3.35 0 00-.94.13 3.2 3.2 0 00-.84.38 3.42 3.42 0 00-.7.6 4.31 4.31 0 00-.87 1.73l-.01.12h-3.13l-.28 1.34h1.42a1.74 1.74 0 01-.67.66 1.33 1.33 0 01-1.12.08.98.98 0 01-.35-.25 1.21 1.21 0 01-.23-.41 1.66 1.66 0 01-.08-.55 2.97 2.97 0 01.14-.92 2.47 2.47 0 01.37-.74c.15-.2.34-.36.55-.47a1.32 1.32 0 011.11-.08 1 1 0 01.35.25c.1.12.18.26.23.4l1.59-.62a2.49 2.49 0 00-1.43-1.45 3.04 3.04 0 00-1.15-.2 3.35 3.35 0 00-.94.13 3.2 3.2 0 00-.83.38 3.43 3.43 0 00-.7.6 4.27 4.27 0 00-.79 3.9 2.57 2.57 0 001.45 1.44c.34.13.72.2 1.13.2a3.24 3.24 0 002.47-1.1c.2-.24.39-.5.53-.8a3.9 3.9 0 00.27-.7c.01.33.08.65.2.95a2.53 2.53 0 001.43 1.45c.34.13.72.2 1.14.2a3.23 3.23 0 002.47-1.1c.2-.24.38-.5.53-.8a4.17 4.17 0 00.33-.94c.08-.36.12-.72.12-1.08a2.97 2.97 0 00-.2-1.08zm-1.63 2.1c-.08.27-.21.51-.38.73a1.74 1.74 0 01-.54.48 1.33 1.33 0 01-1.12.07.98.98 0 01-.35-.25 1.22 1.22 0 01-.23-.4 1.66 1.66 0 01-.08-.55 2.97 2.97 0 01.14-.92c.08-.27.2-.52.37-.74.15-.2.33-.36.55-.48a1.32 1.32 0 011.11-.07 1 1 0 01.35.25c.1.12.18.25.23.4.06.18.09.36.09.55 0 .32-.05.63-.14.93z",fill:"#1A1A1A"}),r().createElement("defs",null,r().createElement("linearGradient",{id:"paint0_linear",x1:"10.57",y1:"11.52",x2:"9.24",y2:"19.89",gradientUnits:"userSpaceOnUse"},r().createElement("stop",{stopColor:"#F26447"}),r().createElement("stop",{offset:"1",stopColor:"#EF4852"}))))};function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var k=function(e){var t=e.email,n=e.is_dark_mode_on,a=e.is_social_signup,i=e.social_identity_provider,l=w(r().useState(!1),2),s=l[0],c=l[1],u=w(r().useState(!1),2),_=u[0],g=u[1],b=function(){o.WS.verifyEmail(t,"reset_password"),c(!1),g(!0)},x=i?(0,o.toTitleCase)(i):"";return r().createElement(r().Fragment,null,r().createElement(f.default,{title:(0,d.localize)("Deriv password")}),r().createElement("div",{className:"account__passwords-wrapper"},r().createElement(r().Fragment,null,r().createElement(m.Text,{as:"p",className:"passwords-platform__desc",color:"prominent",size:"xs",weight:"lighter"},r().createElement(d.Localize,{i18n_default_text:"Your Deriv password is for logging in to your Deriv account."})),r().createElement(m.Text,{as:"p",className:"passwords-platform__desc",color:"prominent",size:"xs",weight:"lighter"},r().createElement(d.Localize,{i18n_default_text:"Apps you can use with your Deriv login:"})),r().createElement("div",{className:"passwords-platform__logo-container"},r().createElement(y,{className:"passwords-platform__single-icon"}),r().createElement(m.Text,{line_height:"l",size:"xs",weight:"bold"},"Deriv.com")),r().createElement("div",{className:"passwords-platform__icons"},r().createElement(m.Popover,{alignment:"bottom",message:"DTrader"},r().createElement(m.Icon,{icon:"IcBrandDtrader",size:32})),r().createElement(m.Popover,{alignment:"bottom",message:"DBot"},r().createElement(m.Icon,{icon:"IcBrandDbot",size:32})),r().createElement(m.Popover,{alignment:"bottom",message:"SmartTrader"},r().createElement(m.Icon,{icon:"IcBrandSmarttrader",size:32})),r().createElement(m.Popover,{alignment:"bottom",message:"Deriv Go"},n?r().createElement(E,null):r().createElement(v,null)))),a?r().createElement(r().Fragment,null,r().createElement("div",{className:"account__passwords-item passwords-social-buttons"},r().createElement("div",{className:"passwords-social-buttons__desc"},r().createElement(m.Text,{as:"p",className:"passwords-platform__desc",color:"prominent",size:"xs",weight:"lighter"},r().createElement(d.Localize,{i18n_default_text:"You're using your {{identifier_title}} account to log in to your Deriv account. To change your login method into using a username and password, click the <0>Unlink</0> button.",components:[r().createElement("strong",{key:0})],values:{identifier_title:x}}))),r().createElement("div",{className:"account__passwords-linked"},i?r().createElement(r().Fragment,null,r().createElement(m.Icon,{icon:"IcStock".concat(x),size:16}),r().createElement(m.Text,{size:"xs"},r().createElement(d.Localize,{i18n_default_text:"Linked with {{identifier_title}}",values:{identifier_title:x}}))):""),r().createElement(m.Button,{onClick:function(){c(!0),g(!0)},type:"button",text:(0,d.localize)("Unlink"),tertiary:!0,large:!0}))):r().createElement("div",null,r().createElement(m.Text,{as:"p",className:"passwords-platform__desc",color:"prominent",size:"xs",weight:"lighter"},r().createElement(d.Localize,{i18n_default_text:"Click the <0>Change password</0> button to change your Deriv password.",components:[r().createElement("strong",{key:0})]})),r().createElement(m.Button,{className:"account__passwords-footer-btn",type:"button",onClick:b,has_effect:!0,text:(0,d.localize)("Change password"),primary:!0,large:!0})),r().createElement(h,{is_open:s,onClose:function(){c(!1),g(!1)},identifier_title:x,onClickSendEmail:b}),r().createElement(p.default,{is_open:_&&!s,onClose:function(){return g(!1)},identifier_title:x,onClickSendEmail:b})))};k.propTypes={email:s().string,is_dark_mode_on:s().bool,is_social_signup:s().bool,social_identity_provider:s().string};const C=k;function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var T=function(e){var t,n=e.email,a=e.has_dxtrade_accounts,i=e.has_mt5_accounts,l=S(r().useState(""),2),s=l[0],c=l[1],u=S(r().useState(!1),2),_=u[0],h=u[1],g=function(e){var t=e===o.CFD_PLATFORMS.MT5?"trading_platform_mt5_password_reset":"trading_platform_dxtrade_password_reset";o.WS.verifyEmail(n,t,{url_parameters:{redirect_to:3}}),c(e),h(!0)};return r().createElement(r().Fragment,null,r().createElement(f.default,{title:(t="",i?t=(0,d.localize)("DMT5 Password"):a&&(t=(0,d.localize)("Deriv X Password")),t)}),r().createElement("div",{className:"account__passwords-wrapper"},i&&r().createElement(r().Fragment,null,r().createElement(m.Text,{as:"p",className:"passwords-platform__desc",color:"prominent",size:"xs",weight:"lighter"},r().createElement(d.Localize,{i18n_default_text:"Your DMT5 password is for logging in to your Deriv MT5 accounts on the desktop, web, and mobile apps."})),r().createElement(m.Text,{as:"p",className:"passwords-platform__desc",color:"prominent",size:"xs",weight:"lighter"},r().createElement(d.Localize,{i18n_default_text:"Click the <0>Change password</0> button to change your DMT5 password.",components:[r().createElement("strong",{key:0})]})),r().createElement("div",{className:"passwords-platform__content"},r().createElement(m.Popover,{alignment:"bottom",message:"DMT5"},r().createElement(m.Icon,{icon:"IcBrandDmt5",size:32})),r().createElement(m.Button,{className:"account__passwords-footer-btn",type:"button",onClick:function(){return g(o.CFD_PLATFORMS.MT5)},text:(0,d.localize)("Change password"),primary:!0,large:!0}))),a&&r().createElement(r().Fragment,null,r().createElement(m.Text,{as:"p",className:"passwords-platform__desc",color:"prominent",size:"xs",weight:"lighter"},r().createElement(d.Localize,{i18n_default_text:"Your Deriv X password is for logging in to your Deriv X accounts on the web and mobile apps."})),r().createElement(m.Text,{as:"p",className:"passwords-platform__desc",color:"prominent",size:"xs",weight:"lighter"},r().createElement(d.Localize,{i18n_default_text:"Click the <0>Change password</0> button to change your Deriv X password.",components:[r().createElement("strong",{key:0})]})),r().createElement("div",{className:"passwords-platform__content"},r().createElement(m.Popover,{alignment:"bottom",message:"Deriv X"},r().createElement(m.Icon,{icon:"IcBrandDxtrade",size:32})),r().createElement(m.Button,{className:"account__passwords-footer-btn",type:"button",onClick:function(){return g(o.CFD_PLATFORMS.DXTRADE)},text:(0,d.localize)("Change password"),primary:!0,large:!0}))),r().createElement(p.default,{is_open:_,identifier_title:s,onClose:function(){return h(!1)},onClickSendEmail:g})))};T.propTypes={email:s().string,has_dxtrade_accounts:s().bool,has_mt5_accounts:s().bool};const O=T;function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var P=function(e){var t=e.email,n=e.is_dark_mode_on,a=e.mt5_login_list,o=e.is_social_signup,i=e.dxtrade_accounts_list,l=e.social_identity_provider,s=e.is_loading_dxtrade,c=e.is_loading_mt5,u=e.is_mt5_password_not_set,d=e.is_dxtrade_password_not_set,_=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r().useState(!0),2),f=_[0],p=_[1];return r().useEffect((function(){!1===c&&!1===s&&void 0!==o&&p(!1)}),[c,s,o]),f?r().createElement(m.Loading,{is_fullscreen:!1}):r().createElement("div",{className:"account__passwords"},"apple"===l?null:r().createElement(C,{email:t,is_dark_mode_on:n,is_social_signup:o,social_identity_provider:l}),((null==a?void 0:a.length)>0||!u)&&r().createElement(O,{email:t,has_mt5_accounts:(null==a?void 0:a.length)>0||!u}),((null==i?void 0:i.length)>0||!d)&&r().createElement(O,{email:t,has_dxtrade_accounts:(null==i?void 0:i.length)>0||!d}))};P.propTypes={email:s().string,is_dark_mode_on:s().bool,dxtrade_accounts_list:s().array,is_social_signup:s().bool,mt5_login_list:s().array,social_identity_provider:s().string,is_loading_mt5:s().bool,is_loading_dxtrade:s().bool,is_mt5_password_not_set:s().bool,is_dxtrade_password_not_set:s().bool};const L=(0,_.$j)((function(e){var t=e.client,n=e.ui;return{email:t.email,is_dark_mode_on:n.is_dark_mode_on,is_social_signup:t.is_social_signup,mt5_login_list:t.mt5_login_list,dxtrade_accounts_list:t.dxtrade_accounts_list,social_identity_provider:t.social_identity_provider,is_loading_mt5:t.is_populating_mt5_account_list,is_loading_dxtrade:t.is_populating_dxtrade_account_list,is_mt5_password_not_set:t.is_mt5_password_not_set,is_dxtrade_password_not_set:t.is_dxtrade_password_not_set}}))(P);var I=n("../../../node_modules/classnames/index.js"),A=n.n(I),M=n("./Components/load-error-message/index.js"),D=n("./Components/demo-message/index.js"),F=function(e){var t=e.title,n=e.descriptions,r=e.onClickLearnMore,o=(null==n?void 0:n.length)>0,i=1===(null==n?void 0:n.length);return a.createElement("article",{className:"da-article"},a.createElement(m.Text,{as:"h4",color:"prominent",line_height:"m",size:"xs",weight:"bold",className:"da-article__header"},t),o&&a.createElement(a.Fragment,null,i?a.createElement(m.Text,{as:"p",size:"xxs",line_height:"m"},n[0]):a.createElement("ul",{className:"da-article__list"},n.map((function(e,t){return a.createElement("li",{key:t},a.createElement(m.Text,{size:"xxs",line_height:"xs"},e.component||e))})))),r&&a.createElement("div",{className:"da-article__learn-more",onClick:r},a.createElement(m.Text,{size:"xxs",color:"loss-danger",line_height:"s"},a.createElement(d.Localize,{i18n_default_text:"Learn more"})),a.createElement(m.Icon,{icon:"IcChevronRight",className:"da-article__learn-more-icon",color:"red"})))};F.propTypes={descriptions:s().array.isRequired,onClickLearnMore:s().func,title:s().string.isRequired};const R=F,B=function(){return a.createElement(R,{title:(0,d.localize)("Account limits"),descriptions:[a.createElement(d.Localize,{key:0,i18n_default_text:"These are default limits that we apply to your accounts."}),a.createElement(d.Localize,{key:1,i18n_default_text:"To learn more about trading limits and how they apply, please go to the <0>Help Centre.</0>",components:[a.createElement(m.StaticUrl,{key:0,className:"link",href:"/help-centre"})]})]})},q=a.createContext();function W(){return(W=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var U=function(e){var t=e.message,n=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["message"]);return(0,o.isMobile)()?a.createElement(m.Text,{color:"less-prominent",line_height:"s",size:"xxxs"},t):a.createElement(m.Popover,W({alignment:"right",className:"da-account-limits__popover",icon:"info",is_bubble_hover_enabled:!0,message:t,zIndex:9999},n))};U.propTypes={message:s().string.isRequired};const Y=U;var $=n("react-dom");const V=function(){var e=a.useContext(q),t=e.footer_ref,n=e.toggleOverlay;return(0,$.createPortal)(a.createElement(m.AppSettings.Footer,null,a.createElement(m.AppSettings.Footer.Left,null,a.createElement("a",{className:"link link--prominent",onClick:n},a.createElement(m.Text,{size:"xxs",line_height:"m",weight:"bold"},a.createElement(d.Localize,{i18n_default_text:"Learn more about account limits"}))))),t)},G=function(){var e=a.useContext(q),t=e.overlay_ref,n=e.toggleOverlay;return a.createElement(m.Popup.Overlay,{descriptions:[{key:"account_limits_desc_1",component:a.createElement(d.Localize,{i18n_default_text:"These are default limits that we apply to your accounts."})},{key:"account_limits_desc_2",component:a.createElement(d.Localize,{i18n_default_text:"To learn more about account limits and how they apply, please go to the <0>Help Centre</0>.",components:[a.createElement(m.StaticUrl,{key:0,className:"link",href:"/help-centre"})]})}],done_text:(0,d.localize)("Done"),overlay_ref:t,title:(0,d.localize)("Account limits"),toggleOverlay:n})};var K=function(e){var t=e.align,n=e.children,r=e.is_hint,o=e.renderExtraInfo,i=r?"xxxs":"xxs";return a.createElement(a.Fragment,null,a.createElement("td",{className:A()("da-account-limits__table-cell",{"da-account-limits__table-cell--left":"right"!==t,"da-account-limits__table-cell--right":"right"===t})},n&&a.createElement(m.Text,{align:t,as:"p",color:"prominent",size:i,line_height:"m"},n),o&&o()))};K.propTypes={align:s().oneOf(["right","left"]),children:s().any,is_hint:s().bool,renderExtraInfo:s().func};const H=K;var Z=function(e){var t=e.align,n=e.children,r=e.renderExtraInfo;return a.createElement("th",{className:A()("da-account-limits__table-header",{"da-account-limits__table-header--left":"right"!==t,"da-account-limits__table-header--right":"right"===t})},n&&a.createElement(m.Text,{align:t,as:"p",color:"prominent",size:"xxs",line_height:"m",weight:"bold"},n),r&&r())};Z.propTypes={align:s().oneOf(["right","left"]),children:s().any};const X=Z;var J=function(e){var t=e.collection,n=e.title,r=a.useContext(q).currency;return null!=t&&t.length?t.map((function(e){return a.createElement("tr",{key:e.name},a.createElement(H,null,n&&"".concat(n," - "),e.name),a.createElement(H,{align:"right"},(0,o.formatMoney)(r,e.turnover_limit,!0)))})):null};J.propTypes={collection:s().arrayOf(s().any),title:s().any};const Q=J;function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ae(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var re=function(e){var t=e.account_limits,n=e.currency,r=e.footer_ref,i=e.getLimits,l=e.is_app_settings,s=e.is_fully_authenticated,c=e.is_switching,u=e.is_virtual,_=e.overlay_ref,f=e.setIsOverlayShown,p=e.should_bypass_scrollbars,h=e.should_show_article,g=(0,o.useIsMounted)(),y=ne(a.useState(!1),2),b=y[0],v=y[1],x=ne(a.useState(!1),2),E=x[0],w=x[1],z=a.useContext(o.PlatformContext).is_dashboard;if(a.useEffect((function(){u?v(!1):i().then((function(){g()&&v(!1)}))}),[]),a.useEffect((function(){!u&&t&&b&&v(!1)}),[t,u,b]),a.useEffect((function(){"function"==typeof f&&f(E)}),[E,f]),c)return a.createElement(m.Loading,{is_fullscreen:!1});if(u)return a.createElement("div",{className:A()("account__demo-message-wrapper",{"account__demo-message-wrapper-dashboard":z})},a.createElement(D.default,{has_demo_icon:z,has_button:z}),";");var k=t.api_initial_load_error,C=t.open_positions,S=t.account_balance,N=t.payout,T=t.market_specific,O=t.num_of_days_limit,j=t.remainder,P=t.withdrawal_since_inception_monetary;if(k)return a.createElement(M.default,{error_message:k});if(c||b)return a.createElement(m.Loading,{is_fullscreen:!1});var L=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},T),I=L.commodities,F=L.forex,R=L.indices,W=L.synthetic_index,U=null==F?void 0:F.slice().sort((function(e,t){return e.name<t.name?1:-1}));U&&U.push&&U.push(U.shift());var $={currency:n,footer_ref:r,overlay_ref:_,toggleOverlay:function(){return w(!E)}};return a.createElement(q.Provider,{value:$},a.createElement("section",{className:"da-account-limits__wrapper"},a.createElement("div",{className:A()("da-account-limits",{"da-account-limits--app-settings":l})},h&&(0,o.isMobile)()&&a.createElement(B,null),a.createElement("div",{className:"da-account-limits__table-wrapper"},a.createElement(m.ThemedScrollbars,{is_bypassed:p||(0,o.isMobile)()},a.createElement("table",{className:"da-account-limits__table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement(X,null,a.createElement(d.Localize,{i18n_default_text:"Trading limits - Item"})),a.createElement(X,{align:"right"},a.createElement(d.Localize,{i18n_default_text:"Limit"})))),a.createElement("tbody",null,a.createElement("tr",null,a.createElement(H,{renderExtraInfo:function(){return a.createElement(Y,{message:(0,d.localize)("Represents the maximum number of outstanding contracts in your portfolio. Each line in your portfolio counts for one open position. Once the maximum is reached, you will not be able to open new positions without closing an existing position first.")})}},a.createElement(d.Localize,{i18n_default_text:"*Maximum number of open positions"})),a.createElement(H,{align:"right"},C)),a.createElement("tr",null,a.createElement(H,{renderExtraInfo:function(){return a.createElement(Y,{message:(0,d.localize)("Represents the maximum amount of cash that you may hold in your account.  If the maximum is reached, you will be asked to withdraw funds.")})}},a.createElement(d.Localize,{i18n_default_text:"*Maximum account cash balance"})),a.createElement(H,{align:"right"},(0,o.formatMoney)(n,S,!0))),a.createElement("tr",null,a.createElement(H,{renderExtraInfo:function(){return a.createElement(Y,{message:(0,d.localize)("Represents the maximum aggregate payouts on outstanding contracts in your portfolio. If the maximum is attained, you may not purchase additional contracts without first closing out existing positions.")})}},a.createElement(d.Localize,{i18n_default_text:"Maximum aggregate payouts on open positions"})),a.createElement(H,{align:"right"},(0,o.formatMoney)(n,N,!0))),a.createElement("tr",null,a.createElement(H,{is_hint:!0},a.createElement(d.Localize,{i18n_default_text:"*Any limits in your Self-exclusion settings will override these default limits."})),a.createElement(H,null)))),a.createElement("table",{className:"da-account-limits__table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement(X,{renderExtraInfo:function(){return a.createElement(Y,{message:(0,d.localize)("Represents the maximum volume of contracts that you may purchase in any given trading day.")})}},a.createElement(d.Localize,{i18n_default_text:"Trading limits - Maximum daily turnover"})),a.createElement(X,{align:"right"},a.createElement(d.Localize,{i18n_default_text:"Limit"})))),a.createElement("tbody",null,a.createElement(Q,{collection:I}),a.createElement(Q,{collection:U,title:(0,d.localize)("Forex")}),a.createElement(Q,{collection:R}),a.createElement(Q,{collection:W}))),!l&&a.createElement(a.Fragment,null,a.createElement("table",{className:"da-account-limits__table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement(X,null,a.createElement(d.Localize,{i18n_default_text:"Withdrawal limits"})),s&&a.createElement(X,{align:"right"},a.createElement(d.Localize,{i18n_default_text:"Limit"})))),a.createElement("tbody",null,s?a.createElement(a.Fragment,null,a.createElement(m.Text,{size:"xxs",color:"prominent"},(0,d.localize)("Your account is fully authenticated and your withdrawal limits have been lifted."))):a.createElement(a.Fragment,null,a.createElement("tr",null,a.createElement(H,null,a.createElement(d.Localize,{i18n_default_text:z?"Total withdrawal limit":"Total withdrawal allowed"}),z&&!s&&a.createElement(a.Fragment,null,a.createElement(m.Text,{size:(0,o.isMobile)()?"xxxs":"xxs",className:"account-management-table__verify",color:"less-prominent",line_height:"xs"},(0,d.localize)("To increase limit please verify your identity")),a.createElement(m.ButtonLink,{to:"/account/proof-of-identity",size:"small",className:"account-management-table__verify-button"},a.createElement(m.Text,{weight:"bold",color:"colored-background",size:(0,o.isMobile)()?"xxxs":"xxs"},(0,d.localize)("Verify"))))),a.createElement(H,{align:"right"},(0,o.formatMoney)(n,O,!0))),a.createElement("tr",null,a.createElement(H,null,a.createElement(d.Localize,{i18n_default_text:"Total withdrawn"})),a.createElement(H,{align:"right"},(0,o.formatMoney)(n,P,!0))),a.createElement("tr",null,a.createElement(H,null,a.createElement(d.Localize,{i18n_default_text:"Maximum withdrawal remaining"})),a.createElement(H,{align:"right"},(0,o.formatMoney)(n,j,!0)))))),!z||(0,o.isMobile)()&&a.createElement("div",{className:"da-account-limits__text-container"},a.createElement(m.Text,{as:"p",size:"xxs",color:"less-prominent",line_height:"xs"},s?a.createElement(d.Localize,{i18n_default_text:"Your account is fully authenticated and your withdrawal limits have been lifted."}):a.createElement(d.Localize,{i18n_default_text:"Stated limits are subject to change without prior notice."})))))),h&&(0,o.isDesktop)()&&a.createElement(B,null),r&&a.createElement(V,null),E&&_&&a.createElement(G,null))))};re.propTypes={account_limits:s().object,currency:s().string.isRequired,footer_ref:s().shape({current:s().any}),is_app_settings:s().bool,getLimits:s().func.isRequired,is_fully_authenticated:s().bool.isRequired,is_switching:s().bool.isRequired,is_virtual:s().bool.isRequired,overlay_ref:s().shape({current:s().any}),setIsPopupOverlayShown:s().func,should_bypass_scrollbars:s().bool,should_show_article:s().bool};const oe=re,ie=(0,_.$j)((function(e){var t=e.client,n=e.ui;return{account_limits:t.account_limits,currency:t.currency,getLimits:t.getLimits,is_fully_authenticated:t.is_fully_authenticated,is_virtual:t.is_virtual,is_switching:t.is_switching,should_show_article:!0,toggleAccountsDialog:n.toggleAccountsDialog}}))(oe);var le=n("../../../node_modules/formik/dist/formik.esm.js"),se=n("./Components/leave-confirm/index.js"),ce=n("./Components/form-footer/index.js"),ue=n("./Components/form-body/index.js"),de=n("./Components/form-body-section/index.js");function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _e(e){return function(e){if(Array.isArray(e))return fe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return fe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?fe(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e,t,n,a,r,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,r)}function be(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){ye(o,a,r,i,l,"next",e)}function l(e){ye(o,a,r,i,l,"throw",e)}i(void 0)}))}}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Ce=function(e,t){return function(n,a,r){a.forEach((function(a){var o=t[a];(/^\s+$/.test(o)||!n(o)&&!e[a]&&!0!==r)&&(e[a]=r)}))}},Se=function(e){var t=e.children,n=e.className;return r().useContext(o.PlatformContext).is_dashboard?r().Children.map(t,(function(e){return r().createElement("fieldset",{className:"account-form__fieldset"},e)})):r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement("div",{className:n},t))},Ne=function(e){var t=e.field,n=e.touched,a=e.errors,o=e.setFieldValue,i=e.values,l=e.is_changeable,s=e.residence_list;return r().createElement(r().Fragment,null,r().createElement(m.DesktopWrapper,null,r().createElement(m.Autocomplete,ke({},t,{"data-lpignore":"true",autoComplete:"new-password",type:"text",label:(0,d.localize)("Tax residence*"),error:n.tax_residence&&a.tax_residence,disabled:!l,id:"tax_residence",list_items:s,onItemSelection:function(e){var t=e.value,n=e.text;return o("tax_residence",t?n:"",!0)},required:!0}))),r().createElement(m.MobileWrapper,null,r().createElement(m.SelectNative,{placeholder:(0,d.localize)("Tax residence*"),label:(0,d.localize)("Tax residence*"),value:i.tax_residence,list_items:s,id:"tax_residence_mobile",error:n.tax_residence&&a.tax_residence,disabled:!l,use_text:!0,onChange:function(e){return o("tax_residence",e.target.value,!0)},required:!0})))},Te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(l,e);var t,n,a,i=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ze(e);if(t){var r=ze(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return we(this,n)}}(l);function l(){var e;ve(this,l);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return(e=i.call.apply(i,[this].concat(n))).state={is_loading:!0,is_state_loading:!1,show_form:!0},e.onSubmit=function(){var t=be(regeneratorRuntime.mark((function t(n,a){var r,i,l,s,c,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=a.setStatus,i=a.setSubmitting,r({msg:""}),l=e.makeSettingsRequest(n),e.setState({is_btn_loading:!0}),t.next=6,o.WS.setSettings(l);case 6:if(!(s=t.sent).error){t.next=13;break}r({msg:s.error.message}),e.setState({is_btn_loading:!1}),i(!1),t.next=26;break;case 13:return t.next=15,o.WS.authorized.storage.getSettings();case 15:if(!(c=t.sent).error){t.next=19;break}return e.setState({api_error:c.error.message}),t.abrupt("return");case 19:e.setState(he(he({},c.get_settings),{},{is_loading:!1})),e.props.refreshNotifications(),e.setState({is_btn_loading:!1,is_submit_success:!0}),setTimeout((function(){e.setState({is_submit_success:!1},(function(){i(!1)}))}),1e4),u=window.location.search,(d=new URLSearchParams(u)).get("from")&&e.props.history.push(o.routes[d.get("from")]);case 26:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.makeSettingsRequest=function(t){var n=e.props,a=n.is_mf,r=n.is_virtual,i=n.residence_list,l=n.states_list;if(r)return{email_consent:+t.email_consent};var s=(0,o.filterObjProperties)(t,_e(e.state.changeable_fields));return s.email_consent=+s.email_consent,s.first_name&&(s.first_name=s.first_name.trim()),s.last_name&&(s.last_name=s.last_name.trim()),s.date_of_birth&&(s.date_of_birth=(0,o.toMoment)(s.date_of_birth).format("YYYY-MM-DD")),a&&(s.tax_residence&&(s.tax_residence=(0,o.getLocation)(i,s.tax_residence,"value")),s.tax_identification_number&&(s.tax_identification_number=s.tax_identification_number.trim())),s.citizen&&(s.citizen=(0,o.getLocation)(i,s.citizen,"value")),s.place_of_birth?s.place_of_birth=(0,o.getLocation)(i,s.place_of_birth,"value"):delete s.place_of_birth,s.address_state&&(s.address_state=l.length?(0,o.getLocation)(l,s.address_state,"value"):s.address_state),s},e.validateFields=function(t){var n=e.props,a=n.is_eu,r=n.is_mf,i=n.residence_list,l=n.states_list,s=n.is_virtual;e.setState({is_submit_success:!1});var c={},u=Ce(c,t);if(s)return c;var m=["first_name","last_name","phone","address_line_1","address_city"];if(a&&m.push("citizen"),r&&m.push.apply(m,["tax_residence","tax_identification_number"]),u((function(e){return e}),m,(0,d.localize)("This field is required")),u(o.validLetterSymbol,["first_name","last_name"],(0,d.localize)("Only alphabet is allowed")),u((function(e){return(0,o.getLocation)(i,e,"value")}),["citizen"],!0),t.tax_identification_number&&((0,o.validTaxID)(t.tax_identification_number.trim())?(0,o.validLength)(t.tax_identification_number.trim(),{min:0,max:20})||(c.tax_identification_number=(0,d.localize)("You should enter 0-20 characters.")):c.tax_identification_number=(0,d.localize)("Should start with letter or number, and may contain hyphen and underscore.")),t.first_name&&!(0,o.validLength)(t.first_name.trim(),{min:2,max:50})&&(c.first_name=(0,d.localize)("You should enter 2-50 characters.")),t.last_name&&!(0,o.validLength)(t.last_name.trim(),{min:2,max:50})&&(c.last_name=(0,d.localize)("You should enter 2-50 characters.")),t.phone){var _=t.phone.replace(/\D/g,""),f=(0,d.localize)("Please enter a valid phone number (e.g. +15417541234).");(0,o.validLength)(_,{min:9,max:35})?(0,o.validPhone)(t.phone)||(c.phone=f):c.phone=(0,d.localize)("You should enter {{min}}-{{max}} numbers.",{min:9,max:35})}var p=(0,d.localize)("Only letters, numbers, space, and these special characters are allowed: {{ permitted_characters }}",{permitted_characters:"- . ' # ; : ( ) , @ /",interpolation:{escapeValue:!1}});return t.address_line_1&&!(0,o.validAddress)(t.address_line_1)&&(c.address_line_1=p),t.address_line_2&&!(0,o.validAddress)(t.address_line_2)&&(c.address_line_2=p),t.address_city&&!(0,o.validLetterSymbol)(t.address_city)&&(c.address_city=(0,d.localize)("Only letters, space, hyphen, period, and apostrophe are allowed.")),t.address_state&&!l.length&&((0,o.validLength)(t.address_state,{min:0,max:35})?/^[\w\s\W'.-;,]{0,35}$/.test(t.address_state)||(c.address_state=(0,d.localize)("State is not in a proper format")):c.address_state=(0,d.localize)("You should enter 0-35 characters.")),t.address_postcode&&((0,o.validLength)(t.address_postcode,{min:0,max:20})?(0,o.validPostCode)(t.address_postcode)||(c.address_postcode=(0,d.localize)("Only letters, numbers, space, and hyphen are allowed.")):c.address_postcode=(0,d.localize)("Please enter a {{field_name}} under {{max_number}} characters.",{field_name:(0,d.localize)("postal/ZIP code"),max_number:20,interpolation:{escapeValue:!1}})),c},e.showForm=function(t){return e.setState({show_form:t})},e.onScrollToRefMount=function(e){var t=window.location.hash.substr(1);(null==e?void 0:e.name)===t&&(null==e||e.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),setTimeout((function(){null==e||e.focus()}),800))},e.salutation_list=[{text:(0,d.localize)("Mr"),value:"Mr"},{text:(0,d.localize)("Mrs"),value:"Mrs"},{text:(0,d.localize)("Ms"),value:"Ms"},{text:(0,d.localize)("Miss"),value:"Miss"}],e}return t=l,(n=[{key:"isChangeableField",value:function(e){return this.state.changeable_fields.some((function(t){return t===e}))}},{key:"componentDidMount",value:(a=be(regeneratorRuntime.mark((function e(){var t,n,a,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.WS.wait("get_settings");case 2:t=this.props,n=t.fetchResidenceList,a=t.fetchStatesList,r=t.has_residence,n(),r&&this.setState({is_state_loading:!0},(function(){a().then((function(){i.setState({is_state_loading:!1})}))})),this.initializeFormValues();case 6:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e){Object.values(this.props.account_settings).join("|")===Object.values(e.account_settings).join("|")&&this.props.is_eu===e.is_eu&&this.props.is_mf===e.is_mf||this.initializeFormValues()}},{key:"initializeFormValues",value:function(){var e=this;o.WS.wait("landing_company","get_account_status","get_settings").then((function(){var t=e.context.is_dashboard,n=e.props,a=n.getChangeableFields,r=n.is_virtual,i=n.account_settings,l=n.is_mf,s=n.is_eu;i.email_consent=!!i.email_consent;var c=["account_opening_reason","allow_copiers",!l&&"tax_residence",!l&&"tax_identification_number","client_tnc_status","country_code","has_secret_answer","is_authenticated_payment_agent","user_hash","country",(!t||!s)&&"salutation","request_professional_status","immutable_fields"],u=(0,o.removeObjProperties)(c,i);e.setState({changeable_fields:r?[]:a(),is_loading:!1,form_initial_values:u})}))}},{key:"render",value:function(){var e=this,t=this.state,n=ke({},t.form_initial_values),a=t.api_error,i=t.is_loading,l=t.is_state_loading,s=t.is_btn_loading,c=t.is_submit_success,u=t.show_form,_=this.context.is_dashboard,p=this.props,h=p.is_eu,g=p.residence_list,y=p.states_list,b=p.is_virtual,v=p.is_mf,x=p.is_svg;if(a)return r().createElement(M.default,{error_message:a});if(i||l||!g.length)return r().createElement(m.Loading,{is_fullscreen:!1,className:"account__initial-loader"});if(n.citizen=n.citizen?(0,o.getLocation)(g,n.citizen,"text"):"",n.place_of_birth=n.place_of_birth?(0,o.getLocation)(g,n.place_of_birth,"text"):"",n.address_state?n.address_state=y.length?(0,o.getLocation)(y,n.address_state,"text"):n.address_state:n.address_state="",v){if(n.tax_residence)if(n.tax_residence.indexOf(",")<0)n.tax_residence=(0,o.getLocation)(g,n.tax_residence,"text");else if(this.isChangeableField("tax_residence")){var E=n.tax_residence.split(",")[0];n.tax_residence=(0,o.getLocation)(g,E,"text")}else{var w=[];n.tax_residence.split(",").forEach((function(e){w.push((0,o.getLocation)(g,e,"text"))})),n.tax_residence=w}else n.tax_residence="";n.tax_identification_number||(n.tax_identification_number="")}return r().createElement(le.J9,{initialValues:n,enableReinitialize:!0,onSubmit:this.onSubmit,validate:this.validateFields},(function(t){var n=t.values,a=t.errors,i=t.status,l=t.touched,p=t.handleChange,E=t.handleBlur,w=t.handleSubmit,z=t.isSubmitting,k=t.setFieldValue,C=t.setFieldTouched,S=t.setTouched,N=t.dirty;return r().createElement(r().Fragment,null,r().createElement(se.default,{onDirty:(0,o.isMobile)()?e.showForm:null}),u&&r().createElement("form",{noValidate:!0,className:A()("account-form account-form__personal-details",{"account-form account-form__personal-details--dashboard":_}),onSubmit:w},r().createElement(ue.default,{scroll_offset:(0,o.isMobile)()?"199px":"80px"},r().createElement(f.default,{title:(0,d.localize)("Details")}),!b&&r().createElement(r().Fragment,null,r().createElement(de.Z,{has_side_note:_,side_note:(0,d.localize)("We use the information you give us only for verification purposes. All information is kept confidential.")},_&&h&&r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.DesktopWrapper,null,r().createElement(le.gN,{name:"salutation"},(function(t){var n=t.field;return r().createElement(m.Autocomplete,ke({},n,{"data-lpignore":"true",autoComplete:"new-password",type:"text",label:(0,d.localize)("Title*"),error:l.salutation&&a.salutation,list_items:e.salutation_list,onItemSelection:function(e){var t=e.value,n=e.text;return k("salutation",t?n:"",!0)},id:"salutation",disabled:!e.isChangeableField("salutation")}))}))),r().createElement(m.MobileWrapper,null,r().createElement(m.SelectNative,{placeholder:(0,d.localize)("Please select"),label:(0,d.localize)("Title"),value:n.salutation,list_items:e.salutation_list,use_text:!0,error:l.salutation&&a.salutation,onChange:function(e){return k("salutation",e.target.value,!0)},disabled:!e.isChangeableField("salutation"),id:"salutation_mobile"}))),r().createElement(m.DesktopWrapper,null,r().createElement(Se,{className:"account-form__fieldset--2-cols"},r().createElement(m.Input,{"data-lpignore":"true",type:"text",name:"first_name",label:(0,d.localize)("First name*"),value:n.first_name,onChange:p,onBlur:E,required:!0,disabled:!e.isChangeableField("first_name"),error:l.first_name&&a.first_name,id:"first_name"}),r().createElement(m.Input,{id:"last_name","data-lpignore":"true",type:"text",name:"last_name",label:(0,d.localize)("Last name*"),value:n.last_name,onChange:p,onBlur:E,required:!0,disabled:!e.isChangeableField("last_name"),error:l.last_name&&a.last_name}))),r().createElement(m.MobileWrapper,null,r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Input,{"data-lpignore":"true",type:"text",name:"first_name",id:"first_name_mobile",label:(0,d.localize)("First name*"),value:n.first_name,onChange:p,onBlur:E,required:!0,disabled:!e.isChangeableField("first_name"),error:l.first_name&&a.first_name})),r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Input,{"data-lpignore":"true",type:"text",name:"last_name",id:"last_name_mobile",label:(0,d.localize)("Last name*"),value:n.last_name,onChange:p,onBlur:E,required:!0,disabled:!e.isChangeableField("last_name"),error:l.last_name&&a.last_name}))),r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.DesktopWrapper,null,r().createElement(le.gN,{name:"place_of_birth"},(function(t){var n=t.field;return r().createElement(m.Autocomplete,ke({},n,{"data-lpignore":"true",autoComplete:"new-password",type:"text",label:x?(0,d.localize)("Place of birth"):(0,d.localize)("Place of birth*"),error:l.place_of_birth&&a.place_of_birth,id:"birth_place",required:!x,disabled:!e.isChangeableField("place_of_birth"),list_items:g,onItemSelection:function(e){var t=e.value,n=e.text;return k("place_of_birth",t?n:"",!0)}}))}))),r().createElement(m.MobileWrapper,null,r().createElement(m.SelectNative,{placeholder:(0,d.localize)("Please select"),label:x?(0,d.localize)("Place of birth"):(0,d.localize)("Place of birth*"),required:!x,disabled:!e.isChangeableField("place_of_birth"),value:n.place_of_birth,list_items:g,use_text:!0,error:l.place_of_birth&&a.place_of_birth,onChange:function(e){return k("place_of_birth",e.target.value,!0)},id:"birth_place_mobile",should_hide_disabled_options:!1}))),r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.DateOfBirthPicker,{name:"date_of_birth",label:(0,d.localize)("Date of birth*"),error:l.date_of_birth&&a.date_of_birth,onBlur:function(){return S({date_of_birth:!0})},onChange:function(e){var t=e.target;return k("date_of_birth",null!=t&&t.value?(0,o.toMoment)(t.value).format("YYYY-MM-DD"):"",!0)},id:"birth_day",disabled:!e.isChangeableField("date_of_birth"),value:n.date_of_birth})),r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.DesktopWrapper,null,r().createElement(le.gN,{name:"citizen"},(function(t){var n=t.field;return r().createElement(m.Autocomplete,ke({},n,{"data-lpignore":"true",autoComplete:"new-password",type:"text",label:h?(0,d.localize)("Citizenship*"):(0,d.localize)("Citizenship"),error:l.citizen&&a.citizen,disabled:!e.isChangeableField("citizen"),list_items:g,onItemSelection:function(e){var t=e.value,n=e.text;return k("citizen",t?n:"",!0)},id:"password",required:h}))}))),r().createElement(m.MobileWrapper,null,r().createElement(m.MobileWrapper,null,r().createElement(m.SelectNative,{placeholder:(0,d.localize)("Please select"),label:h?(0,d.localize)("Citizenship*"):(0,d.localize)("Citizenship"),id:"citizen_ship",required:h,disabled:!e.isChangeableField("citizen"),value:n.citizen,list_items:g,error:l.citizen&&a.citizen,use_text:!0,onChange:function(e){return k("citizen",e.target.value,!0)},should_hide_disabled_options:!1})))))),r().createElement(de.Z,{has_side_note:_},r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Input,{"data-lpignore":"true",type:"text",name:"residence",id:"residence",label:(0,d.localize)("Country of residence*"),value:n.residence,required:!0,disabled:!e.isChangeableField("residence"),error:l.residence&&a.residence,onChange:p})),r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Input,{"data-lpignore":"true",type:"text",name:"email",id:"email",label:(0,d.localize)("Email address*"),value:n.email,required:!0,disabled:!e.isChangeableField("email"),error:l.email&&a.email,onChange:p}))),!b&&r().createElement(r().Fragment,null,r().createElement(de.Z,{has_side_note:_},r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Input,{"data-lpignore":"true",type:"text",name:"phone",id:"phone",label:(0,d.localize)("Phone number*"),value:n.phone,onChange:p,onBlur:E,required:!0,error:l.phone&&a.phone})))),r().createElement(r().Fragment,null,v&&r().createElement(r().Fragment,null,r().createElement(f.default,{title:(0,d.localize)("Tax information")}),r().createElement(de.Z,{has_side_note:_,side_note:(0,d.localize)("Were legally obliged to ask for your tax information.")},"tax_residence"in n&&r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(le.gN,{name:"tax_residence"},(function(t){var o=t.field;return r().createElement(r().Fragment,null,Array.isArray(n.tax_residence)&&!e.isChangeableField("tax_residence")?r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Input,{type:"text",id:"tax_residence_disabled",name:"tax_residence",label:(0,d.localize)("Tax residence*"),value:n.tax_residence.join(", "),disabled:!0})):r().createElement(Ne,{is_changeable:e.isChangeableField("tax_residence"),field:o,id:"tax_residence",touched:l,errors:a,setFieldValue:k,values:n,residence_list:e.props.residence_list}))}))),"tax_identification_number"in n&&r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Input,{"data-lpignore":"true",type:"text",id:"tax_identification_number",name:"tax_identification_number",label:(0,d.localize)("Tax identification number*"),value:n.tax_identification_number,onChange:p,onBlur:E,error:l.tax_identification_number&&a.tax_identification_number,disabled:!e.isChangeableField("tax_identification_number"),required:!0})))),!_&&!b&&r().createElement(r().Fragment,null,r().createElement(f.default,{title:(0,d.localize)("Address")}),r().createElement(de.Z,{has_side_note:_},r().createElement("div",{className:"account-address__details-section"},r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Input,{"data-lpignore":"true",autoComplete:"off",type:"text",maxLength:70,name:"address_line_1",id:"address_line_1",label:(0,d.localize)("First line of address*"),value:n.address_line_1,onChange:p,onBlur:E,error:l.address_line_1&&a.address_line_1,required:!0,disabled:!e.isChangeableField("address_line_1")})),r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Input,{"data-lpignore":"true",autoComplete:"off",type:"text",maxLength:70,name:"address_line_2",id:"address_line_2",label:(0,d.localize)("Second line of address (optional)"),value:n.address_line_2,error:l.address_line_2&&a.address_line_2,onChange:p,onBlur:E,required:!0,disabled:!e.isChangeableField("address_line_2")})),r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Input,{"data-lpignore":"true",autoComplete:"off",type:"text",name:"address_city",id:"address_city",label:(0,d.localize)("Town/City*"),value:n.address_city,error:l.address_city&&a.address_city,onChange:p,onBlur:E,required:!0,disabled:!e.isChangeableField("address_city")})),r().createElement("fieldset",{className:"account-form__fieldset"},y.length?r().createElement(r().Fragment,null,r().createElement(m.DesktopWrapper,null,r().createElement(le.gN,{name:"address_state"},(function(t){var n=t.field;return r().createElement(m.Autocomplete,ke({},n,{"data-lpignore":"true",autoComplete:"new-password",type:"text",label:(0,d.localize)("State/Province (optional)"),id:"state_province",error:l.address_state&&a.address_state,list_items:y,onItemSelection:function(e){var t=e.value,n=e.text;return k("address_state",t?n:"",!0)},disabled:!e.isChangeableField("address_state")}))}))),r().createElement(m.MobileWrapper,null,r().createElement(m.SelectNative,{placeholder:(0,d.localize)("Please select"),label:(0,d.localize)("State/Province (optional)"),value:n.address_state,list_items:y,id:"state_province_mobile",error:l.address_state&&a.address_state,use_text:!0,onChange:function(e){return k("address_state",e.target.value,!0)},disabled:!e.isChangeableField("address_state")}))):r().createElement(m.Input,{"data-lpignore":"true",autoComplete:"off",type:"text",name:"address_state",id:"address_state",label:(0,d.localize)("State/Province (optional)"),value:n.address_state,error:l.address_state&&a.address_state,onChange:p,onBlur:E,disabled:!e.isChangeableField("address_state")})),r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Input,{"data-lpignore":"true",autoComplete:"off",type:"text",name:"address_postcode",id:"address_postcode",label:(0,d.localize)("Postal/ZIP code"),value:n.address_postcode,error:l.address_postcode&&a.address_postcode,onChange:p,onBlur:E,disabled:!e.isChangeableField("address_postcode")})))))),r().createElement(f.default,{title:(0,d.localize)("Email preference")}),r().createElement(de.Z,{has_side_note:_,side_note:(0,d.localize)("Check this box to receive updates via email.")},r().createElement("fieldset",{className:"account-form__fieldset"},r().createElement(m.Checkbox,{name:"email_consent",value:n.email_consent,onChange:function(){k("email_consent",!n.email_consent),C("email_consent",!0,!0)},label:(0,d.localize)("Get updates about Deriv products, services and events."),id:"email_consent",defaultChecked:!!n.email_consent,disabled:!e.isChangeableField("email_consent")&&!b,className:_&&"dc-checkbox-blue"})))),r().createElement(ce.default,null,i&&i.msg&&r().createElement(m.FormSubmitErrorMessage,{message:i.msg}),!e.props.is_virtual&&!(z||c||i&&i.msg)&&r().createElement(m.Text,{className:"account-form__footer-note",size:"xxxs"},(0,d.localize)("Please make sure your information is correct or it may affect your trading experience.")),r().createElement(m.Button,{className:A()("account-form__footer-btn",{"dc-btn--green":c}),type:"submit",is_disabled:z||!N||!b&&!!(a.first_name||!n.first_name||a.last_name||!n.last_name||a.phone||!n.phone||v&&a.tax_residence||v&&!n.tax_residence||v&&a.tax_identification_number||v&&!n.tax_identification_number||!x&&a.place_of_birth||!x&&!n.place_of_birth||a.address_line_1||!n.address_line_1||a.address_line_2||a.address_city||!n.address_city||a.address_state||a.address_postcode),has_effect:!0,is_loading:s,is_submit_success:c,text:_?(0,d.localize)("Save"):(0,d.localize)("Submit"),large:!0,primary:!0}))))}))}}])&&xe(t.prototype,n),l}(r().Component);Te.contextType=o.PlatformContext;const Oe=(0,_.$j)((function(e){var t=e.client;return{account_settings:t.account_settings,has_residence:t.has_residence,getChangeableFields:t.getChangeableFields,is_eu:t.is_eu,is_mf:"maltainvest"===t.landing_company_shortcode,is_svg:t.is_svg,is_virtual:t.is_virtual,residence_list:t.residence_list,states_list:t.states_list,fetchResidenceList:t.fetchResidenceList,fetchStatesList:t.fetchStatesList,refreshNotifications:t.refreshNotifications}}))((0,c.withRouter)(Te));var je=n("./Sections/Profile/FinancialAssessment/index.js"),Pe=n("./Components/poi-missing-personal-details/index.js"),Le=n("./Sections/Verification/ProofOfIdentity/proof-of-identity-container.jsx");function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Me(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(i,e);var t,n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Re(e);if(t){var r=Re(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Fe(this,n)}}(i);function i(){var e;Ae(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).routeBackTo=function(t){e.props.routeBackInApp(e.props.history,[t])},e}return t=i,(n=[{key:"componentDidMount",value:function(){var e=this;o.WS.wait("get_account_status").then((function(){if(!e.props.should_allow_authentication){var t=(0,o.getPlatformRedirect)(e.props.app_routing_history);e.props.routeBackInApp(e.props.history,[t])}}))}},{key:"render",value:function(){var e=this,t=(0,o.getPlatformRedirect)(this.props.app_routing_history),n="P2P"===t.name;return this.props.is_virtual?r().createElement(D.default,null):this.props.has_missing_required_field?r().createElement(Pe.default,null):r().createElement(m.AutoHeightWrapper,{default_height:200},(function(a){var i=a.setRef,l=a.height;return r().createElement("div",{ref:i,className:"proof-of-identity"},r().createElement(Le.default,{account_status:e.props.account_status,serviceToken:o.WS.serviceToken,notificationEvent:o.WS.notificationEvent,getAccountStatus:o.WS.authorized.getAccountStatus,addNotificationByKey:e.props.addNotificationByKey,is_mx_mlt:e.props.is_mx_mlt,removeNotificationByKey:e.props.removeNotificationByKey,removeNotificationMessage:e.props.removeNotificationMessage,refreshNotifications:e.props.refreshNotifications,height:l,redirect_button:n&&r().createElement(m.Button,{primary:!0,className:"proof-of-identity__redirect",onClick:function(){return e.routeBackTo(t.route)}},r().createElement(d.Localize,{i18n_default_text:"Back to {{platform_name}}",values:{platform_name:t.name}})),is_description_enabled:!0}))}))}}])&&Me(t.prototype,n),i}(r().Component);Be.contextType=o.PlatformContext;const qe=(0,_.$j)((function(e){var t=e.client,n=e.ui,a=e.common;return{account_status:t.account_status,has_missing_required_field:t.has_missing_required_field,is_virtual:t.is_virtual,is_mx_mlt:"iom"===t.landing_company_shortcode||"malta"===t.landing_company_shortcode,refreshNotifications:t.refreshNotifications,addNotificationByKey:n.addNotificationMessageByKey,removeNotificationByKey:n.removeNotificationByKey,removeNotificationMessage:n.removeNotificationMessage,routeBackInApp:a.routeBackInApp,app_routing_history:a.app_routing_history,should_allow_authentication:t.should_allow_authentication}}))((0,u.withRouter)(Be));var We=n("./Sections/Verification/ProofOfAddress/proof-of-address-container.jsx"),Ue=function(e){var t=e.is_virtual,n=e.is_mx_mlt,a=e.refreshNotifications,i=r().useContext(o.PlatformContext).is_dashboard;return t?r().createElement(D.default,{has_demo_icon:i,has_button:!0}):r().createElement(We.default,{is_mx_mlt:n,refreshNotifications:a})};Ue.propTypes={is_mx_mlt:l.PropTypes.bool,is_virtual:l.PropTypes.bool,refreshNotifications:l.PropTypes.func};const Ye=(0,_.$j)((function(e){var t=e.client;return{is_mx_mlt:"iom"===t.landing_company_shortcode||"malta"===t.landing_company_shortcode,is_virtual:t.is_virtual,refreshNotifications:t.refreshNotifications}}))(Ue);var $e=n("../../../node_modules/qrcode.react/lib/index.js"),Ve=n.n($e);function Ge(){return(Ge=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Ke(e,t,n,a,r,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,r)}function He(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const Ze=function(e){var t=e.is_enabled,n=e.setEnabled,a=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return He(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?He(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r().useState(!1),2),i=a[0],l=a[1],s=t?(0,d.localize)("Disable 2FA"):(0,d.localize)("Enable"),c=function(){var e,a=(e=regeneratorRuntime.mark((function e(a,r){var i,s,c,u,m,_,f,p,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.setSubmitting,s=r.setFieldError,c=r.resetForm,u=t?"disable":"enable",e.next=4,o.WS.authorized.accountSecurity({account_security:1,totp_action:u,otp:a.digit_code});case 4:m=e.sent,i(!1),m.error?(_=m.error,f=_.code,p=_.message,s("digit_code","InvalidOTP"===f?(0,d.localize)("That's not the right code. Please try again."):p)):(h=!!(0,o.getPropertyValue)(m,["account_security","totp","is_enabled"]),l(!0),c(),n(h));case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){Ke(o,a,r,i,l,"next",e)}function l(e){Ke(o,a,r,i,l,"throw",e)}i(void 0)}))});return function(e,t){return a.apply(this,arguments)}}();return r().createElement(le.J9,{initialValues:{digit_code:""},onSubmit:c,validate:function(e){var t={},n=e.digit_code;return n?6!==n.length?t.digit_code=(0,d.localize)("Length of digit code must be 6 characters."):/^[0-9]{6}$/g.test(n)||(t.digit_code=(0,d.localize)("Digit code must only contain numbers.")):t.digit_code=(0,d.localize)("Digit code is required."),t}},(function(e){var t=e.values,n=e.errors,a=e.isValid,o=e.touched,l=e.handleChange,c=e.handleBlur,u=e.isSubmitting;return r().createElement(le.l0,{noValidate:!0},r().createElement("div",{className:"two-factor__input-group"},r().createElement(le.gN,{name:"digit_code"},(function(e){var a=e.field;return r().createElement(m.Input,Ge({},a,{"data-lpignore":"true",type:"text",className:"two-factor__input",label:(0,d.localize)("6 digit code"),value:t.digit_code,onChange:l,onBlur:c,required:!0,error:o.digit_code&&n.digit_code}))})),r().createElement(m.Button,{className:A()("two-factor__button",{"two-factor__button--success":i}),type:"submit",is_disabled:u||!a,has_effect:!0,is_loading:u,is_submit_success:i,text:s,large:!0,primary:!0})))}))},Xe=function(){return r().createElement(R,{title:(0,d.localize)("Two-factor authentication (2FA)"),descriptions:[r().createElement(d.Localize,{key:0,i18n_default_text:"Protect your account with 2FA. Each time you log in to your account, you will need to enter your password and an authentication code generated by a 2FA app on your smartphone."})]})};function Je(e,t,n,a,r,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,r)}function Qe(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){Je(o,a,r,i,l,"next",e)}function l(e){Je(o,a,r,i,l,"throw",e)}i(void 0)}))}}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return tt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?tt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var nt=function(e){var t=e.email_address,n=e.is_switching,a=et(r().useState(!0),2),i=a[0],l=a[1],s=et(r().useState(!1),2),c=s[0],u=s[1],_=et(r().useState(!1),2),f=_[0],p=_[1],h=et(r().useState(""),2),g=h[0],y=h[1],b=et(r().useState(""),2),v=b[0],x=b[1],E=et(r().useState(""),2),w=E[0],z=E[1],k=r().useContext(o.PlatformContext).is_dashboard;r().useEffect((function(){N()}),[]);var C=function(){var e=Qe(regeneratorRuntime.mark((function e(){var n,a,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(!0),e.next=3,o.WS.authorized.accountSecurity({account_security:1,totp_action:"generate"});case 3:if(n=e.sent,l(!1),!n.error){e.next=8;break}return y(n.error.message),e.abrupt("return");case 8:a=(0,o.getPropertyValue)(n,["account_security","totp","secret_key"]),r="otpauth://totp/".concat(t,"?secret=").concat(a,"&issuer=Deriv.com"),x(a),z(r),p(!1);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(e){u(e),e||C()},N=function(){var e=Qe(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.WS.authorized.accountSecurity({account_security:1,totp_action:"status"});case 2:if(!(t=e.sent).error){e.next=6;break}return y(t.error.message),e.abrupt("return");case 6:(n=!!(0,o.getPropertyValue)(t,["account_security","totp","is_enabled"]))?S(n):C(),l(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();if(i||n)return r().createElement(m.Loading,{is_fullscreen:!1,className:"account__initial-loader"});if(g)return r().createElement(M.default,{error_message:g});var T=r().createElement(m.ThemedScrollbars,{is_bypassed:(0,o.isMobile)(),className:"two-factor__scrollbars"},r().createElement("div",{className:"two-factor__wrapper--enabled"},r().createElement(m.Icon,{icon:"IcQrPhone",className:"two-factor__icon"}),r().createElement(m.Text,{as:"h3",align:"center",weight:"bold",color:"prominent",className:"two-factor__qr--title"},(0,d.localize)("2FA enabled")),r().createElement(m.Text,{as:"h4",size:"xs",align:"center",className:"two-factor__qr--message"},(0,d.localize)("You have enabled 2FA for your Deriv account.")),r().createElement(m.Text,{as:"h4",size:"xs",align:"center",className:"two-factor__qr--message"},(0,d.localize)("To disable 2FA, please enter the six-digit authentication code generated by your 2FA app below:")),r().createElement(Ze,{is_enabled:c,setEnabled:S}))),O=r().createElement(r().Fragment,null,r().createElement(m.ThemedScrollbars,{is_bypassed:(0,o.isMobile)(),autoHide:!0,className:"two-factor__scrollbars",hideHorizontal:!0},r().createElement(m.MobileWrapper,null,r().createElement(Xe,null)),r().createElement(m.Text,{as:"h2",color:"prominent",weight:"bold",className:"two-factor__title"},(0,d.localize)("How to set up 2FA for your Deriv account")),r().createElement("div",null,r().createElement(m.Timeline,{className:"two-factor__timeline"},r().createElement(m.Timeline.Item,{item_title:r().createElement(d.Localize,{i18n_default_text:"Scan the QR code below with your 2FA app. We recommend <0>Authy</0> or <1>Google Authenticator</1>. We do not support <2>Duo Mobile</2>.",components:[r().createElement("a",{className:"link two-factor__link",href:"https://authy.com/",target:"_blank",rel:"noopener noreferrer",key:0}),r().createElement("a",{className:"link two-factor__link",href:"https://github.com/google/google-authenticator/wiki#implementations",target:"_blank",rel:"noopener noreferrer",key:1}),r().createElement("a",{className:"link two-factor__link",href:"https://help.duo.com/s/article/2112?language=en_US",target:"_blank",rel:"noopener noreferrer",key:2})]})},r().createElement("div",{className:"two-factor__qr"},f?r().createElement(m.Loading,{is_fullscreen:!1}):r().createElement(r().Fragment,null,r().createElement("div",{className:"two-factor__qr--wrapper"},r().createElement(Ve(),{value:w})),r().createElement(m.Text,{as:"h4",size:"xs",align:"center",className:"two-factor__qr--message"},(0,d.localize)("If you are unable to scan the QR code, you can manually enter this code instead:")),r().createElement("div",{className:"two-factor__qr--code"},r().createElement(m.Text,{size:"xs"},v),r().createElement(m.Clipboard,{text_copy:v,info_message:(0,d.localize)("Click here to copy key"),success_message:(0,d.localize)("Key copied!"),className:"two-factor__qr--clipboard"}))))),r().createElement(m.Timeline.Item,{item_title:(0,d.localize)("Enter the authentication code generated by your 2FA app:")},r().createElement(Ze,{is_enabled:c,setEnabled:S}))))),r().createElement(m.DesktopWrapper,null,r().createElement(Xe,null)));return r().createElement("section",{className:"two-factor"},r().createElement("div",{className:A()("two-factor__wrapper",{"two-factor__wrapper-dashboard":k})},c?T:O))};nt.propTypes={email_address:s().string,is_switching:s().bool};const at=(0,_.$j)((function(e){var t=e.client;return{email_address:t.email_address,is_switching:t.is_switching}}))(nt),rt=function(){return r().createElement(R,{title:(0,d.localize)("API token"),descriptions:[r().createElement(d.Localize,{key:0,i18n_default_text:"To access your mobile apps and other third-party apps, you'll first need to generate an API token."})]})};function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var it=function(e){var t=e.name,n=e.value,r=e.display_name,o=e.description,i=e.setFieldValue;return a.createElement(le.gN,{name:t},(function(e){var l=e.field;return a.createElement(m.CompositeCheckbox,ot({},l,{onChange:function(){return i(t,!n)},value:n,className:"api-token__checkbox",defaultChecked:n,label:r,description:o}))}))};it.propTypes={description:s().string.isRequired,display_name:s().string.isRequired,name:s().string.isRequired,value:s().oneOfType([s().string,s().bool]),setFieldValue:s().func.isRequired};const lt=it,st=a.createContext(),ct=function(){var e=a.useContext(st),t=e.footer_ref,n=e.toggleOverlay;return(0,$.createPortal)(a.createElement(m.AppSettings.Footer,null,a.createElement(m.AppSettings.Footer.Left,null,a.createElement("a",{className:"link link--prominent",onClick:n},a.createElement(m.Text,{size:"xxs",line_height:"m",weight:"bold"},a.createElement(d.Localize,{i18n_default_text:"Learn more about API token"}))))),t)},ut=function(){var e=a.useContext(st),t=e.overlay_ref,n=e.toggleOverlay;return a.createElement(m.Popup.Overlay,{descriptions:[{key:"api_token_desc_1",component:a.createElement(d.Localize,{key:0,i18n_default_text:"To access our mobile apps and other third-party apps, you'll first need to generate an API token."})}],done_text:(0,d.localize)("Done"),overlay_ref:t,title:(0,d.localize)("API Token"),toggleOverlay:n})};function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var mt=function(e){var t=e.token,n=a.useContext(st).deleteToken,r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(a.useState(!1),2),i=r[0],l=r[1],s=(0,o.useIsMounted)(),c=a.useRef(null);return a.useEffect((function(){i?c.current=setTimeout((function(){s()&&l(!1)}),1e4):clearTimeout(c.current)}),[i]),i?a.createElement(m.Button.Group,null,a.createElement(m.Button,{type:"button",secondary:!0,small:!0,onClick:function(){return l(!1)}},a.createElement(d.Localize,{i18n_default_text:"No"})),a.createElement(m.Button,{type:"button",secondary:!0,small:!0,onClick:function(){n(t.token).finally((function(){s()&&l(!1)}))}},a.createElement(d.Localize,{i18n_default_text:"Yes"}))):a.createElement(m.Button,{type:"button",secondary:!0,small:!0,onClick:function(){return l(!0)}},a.createElement(d.Localize,{i18n_default_text:"Delete"}))};mt.propTypes={token:s().shape({display_name:s().string.isRequired,last_used:s().string.isRequired,scopes:s().string.isRequired,token:s().string.isRequired}).isRequired};const _t=mt;var ft=function(e){var t=e.className,n=e.children;return e.should_bypass_text?a.createElement("td",{className:A()("da-api-token__table-cell",t)},n):a.createElement("td",{className:A()("da-api-token__table-cell",t)},a.createElement(m.Text,{color:"prominent ",size:"xs",line_height:"m"},n))};ft.propTypes={children:s().any.isRequired,should_bypass_text:s().bool};const pt=ft;var ht=function(e){var t=e.token;return a.createElement("tr",{className:"da-api-token__table-cell-row"},a.createElement(pt,{className:"da-api-token__table-cell--name"},t.display_name),a.createElement(pt,{should_bypass_text:!0},a.createElement("div",{className:"da-api-token__clipboard-wrapper"},a.createElement(m.Text,{as:"p",color:"prominent ",size:"xs",line_height:"m"},t.token),a.createElement(m.Clipboard,{className:"da-api-token__clipboard",info_message:(0,d.localize)("Click here to copy token"),popover_props:{relative_render:!1,zIndex:9999},success_message:(0,d.localize)("Token copied!"),text_copy:t.token}))),a.createElement(pt,null,t.scopes),a.createElement(pt,null,t.last_used),a.createElement(pt,{should_bypass_text:!0},a.createElement(_t,{token:t})))};ht.propTypes={token:s().shape({display_name:s().string.isRequired,last_used:s().string.isRequired,scopes:s().string.isRequired,token:s().string.isRequired}).isRequired};const gt=ht;var yt=function(e){var t=e.text;return a.createElement("th",{className:"da-api-token__table-header"},a.createElement(m.Text,{color:"prominent ",size:"xs",line_height:"m",weight:"bold"},t))};yt.propTypes={text:s().string.isRequired};const bt=yt,vt=function(){var e=a.useContext(st).api_tokens,t=function(e){var t=e.scopes.map((function(e){return(t=(e||"").replace(/-|_/g," "))[0].toUpperCase()+t.slice(1).toLowerCase();var t})),n=5===t.length?(0,d.localize)("All"):t.join(", "),a=e.last_used?(0,o.formatDate)(e.last_used,"DD/MM/YYYY"):(0,d.localize)("Never");return{display_name:e.display_name,scopes:n,last_used:a,token:e.token}};return(0,o.isMobile)()?e.map((function(e){var n=t(e);return a.createElement("div",{key:n.token,className:"da-api-token__scope"},a.createElement("div",{className:"da-api-token__scope-item"},a.createElement("div",null,a.createElement(m.Text,{as:"h5",size:"xxs",color:"general",line_height:"xs",weight:"bold"},a.createElement(d.Localize,{i18n_default_text:"Name"})),a.createElement(m.Text,{className:"da-api-token__scope-item--name",as:"p",size:"s",color:"general",line_height:"m"},n.display_name))),a.createElement("div",{className:"da-api-token__scope-item"},a.createElement("div",null,a.createElement(m.Text,{as:"h5",size:"xxs",color:"general",line_height:"xs",weight:"bold"},a.createElement(d.Localize,{i18n_default_text:"Token"})),a.createElement("div",{className:"da-api-token__clipboard-wrapper"},a.createElement(m.Text,{size:"xs",color:"general",line_height:"m"},n.token),a.createElement(m.Clipboard,{className:"da-api-token__clipboard",popover_props:{relative_render:!1,zIndex:9999},text_copy:n.token}))),a.createElement("div",null,a.createElement(m.Text,{as:"h5",size:"xxs",color:"general",line_height:"xs",weight:"bold"},a.createElement(d.Localize,{i18n_default_text:"Last Used"})),a.createElement(m.Text,{as:"p",size:"s",color:"general",line_height:"m"},n.last_used))),a.createElement("div",{className:"da-api-token__scope-item"},a.createElement("div",null,a.createElement(m.Text,{as:"h5",size:"xxs",color:"general",line_height:"xs",weight:"bold"},a.createElement(d.Localize,{i18n_default_text:"Scope"})),a.createElement(m.Text,{as:"p",size:"s",color:"general",line_height:"m"},n.scopes)),a.createElement("div",null,a.createElement(_t,{token:n}))))})):a.createElement("table",{className:"da-api-token__table"},a.createElement("thead",null,a.createElement("tr",{className:"da-api-token__table-header-row"},a.createElement(bt,{text:(0,d.localize)("Name")}),a.createElement(bt,{text:(0,d.localize)("Token")}),a.createElement(bt,{text:(0,d.localize)("Scopes")}),a.createElement(bt,{text:(0,d.localize)("Last used")}),a.createElement(bt,{text:(0,d.localize)("Action")}))),a.createElement("tbody",null,e.map((function(e){return a.createElement(gt,{key:e.token,token:t(e)})}))))};function xt(){return(xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Et(e,t,n,a,r,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,r)}function wt(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){Et(o,a,r,i,l,"next",e)}function l(e){Et(o,a,r,i,l,"throw",e)}i(void 0)}))}}function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function kt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){Ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Nt=function(e){var t=e.footer_ref,n=e.is_app_settings,r=e.is_switching,i=e.overlay_ref,l=e.setIsOverlayShown,s=e.ws,c=(0,o.useIsMounted)(),u=a.useRef(r),_=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(a.useReducer((function(e,t){return kt(kt({},e),t)}),{api_tokens:[],is_loading:!0,is_success:!1,is_overlay_shown:!1,error_message:"",show_delete:!1,dispose_token:"",is_delete_loading:!1,is_delete_success:!1}),2),f=_[0],p=_[1];a.useEffect((function(){return b(),function(){return p({dispose_token:""})}}),[]),a.useEffect((function(){u.current!==r&&(u.current=r,b())}),[r]),a.useEffect((function(){"function"==typeof l&&l(f.is_overlay_shown)}),[f.is_overlay_shown,l]);var h=function(e){return Object.keys(e).filter((function(t){return"token_name"!==t&&e[t]}))},g=function(){var e=wt(regeneratorRuntime.mark((function e(t,n){var a,r,i,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.setSubmitting,r=n.setFieldError,i=n.resetForm,e.next=3,s.apiToken({api_token:1,new_token:t.token_name,new_token_scopes:h(t)});case 3:(l=e.sent).error?r("token_name",l.error.message):c()&&(p({is_success:!0,api_tokens:(0,o.getPropertyValue)(l,["api_token","tokens"])}),setTimeout((function(){c()&&p({is_success:!1})}),500)),i(),a(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(e){c()&&(e.error?p({is_loading:!1,error_message:(0,o.getPropertyValue)(e,["error","message"])}):p({is_loading:!1,api_tokens:(0,o.getPropertyValue)(e,["api_token","tokens"])}))},b=function(){var e=wt(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p({is_loading:!0}),e.next=3,s.authorized.apiToken({api_token:1});case 3:t=e.sent,y(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=wt(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p({is_delete_loading:!0}),e.next=3,s.authorized.apiToken({api_token:1,delete_token:t});case 3:n=e.sent,y(n),c()&&p({is_delete_loading:!1,is_delete_success:!0}),setTimeout((function(){c&&p({is_delete_success:!1})}),500);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=f.api_tokens,E=f.is_loading,w=f.is_success,z=f.error_message,k=f.is_overlay_shown;if(E||r)return a.createElement(m.Loading,{is_fullscreen:!1,className:"account__initial-loader"});if(z)return a.createElement(M.default,{error_message:z});var C={api_tokens:x,toggleOverlay:function(){return p({is_overlay_shown:!f.is_overlay_shown})},deleteToken:v,footer_ref:t,overlay_ref:i};return a.createElement(a.Fragment,null,a.createElement(st.Provider,{value:C},a.createElement("section",{className:A()("da-api-token",{"da-api-token--app-settings":n})},a.createElement("div",{className:"da-api-token__wrapper"},a.createElement(m.ThemedScrollbars,{className:"da-api-token__scrollbars",is_bypassed:(0,o.isMobile)()},!n&&(0,o.isMobile)()&&a.createElement(rt,null),a.createElement(le.J9,{initialValues:{token_name:"",read:!1,trade:!1,payments:!1,admin:!1,trading_information:!1},onSubmit:g,validate:function(e){var t={},n=e.token_name&&e.token_name.trim();return n?/^[A-Za-z0-9\s_]+$/g.test(n)?n.length<2?t.token_name=(0,d.localize)("Length of token name must be between {{MIN_TOKEN}} and {{MAX_TOKEN}} characters.",{MIN_TOKEN:2,MAX_TOKEN:32}):n.length>32&&(t.token_name=(0,d.localize)("Maximum {{MAX_TOKEN}} characters.",{MAX_TOKEN:32})):t.token_name=(0,d.localize)("Only letters, numbers, and underscores are allowed."):t.token_name=(0,d.localize)("Please enter a token name."),t}},(function(e){var t=e.values,n=e.errors,r=e.isValid,o=e.dirty,i=e.touched,l=e.handleChange,s=e.handleBlur,c=e.isSubmitting,u=e.setFieldValue;return a.createElement(le.l0,{noValidate:!0},a.createElement(m.Timeline,{className:"da-api-token__timeline"},a.createElement(m.Timeline.Item,{item_title:(0,d.localize)("Select scopes based on the access you need.")},a.createElement("div",{className:"da-api-token__checkbox-wrapper"},a.createElement(lt,{name:"read",value:t.read,setFieldValue:u,display_name:(0,d.localize)("Read"),description:(0,d.localize)("View account activity such as settings, limits, balance sheets, trade purchase history, and more.")}),a.createElement(lt,{name:"trade",value:t.trade,display_name:(0,d.localize)("Trade"),setFieldValue:u,description:(0,d.localize)("Buy and sell contracts, renew expired purchases, and top up demo accounts.")}),a.createElement(lt,{name:"payments",value:t.payments,display_name:(0,d.localize)("Payments"),setFieldValue:u,description:(0,d.localize)("Withdraw to payment agents, and transfer funds between accounts.")}),a.createElement(lt,{name:"admin",value:t.admin,display_name:(0,d.localize)("Admin"),setFieldValue:u,description:(0,d.localize)("Open accounts, manage settings, manage token usage, and more.")}),a.createElement(lt,{name:"trading_information",value:t.trading_information,display_name:(0,d.localize)("Trading information"),setFieldValue:u,description:(0,d.localize)("View the trading history.")}))),a.createElement(m.Timeline.Item,{item_title:(0,d.localize)("Name your token and click on 'Create' to generate your token.")},a.createElement("div",{className:"da-api-token__input-group"},a.createElement(le.gN,{name:"token_name"},(function(e){var r=e.field;return a.createElement(m.Input,xt({},r,{"data-lpignore":"true",type:"text",className:"da-api-token__input",label:(0,d.localize)("Token name"),value:t.token_name,onChange:l,onBlur:s,hint:(0,d.localize)("Length of token name must be between 2 and 32 characters."),required:!0,error:i.token_name&&n.token_name}))})),a.createElement(m.Button,{className:A()("da-api-token__button",{"da-api-token__button--success":w}),type:"submit",is_disabled:!o||c||!r||!h(t).length,has_effect:!0,is_loading:c,is_submit_success:w,text:(0,d.localize)("Create"),primary:!0,large:!0}))),a.createElement(m.Timeline.Item,{item_title:(0,d.localize)("Copy and paste the token into the app.")},a.createElement(vt,null))))}))),!n&&(0,o.isDesktop)()&&a.createElement(rt,{title:(0,d.localize)("API token"),descriptions:[a.createElement(d.Localize,{key:0,i18n_default_text:"To access our mobile apps and other third-party apps, you'll first need to generate an API token."})]}))),t&&a.createElement(ct,null),i&&k&&a.createElement(ut,null)))};Nt.propTypes={footer_ref:s().shape({current:s().any}),is_app_settings:s().bool,is_switching:s().bool,overlay_ref:s().shape({current:s().any}),setIsOverlayShown:s().func,ws:s().any.isRequired};const Tt=Nt,Ot=(0,_.$j)((function(e){return{is_switching:e.client.is_switching,ws:o.WS}}))(Tt),jt=a.createContext();function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){It(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function It(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Mt=function(e){var t,n=e.is_eu,r=e.is_uk,i=e.is_deriv_crypto,l=e.is_app_settings;return(n?(t=[{component:a.createElement(d.Localize,{i18n_default_text:"These trading limits and self-exclusion help you control the amount of money and time you spend on Deriv.com and exercise <0>responsible trading</0>.",components:[a.createElement("a",{key:0,className:"link",rel:"noopener noreferrer",target:"_blank",href:(0,o.getStaticUrl)("/responsible",{is_deriv_crypto:i})})]})}],r?t.push({component:a.createElement(d.Localize,{i18n_default_text:"These trading limits are optional, and you can strengthen them at any time. If you dont wish to set a specific limit, leave the field blank. If you live in the United Kingdom, Customer Support can only remove or weaken your trading limits after 24 hours of receiving the request. If you live in the Isle of Man, Customer Support can only remove or weaken your trading limits after your trading limit period has expired."})}):t.push({component:a.createElement(d.Localize,{i18n_default_text:"These trading limits are optional, and you can strengthen them at any time. If you dont wish to set a specific limit, leave the field blank. Customer Support can only remove or weaken your trading limits after 24 hours of receiving the request."})}),t.push({component:a.createElement(d.Localize,{i18n_default_text:"When you set your limits or self-exclusion, they will be aggregated across all your account types in DTrader and DBot. For example, the losses made on both platforms will add up and be counted towards the loss limit you set."})}),r&&!l?t.push({component:a.createElement(d.Localize,{i18n_default_text:"You can also exclude yourself entirely for a specified duration. This can only be removed once your self-exclusion has expired. If you wish to continue trading once your self-exclusion period expires, you must contact Customer Support by calling <0>+447723580049</0> to lift this self-exclusion. Requests by chat or email shall not be entertained. There will be a 24-hour cooling-off period before you can resume trading.",components:[a.createElement("a",{key:0,className:"link",rel:"noopener noreferrer",target:"_blank",href:"tel:+447723580049"})]})}):l||t.push({component:a.createElement(d.Localize,{i18n_default_text:"You can also exclude yourself entirely for a specified duration. If, at any time, you decide to trade again, you must then contact our Customer Support to remove this self-exclusion. There will be a 24-hour-cooling-off period before you can resume trading. "})},{component:a.createElement(d.Localize,{i18n_default_text:"UK clients wont be able to remove their self-exclusion until the set period has expired. If you wish to continue trading once your self-exclusion period expires, you must contact Customer Support by calling <0>+447723580049</0> to lift this self-exclusion. Requests by chat or email shall not be entertained. There will be a 24-hour cooling-off period before you can resume trading. ",components:[a.createElement("a",{key:0,className:"link",rel:"noopener noreferrer",target:"_blank",href:"tel:+447723580049"})]})}),t):[{component:a.createElement(d.Localize,{i18n_default_text:"These self-exclusion limits help you control the amount of money and time you spend trading on DTrader, DBot, and SmartTrader. The limits you set here will help you exercise <0>responsible trading</0>.",components:[a.createElement("a",{key:0,className:"link",rel:"noopener noreferrer",target:"_blank",href:(0,o.getStaticUrl)("/responsible",{is_deriv_crypto:i})})]})},{component:a.createElement(d.Localize,{i18n_default_text:"These limits are optional, and you can adjust them at any time. You decide how much and how long youd like to trade. If you dont wish to set a specific limit, leave the field blank."})},{component:a.createElement(d.Localize,{i18n_default_text:"When you set your limits, they will be aggregated across all your account types in DTrader, DBot, and SmartTrader. For example, the losses made on all three platforms will add up and be counted towards the loss limit you set."})}].concat(function(e){return function(e){if(Array.isArray(e))return At(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return At(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?At(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(l?[]:[{component:a.createElement(d.Localize,{i18n_default_text:"You can also exclude yourself entirely for a specified duration. Once the self-exclusion period has ended, you can either extend it further or resume trading immediately. If you wish to reduce or remove the self-exclusion period, contact our <0>Customer Support</0>.",components:[a.createElement("a",{key:0,className:"link",rel:"noopener noreferrer",target:"_blank",href:(0,o.getStaticUrl)("/contact-us",{is_deriv_crypto:i})})]})}]))).map((function(e,t){return Lt(Lt({},e),{},{key:"self_exclusion_desc_".concat(t)})}))},Dt=function(e){var t=e.is_in_overlay,n=a.useContext(jt),r=n.is_app_settings,i=n.toggleArticle,l=n.overlay_ref,s=n.is_eu,c=n.is_uk,u=a.useContext(o.PlatformContext).is_deriv_crypto,_=Mt({is_eu:s,is_uk:c,is_deriv_crypto:u,is_app_settings:r});return t?a.createElement(m.Popup.Overlay,{descriptions:_,done_text:(0,d.localize)("Done"),overlay_ref:l,title:(0,d.localize)("Trading limits"),toggleOverlay:i}):a.createElement("div",{className:A()("da-self-exclusion-article__content",{"da-self-exclusion-article__content--is-in-modal":!t})},a.createElement("div",{className:"da-self-exclusion-article__content-header-container"},a.createElement(m.Text,{as:"h3",color:"prominent",size:"s",line_height:"l",weight:"bold",className:"da-self-exclusion-article__content-header"},a.createElement(d.Localize,{i18n_default_text:"About trading limits and self-exclusion"})),a.createElement(m.Icon,{icon:"IcCross",className:"da-self-exclusion-article__content-icon",onClick:i})),a.createElement("ul",{className:"da-self-exclusion-article__content-list"},_.map((function(e){return a.createElement("li",{key:e.key},a.createElement(m.Text,{as:"span",size:"xxs"},e.component))}))),r&&a.createElement("div",{className:"da-self-exclusion-article__content-button"},a.createElement(m.Button,{secondary:!0,large:!0,onClick:i},a.createElement(d.Localize,{i18n_default_text:"Done"}))))};Dt.propTypes={is_in_overlay:s().bool};const Ft=Dt,Rt=function(){var e=a.useContext(jt),t=e.state,n=e.toggleArticle;return a.createElement(m.Modal,{className:"self_exclusion__article-modal",is_open:t.show_article,toggleModal:n},a.createElement(m.ThemedScrollbars,null,a.createElement(Ft,{toggleModal:n})))};function Bt(){return(Bt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const qt=function(){var e=a.useContext(jt),t=e.is_app_settings,n=e.toggleArticle,r=e.is_eu,i=e.is_uk,l=a.useContext(o.PlatformContext).is_deriv_crypto,s=a.useContext(o.PlatformContext).is_dashboard;return a.createElement(R,Bt({title:(0,d.localize)("Trading limits and self-exclusion"),descriptions:s&&(0,o.isDesktop)()?Mt({is_eu:r,is_uk:i,is_deriv_crypto:l,is_app_settings:t}):[r?a.createElement(d.Localize,{i18n_default_text:"These trading limits and self-exclusion help you control the amount of money and time you spend on Deriv.com and exercise <0>responsible trading</0>.",components:[a.createElement(m.StaticUrl,{key:0,className:"link",href:"/responsible"})]}):a.createElement(d.Localize,{i18n_default_text:"These self-exclusion limits help you control the amount of money and time you spend trading on DTrader, DBot, and SmartTrader. The limits you set here will help you exercise <0>responsible trading</0>.",components:[a.createElement(m.StaticUrl,{key:0,className:"link",href:"/responsible"})]})]},(!s||(0,o.isMobile)())&&{onClickLearnMore:n}))};var Wt=function(e){var t=e.children,n=a.useContext(jt),r=n.is_app_settings,i=n.is_wrapper_bypassed,l=n.state;return i?a.createElement("section",{className:A()("da-self-exclusion",{"da-self-exclusion--app-settings":r})},(0,o.isMobile)()&&a.createElement(qt,null),t):a.createElement(m.Div100vhContainer,{className:A()("da-self-exclusion__wrapper",{"da-self-exclusion__wrapper--show-article":l.show_article}),is_disabled:(0,o.isDesktop)(),height_offset:"80px"},a.createElement(m.ThemedScrollbars,{className:"da-self-exclusion__scrollbars",is_bypassed:(0,o.isMobile)()},(0,o.isMobile)()&&a.createElement(qt,null),t),(0,o.isDesktop)()&&a.createElement(qt,null))};Wt.propTypes={children:s().any.isRequired};const Ut=Wt,Yt=function(){var e=a.useContext(jt).backToReview,t=(0,le.u6)(),n=t.handleSubmit,r=t.isSubmitting;return a.createElement("div",{className:"da-self-exclusion__confirm-limits"},a.createElement(m.Icon,{icon:"IcStop",className:"da-self-exclusion__confirm-limits-image"}),a.createElement(m.Text,{as:"h4",align:"center",color:"prominent",className:"da-self-exclusion__confirm-limits-header",line_height:"l",size:"s",weight:"bold"},a.createElement(d.Localize,{i18n_default_text:"Save new limits?"})),a.createElement(m.Text,{as:"p",align:"center",color:"general",className:"da-self-exclusion__confirm-limits-desc",line_height:"m",size:"xs"},a.createElement(d.Localize,{i18n_default_text:"Remember: You cannot log in to your account until the selected date."})),a.createElement("div",{className:"da-self-exclusion__confirm-limits-buttons"},a.createElement(m.Button,{type:"button",secondary:!0,large:!0,onClick:e},a.createElement(d.Localize,{i18n_default_text:"No, review my limits"})),a.createElement(m.Button,{type:"submit",is_loading:r,is_disabled:r,primary:!0,large:!0,onClick:n},a.createElement(d.Localize,{i18n_default_text:"Yes, log me out immediately"}))))},$t=function(){var e=a.useContext(jt),t=e.backFromConfirmLimits,n=e.currency,r=e.currency_display,i=e.exclusion_texts,l=e.is_eu,s=e.state,c=(0,le.u6)(),u=c.isSubmitting,_=c.values;return s.show_confirm?a.createElement(Yt,null):a.createElement(a.Fragment,null,a.createElement("div",{onClick:t,className:"da-self-exclusion__back"},a.createElement(m.Icon,{icon:"IcArrowLeftBold"}),a.createElement(m.Text,{as:"p",size:"xs",weight:"bold"},a.createElement(d.Localize,{i18n_default_text:"Back"}))),a.createElement("div",{className:"da-self-exclusion__confirm"},a.createElement(m.Text,{className:"da-self-exclusion__confirm-header",as:"h2",size:"s",line_height:"l",weight:"bold",color:"prominent"},a.createElement(d.Localize,{i18n_default_text:"You have set the following limits:"})),s.changed_attributes.map((function(e,t){var l="";["exclude_until","timeout_until"].includes(e)?l=(0,o.toMoment)(_[e]).format("DD/MM/YYYY"):["max_deposit","max_7day_deposit","max_30day_deposit","max_total_stake","max_turnover","max_losses","max_7day_turnover","max_7day_losses","max_30day_turnover","max_30day_losses","max_balance"].includes(e)?l="".concat((0,o.formatMoney)(n,+_[e],!0)," ").concat(r):["session_duration_limit"].includes(e)?l=(0,d.localize)("{{value}} mins",{value:_[e]}):["max_open_bets"].includes(e)&&(l="".concat(_[e]));var s=0==+_[e]?"Removed":l;return a.createElement("div",{key:t,className:"da-self-exclusion__confirm-item"},a.createElement(m.Text,{as:"p",size:"xs"},i[e]),a.createElement(m.Text,{as:"p",size:"xs",align:"right",weight:"bold"},s))})),a.createElement(m.Text,{as:"p",size:"xs",align:"center",className:"da-self-exclusion__confirm-note"},l?a.createElement(d.Localize,{i18n_default_text:"Youll be able to adjust these limits at any time. You can reduce your limits from the <0>self-exclusion page</0>. To increase or remove your limits, please contact our <1>Customer Support team</1>.",components:[a.createElement(m.Text,{key:0,size:"xs",color:"loss-danger",weight:"bold"}),a.createElement(m.StaticUrl,{key:1,className:"link link--orange",href:"/contact-us"})]}):a.createElement(d.Localize,{i18n_default_text:"Well update your limits. Click <0>Accept</0> to acknowledge that you are fully responsible for your actions, and we are not liable for any addiction or loss.",components:[a.createElement(m.Text,{key:0,size:"xs",weight:"bold"})]})),a.createElement(m.Text,{as:"p",size:"xs",align:"center",color:"loss-danger",className:"da-self-exclusion__error"},s.submit_error_message),l?a.createElement(m.Button,{is_loading:u,is_disabled:u,primary:!0,large:!0,type:"submit"},a.createElement(d.Localize,{i18n_default_text:"Confirm my limits"})):a.createElement(m.Button,{is_loading:u,is_disabled:u,primary:!0,large:!0,type:"submit"},a.createElement(d.Localize,{i18n_default_text:"Accept"}))))},Vt=function(){var e=a.useContext(jt),t=e.footer_ref,n=e.goToConfirm,r=e.toggleArticle,o=(0,le.u6)(),i=o.dirty,l=o.isSubmitting,s=o.isValid,c=o.values;return t?(0,$.createPortal)(a.createElement(m.AppSettings.Footer,null,a.createElement(m.AppSettings.Footer.Left,null,a.createElement("a",{className:"link link--prominent",onClick:r},a.createElement(m.Text,{size:"xxs",line_height:"m",weight:"bold"},a.createElement(d.Localize,{i18n_default_text:"Learn more about trading limits"})))),a.createElement(m.AppSettings.Footer.Right,null,a.createElement(m.Button,{disabled:!i||!s||l,primary:!0,className:"da-self-exclusion__button",large:!0,onClick:function(){return n(c)},type:"button"},a.createElement(d.Localize,{i18n_default_text:"Next"})))),t):null};function Gt(){return(Gt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Kt=function(e){var t=e.title,n=e.has_border_line;return a.createElement(m.Text,{as:"h2",weight:"bold",size:(0,o.isMobile)()?"xxs":"xs",className:A()("da-self-exclusion__header",{"da-self-exclusion__header-border":n})},t)},Ht=function(){var e=a.useContext(jt),t=e.currency_display,n=e.getMaxLength,r=(0,le.u6)(),o=r.errors,i=r.handleBlur,l=r.handleChange,s=r.values;return a.createElement(a.Fragment,null,a.createElement(Kt,{title:a.createElement(d.Localize,{i18n_default_text:"Your stake and loss limits"})}),a.createElement("div",{className:"da-self-exclusion__item-wrapper"},a.createElement("div",{className:"da-self-exclusion__item"},a.createElement("h3",{className:"da-self-exclusion__item-title"},a.createElement(d.Localize,{i18n_default_text:"24 hours"})),a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Max. total stake"})),a.createElement(le.gN,{name:"max_turnover"},(function(e){var r,c=e.field;return a.createElement(m.Input,Gt({},c,{"data-lpignore":"true",className:"da-self-exclusion__input",label:t,value:null!==(r=s.max_turnover)&&void 0!==r?r:"",onChange:l,onBlur:i,maxLength:n("max_turnover"),required:!0,error:o.max_turnover}))})),a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Max. total loss"})),a.createElement(le.gN,{name:"max_losses"},(function(e){var r=e.field;return a.createElement(m.Input,Gt({},r,{"data-lpignore":"true",className:"da-self-exclusion__input",label:t,value:s.max_losses,onChange:l,onBlur:i,maxLength:n("max_losses"),required:!0,error:o.max_losses}))}))),a.createElement("div",{className:"da-self-exclusion__item"},a.createElement("h3",{className:"da-self-exclusion__item-title"},a.createElement(d.Localize,{i18n_default_text:"7 days"})),a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Max. total stake"})),a.createElement(le.gN,{name:"max_7day_turnover"},(function(e){var r=e.field;return a.createElement(m.Input,Gt({},r,{"data-lpignore":"true",className:"da-self-exclusion__input",label:t,value:s.max_7day_turnover,onChange:l,onBlur:i,maxLength:n("max_7day_turnover"),required:!0,error:o.max_7day_turnover}))})),a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Max. total loss"})),a.createElement(le.gN,{name:"max_7day_losses"},(function(e){var r=e.field;return a.createElement(m.Input,Gt({},r,{"data-lpignore":"true",className:"da-self-exclusion__input",label:t,value:s.max_7day_losses,onChange:l,onBlur:i,maxLength:n("max_7day_losses"),required:!0,error:o.max_7day_losses}))}))),a.createElement("div",{className:"da-self-exclusion__item"},a.createElement("h3",{className:"da-self-exclusion__item-title"},a.createElement(d.Localize,{i18n_default_text:"30 days"})),a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Max. total stake"})),a.createElement(le.gN,{name:"max_30day_turnover"},(function(e){var r=e.field;return a.createElement(m.Input,Gt({},r,{"data-lpignore":"true",className:"da-self-exclusion__input",label:t,onChange:l,onBlur:i,maxLength:n("max_30day_turnover"),required:!0,error:o.max_30day_turnover}))})),a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Max. total loss"})),a.createElement(le.gN,{name:"max_30day_losses"},(function(e){var r=e.field;return a.createElement(m.Input,Gt({},r,{"data-lpignore":"true",className:"da-self-exclusion__input",label:t,value:s.max_30day_losses,onChange:l,onBlur:i,maxLength:n("max_30day_losses"),required:!0,error:o.max_30day_losses}))})))))},Zt=function(){var e=a.useContext(jt),t=e.is_mlt,n=e.is_mx,r=e.is_tablet,i=e.session_duration_digits,l=(0,le.u6)(),s=l.errors,c=l.handleBlur,u=l.handleChange,_=l.setFieldValue,f=l.values,p=a.useContext(o.PlatformContext).is_dashboard;return a.createElement(a.Fragment,null,a.createElement(Kt,{title:a.createElement(d.Localize,{i18n_default_text:"Your session and login limits"}),has_border_line:p}),a.createElement("div",{className:"da-self-exclusion__item-wrapper"},a.createElement("div",{className:"da-self-exclusion__item"},a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"You will be automatically logged out from each session after this time limit."})),a.createElement(le.gN,{name:"session_duration_limit"},(function(e){var t=e.field;return a.createElement(m.Input,Gt({},t,{"data-lpignore":"true",className:"da-self-exclusion__input",label:(0,d.localize)("Minutes"),value:f.session_duration_limit,onChange:u,onBlur:c,maxLength:i,required:!0,error:s.session_duration_limit}))}))),a.createElement("div",{className:"da-self-exclusion__item"},a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"You will not be able to log in to your account until this date (up to 6 weeks from today)."})),a.createElement(le.gN,{name:"timeout_until"},(function(e){var t=e.field;return a.createElement(m.DatePicker,Gt({min_date:(0,o.toMoment)().add(1,"days").format("YYYY-MM-DD"),max_date:(0,o.toMoment)().add(6,"weeks").format("YYYY-MM-DD")},t,{should_show_today:!1,className:"da-self-exclusion__input",label:(0,d.localize)("Date"),value:f.timeout_until&&(0,o.epochToMoment)(f.timeout_until),onChange:function(e){var t=e.target;return _("timeout_until",null!=t&&t.value?t.value.unix():"",!0)},required:!0,readOnly:!0,error:s.timeout_until}))}))),a.createElement("div",{className:"da-self-exclusion__item"},a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Your account will be excluded from the website until this date (at least 6 months, up to 5 years)."})),a.createElement(le.gN,{name:"exclude_until"},(function(e){var t=e.field;return a.createElement(m.DatePicker,Gt({min_date:(0,o.toMoment)().add(6,"months").add(1,"days").format("YYYY-MM-DD"),max_date:(0,o.toMoment)().add(5,"years").format("YYYY-MM-DD")},t,{alignment:r?"bottom":"left",className:"da-self-exclusion__input",label:(0,d.localize)("Date"),value:f.exclude_until,onChange:function(e){var t=e.target;return _("exclude_until",null!=t&&t.value?(0,o.toMoment)(t.value).format("YYYY-MM-DD"):"",!0)},required:!0,autoComplete:"off",readOnly:!0,error:s.exclude_until}))})))),f.exclude_until&&(t||n)&&a.createElement("div",{className:"da-self-exclusion__warning"},a.createElement(m.Icon,{icon:"IcAlertWarning",className:"da-self-exclusion__warning-icon"}),a.createElement("div",{className:"da-self-exclusion__warning-textbox"},a.createElement(m.Text,{as:"p",size:"xxxs"},a.createElement(d.Localize,{i18n_default_text:"Self-exclusion on the website only applies to your Deriv.com account and does not include other companies or websites."})),a.createElement(m.Text,{as:"p",size:"xxxs"},t?a.createElement(d.Localize,{i18n_default_text:"If you are a UK resident, to self-exclude from all online gambling companies licensed in Great Britain, go to <0>www.gamstop.co.uk</0>.",components:[a.createElement("a",{key:0,className:"da-self-exclusion__warning-link",rel:"noopener noreferrer",target:"_blank",href:"https://www.gamstop.co.uk"})]}):a.createElement(d.Localize,{i18n_default_text:"To self-exclude from all online gambling companies licensed in Great Britain, go to <0>www.gamstop.co.uk</0>.",components:[a.createElement("a",{key:0,className:"da-self-exclusion__warning-link",rel:"noopener noreferrer",target:"_blank",href:"https://www.gamstop.co.uk"})]})),a.createElement(m.Text,{as:"p",size:"xxxs"},a.createElement(d.Localize,{i18n_default_text:"For more information and assistance to counselling and support services, please visit <0>begambleaware.org</0>.",components:[a.createElement("a",{key:0,className:"da-self-exclusion__warning-link",rel:"noopener noreferrer",target:"_blank",href:"http://begambleaware.org"})]})))))},Xt=function(){var e=a.useContext(jt),t=e.currency_display,n=e.getMaxLength,r=(0,le.u6)(),i=r.errors,l=r.handleBlur,s=r.handleChange,c=r.values,u=a.useContext(o.PlatformContext).is_dashboard;return a.createElement(a.Fragment,null,a.createElement(Kt,{title:a.createElement(d.Localize,{i18n_default_text:"Your maximum account balance and open positions"}),has_border_line:u}),a.createElement("div",{className:"da-self-exclusion__item-wrapper"},a.createElement("div",{className:"da-self-exclusion__item"},a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Once your account balance reaches this amount, you will not be able to deposit funds into your account."})),a.createElement(le.gN,{name:"max_balance"},(function(e){var r=e.field;return a.createElement(m.Input,Gt({},r,{"data-lpignore":"true",className:"da-self-exclusion__input",label:t,value:c.max_balance,onChange:s,onBlur:l,maxLength:n("max_balance"),required:!0,error:i.max_balance}))}))),a.createElement("div",{className:"da-self-exclusion__item"},a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Maximum open positions"})),a.createElement(le.gN,{name:"max_open_bets"},(function(e){var t=e.field;return a.createElement(m.Input,Gt({},t,{"data-lpignore":"true",className:"da-self-exclusion__input",label:(0,d.localize)("USD"),value:c.max_open_bets,onChange:s,onBlur:l,maxLength:n("max_open_bets"),required:!0,error:i.max_open_bets}))})))))},Jt=function(){var e=a.useContext(jt),t=e.currency,n=e.is_mlt,r=e.is_mf,i=e.is_mx,l=e.getMaxLength,s=(0,le.u6)(),c=s.errors,u=s.handleBlur,_=s.handleChange,f=s.values,p=a.useContext(o.PlatformContext).is_dashboard;return n||r||i?a.createElement(a.Fragment,null,a.createElement(Kt,{title:a.createElement(d.Localize,{i18n_default_text:"Your maximum deposit limit"}),has_border_line:p}),a.createElement("div",{className:"da-self-exclusion__item-wrapper"},a.createElement("div",{className:"da-self-exclusion__item"},a.createElement("h3",{className:"da-self-exclusion__item-title"},a.createElement(d.Localize,{i18n_default_text:"24 hours"})),a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Max. deposit limit"})),a.createElement(le.gN,{name:"max_deposit"},(function(e){var n=e.field;return a.createElement(m.Input,Gt({},n,{"data-lpignore":"true",className:"da-self-exclusion__input",label:t,value:f.max_deposit,onChange:_,onBlur:u,maxLength:l("max_deposit"),required:!0,error:c.max_deposit}))}))),a.createElement("div",{className:"da-self-exclusion__item"},a.createElement("h3",{className:"da-self-exclusion__item-title"},a.createElement(d.Localize,{i18n_default_text:"7 days"})),a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Max. deposit limit"})),a.createElement(le.gN,{name:"max_7day_deposit"},(function(e){var n=e.field;return a.createElement(m.Input,Gt({},n,{"data-lpignore":"true",className:"da-self-exclusion__input",label:t,value:f.max_7day_deposit,onChange:_,onBlur:u,maxLength:l("max_7day_deposit"),required:!0,error:c.max_7day_deposit}))}))),a.createElement("div",{className:"da-self-exclusion__item"},a.createElement("h3",{className:"da-self-exclusion__item-title"},a.createElement(d.Localize,{i18n_default_text:"30 days"})),a.createElement(m.Text,{as:"p",size:"xs",className:"da-self-exclusion__item-field"},a.createElement(d.Localize,{i18n_default_text:"Max. deposit limit"})),a.createElement(le.gN,{name:"max_30day_deposit"},(function(e){var n=e.field;return a.createElement(m.Input,Gt({},n,{"data-lpignore":"true",className:"da-self-exclusion__input",label:t,value:f.max_30day_deposit,onChange:_,onBlur:u,maxLength:l("max_30day_deposit"),required:!0,error:c.max_30day_deposit}))}))))):null};const Qt=function(){var e=a.useContext(o.PlatformContext).is_dashboard,t=a.useContext(jt),n=t.footer_ref,r=t.goToConfirm,i=t.is_app_settings,l=(0,le.u6)(),s=l.dirty,c=l.isSubmitting,u=l.isValid,_=l.values,f={dwallet:{condition:!!e,components:[Zt,Xt,Jt]},app_settings:{condition:!!i,components:[Ht,Xt]},deriv_app:{condition:!(e||i),components:[Ht,Zt,Xt,Jt]}};return a.createElement(a.Fragment,null,Object.keys(f).map((function(e,t){var n=f[e];return n.condition?a.createElement(a.Fragment,{key:"".concat(e).concat(t)},n.components.map((function(t,n){return a.createElement(t,{key:"".concat(e,"component").concat(n)})}))):null})),n?a.createElement(Vt,null):a.createElement("div",{className:"da-self-exclusion__button-wrapper"},a.createElement(m.Button,{disabled:!s||!u||c,primary:!0,className:"da-self-exclusion__button",large:!0,onClick:function(){return r(_)},type:"button"},a.createElement(d.Localize,{i18n_default_text:"Next"}))))},en=function(){var e=a.useContext(jt),t=e.handleSubmit,n=e.state,r=e.validateFields;return a.createElement(le.J9,{initialValues:n.self_exclusions,onSubmit:t,validate:r},a.createElement(le.l0,{className:"da-self-exclusion__form",noValidate:!0},n.is_confirm_page?a.createElement($t,null):a.createElement(Qt,null)))};function tn(e,t,n,a,r,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,r)}function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ln=function(e){var t=e.currency,n=e.footer_ref,r=e.is_app_settings,i=e.is_cr,l=e.is_dashboard,s=e.is_eu,c=e.is_mf,u=e.is_mlt,_=e.is_mx,f=e.is_switching,p=e.is_tablet,h=e.is_uk,g=e.is_virtual,y=e.is_wrapper_bypassed,b=e.logout,v=e.overlay_ref,x=e.setIsOverlayShown,E=e.ws,w=Object.freeze({max_number:9999999999999,max_open_positions:999999999,six_weeks:60480}),z={max_deposit:(0,d.localize)("Max. deposit limit per day"),max_turnover:(0,d.localize)("Max. total stake per day"),max_losses:(0,d.localize)("Max. total loss per day"),max_7day_deposit:(0,d.localize)("Max. deposit limit over 7 days"),max_7day_turnover:(0,d.localize)("Max. total stake over 7 days"),max_7day_losses:(0,d.localize)("Max. total loss over 7 days"),max_30day_deposit:(0,d.localize)("Max. deposit limit over 30 days"),max_30day_turnover:(0,d.localize)("Max. total stake over 30 days"),max_30day_losses:(0,d.localize)("Max. total loss over 30 days"),session_duration_limit:(0,d.localize)("Time limit per session"),timeout_until:(0,d.localize)("Time out until"),exclude_until:(0,d.localize)("Excluded from Deriv.com until"),max_balance:(0,d.localize)("Max. account balance"),max_open_bets:(0,d.localize)("Max. open positions")},k=a.useRef(null),C=a.useRef({}),S=a.useRef({max_deposit:"",max_turnover:"",max_losses:"",max_7day_deposit:"",max_7day_turnover:"",max_7day_losses:"",max_30day_deposit:"",max_30day_turnover:"",max_30day_losses:"",session_duration_limit:"",timeout_until:"",exclude_until:"",max_balance:"",max_open_bets:""}),N=Object.freeze({changed_attributes:[],error_message:"",is_confirm_page:!1,is_loading:!0,is_success:!1,self_exclusions:S.current,show_article:!1,show_confirm:!1,submit_error_message:""}),T=(0,o.useIsMounted)(),O=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return on(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?on(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(a.useReducer((function(e,t){return an(an({},e),t)}),N),2),j=O[0],P=O[1];a.useEffect((function(){return g?P({is_loading:!1}):(R(),F()),function(){P({changed_attributes:[]})}}),[]),a.useEffect((function(){k.current!==f&&(k.current=f,L(),R(),F())}),[f]),a.useEffect((function(){"function"==typeof x&&x(j.show_article)}),[j.show_article,x]);var L=function(){return P(N)},I=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,n){var a,r,o,i,l,s,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.setSubmitting,r=["exclude_until","timeout_until"],o=["exclude_until"],i=j.changed_attributes.some((function(e){return r.includes(e)})),l=function(){return new Promise((function(e){var n={set_self_exclusion:1};j.changed_attributes.forEach((function(e){n[e]=o.includes(e)?t[e]:+t[e]})),E.authorized.setSelfExclusion(n).then((function(t){return e(t)}))}))},!i){e.next=16;break}if(!j.show_confirm){e.next=13;break}return e.next=9,l();case 9:(s=e.sent).error&&T()?P({show_confirm:!1,submit_error_message:s.error.message}):b(),e.next=14;break;case 13:P({show_confirm:!0});case 14:e.next=20;break;case 16:return e.next=18,l();case 18:(c=e.sent).error&&T()?P({submit_error_message:c.error.message}):(a(!1),T()&&P({show_confirm:!1,is_loading:!0,is_confirm_page:!1}),R(),F());case 20:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){tn(o,a,r,i,l,"next",e)}function l(e){tn(o,a,r,i,l,"throw",e)}i(void 0)}))});return function(e,n){return t.apply(this,arguments)}}(),A=function(e){return Object.keys(e).forEach((function(t){e[t]="".concat(e[t])})),e},F=function(){P({is_loading:!0}),E.authorized.getSelfExclusion({get_self_exclusion:1}).then((function(e){!function(e){if(e.error&&T())P({is_loading:!1,error_message:(0,o.getPropertyValue)(e,["error","message"])});else{var t=A((0,o.getPropertyValue)(e,["get_self_exclusion"]));t.timeout_until&&(t.timeout_until=+t.timeout_until),T()&&P({is_loading:!1,self_exclusions:an(an({},S.current),t)})}}(e)}))},R=function(){P({is_loading:!0}),E.authorized.getLimits({get_limits:1}).then((function(e){C.current=e}))};if(g)return a.createElement(D.default,{has_demo_icon:l,has_button:l});if(j.is_loading||f)return a.createElement(m.Loading,{is_fullscreen:!1,className:"account__initial-loader"});if(j.error_message)return a.createElement(M.default,{error_message:j.error_message});var B=w.six_weeks,q=(0,o.getCurrencyDisplayCode)(t),W=B.toString().length,U={backFromConfirmLimits:function(){return P({is_confirm_page:!1,submit_error_message:""})},backToReview:function(){return P({show_confirm:!1})},currency:t,currency_display:q,exclusion_fields_settings:w,exclusion_limits:C,exclusion_texts:z,footer_ref:n,getMaxLength:function(e){var n,a,r=(0,o.getDecimalPlaces)(t),l=function(t){return t.toString().length+(function(e){return/session_duration_limit|max_open_bets/.test(e)}(e)||0===r?0:r+1)};return/max_open_bets/.test(e)&&null!==(n=C.current.get_limits)&&void 0!==n&&n.open_positions&&!i?l(C.current.get_limits.open_positions):/max_balance/.test(e)&&null!==(a=C.current.get_limits)&&void 0!==a&&a.account_balance&&!i?l(C.current.get_limits.account_balance):!j.self_exclusions[e]||i?/max_open_bets/.test(e)?9:l(w.max_number):l(j.self_exclusions[e])},goToConfirm:function(e){var t=Object.keys(e).filter((function(t){return e[t]!==j.self_exclusions[t]}));P({changed_attributes:t,is_confirm_page:!0})},handleSubmit:I,is_app_settings:r,is_eu:s,is_mf:c,is_mlt:u,is_mx:_,is_tablet:p,is_uk:h,is_wrapper_bypassed:y,objectValuesToString:A,overlay_ref:v,session_duration_digits:W,state:j,toggleArticle:function(){return P({show_article:!j.show_article})},validateFields:function(e){var n={},a=w.max_number,r=w.max_open_positions,l=w.six_weeks,c=(0,d.localize)("Please input number greater than 0"),u=function(e){return 0===e?1:"0.".concat(Array(e-1).fill(0).join(""),"1")};if(e.timeout_until&&(e.timeout_until<=(0,o.toMoment)().unix()?n.timeout_until=(0,d.localize)("Timeout time must be greater than current time."):e.timeout_until>(0,o.toMoment)().add(6,"week").unix()&&(n.timeout_until=(0,d.localize)("Timeout time cannot be more than 6 weeks."))),e.exclude_until&&((0,o.toMoment)(e.exclude_until).unix()<(0,o.toMoment)().unix()?n.exclude_until=(0,d.localize)("Exclude time must be after today."):(0,o.toMoment)(e.exclude_until).unix()<(0,o.toMoment)().add(6,"month").unix()?n.exclude_until=(0,d.localize)("Exclude time cannot be less than 6 months."):(0,o.toMoment)(e.exclude_until).unix()>(0,o.toMoment)().add(5,"year").unix()&&(n.exclude_until=(0,d.localize)("Exclude time cannot be for more than five years."))),["max_deposit","max_7day_deposit","max_30day_deposit","max_turnover","max_losses","max_7day_turnover","max_7day_losses","max_30day_turnover","max_30day_losses"].forEach((function(r){if(e[r]){var l=(0,o.validNumber)(e[r],{type:"float",decimals:(0,o.getDecimalPlaces)(t),min:s?u((0,o.getDecimalPlaces)(t)):null,max:s&&j.self_exclusions[r]||a}),d=l.is_ok,m=l.message;d||(n[r]=m)}!j.self_exclusions[r]||e[r]||i||(n[r]=c)})),e.session_duration_limit){var m=(0,o.validNumber)(e.session_duration_limit,{type:"integer",min:s?1:null,max:s?j.self_exclusions.session_duration_limit:l}),_=m.is_ok,f=m.message;_||(n.session_duration_limit=f),e.session_duration_limit>l&&(n.session_duration_limit=(0,d.localize)("Enter a value in minutes, up to 60480 minutes (equivalent to 6 weeks)."))}if(e.max_open_bets){var p=(0,o.validNumber)(e.max_open_bets,{type:"integer",min:s?1:null,max:s&&C.current.get_limits.open_positions||r}),h=p.is_ok,g=p.message;h||(n.max_open_bets=g)}if(e.max_balance){var y=(0,o.validNumber)(e.max_balance,{type:"float",decimals:(0,o.getDecimalPlaces)(t),min:s?u((0,o.getDecimalPlaces)(t)):null,max:s&&C.current.get_limits.account_balance||a}),b=y.is_ok,v=y.message;b||(n.max_balance=v)}return["max_balance","max_open_bets","session_duration_limit"].forEach((function(t){!j.self_exclusions[t]||e[t]||i||(n[t]=c)})),n}};return a.createElement(jt.Provider,{value:U},a.createElement(Ut,null,!r&&a.createElement(Rt,null),a.createElement(en,null)),v&&j.show_article&&a.createElement(Ft,{is_in_overlay:!0}))};ln.propTypes={currency:s().string.isRequired,footer_ref:s().shape({current:s().any}),is_app_settings:s().bool,is_cr:s().bool.isRequired,is_eu:s().bool.isRequired,is_mf:s().bool.isRequired,is_mlt:s().bool.isRequired,is_mx:s().bool.isRequired,is_switching:s().bool.isRequired,is_tablet:s().bool.isRequired,is_uk:s().bool.isRequired,is_virtual:s().bool.isRequired,is_wrapper_bypassed:s().bool,logout:s().func.isRequired,overlay_ref:s().shape({current:s().any}),setIsOverlayShown:s().func,ws:s().any};const sn=ln;function cn(){return(cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const un=(0,_.$j)((function(e){var t=e.client;return{is_tablet:e.ui.is_tablet,currency:t.currency,is_virtual:t.is_virtual,is_switching:t.is_switching,is_cr:t.standpoint.svg,is_eu:t.is_eu,is_mlt:"malta"===t.landing_company_shortcode,is_mf:"maltainvest"===t.landing_company_shortcode,is_mx:"iom"===t.landing_company_shortcode,is_uk:t.is_uk,is_wrapper_bypassed:!1,logout:t.logout,ws:o.WS}}))((function(e){var t=r().useContext(o.PlatformContext).is_dashboard;return r().createElement(sn,cn({is_dashboard:t},e))}));function dn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var mn={BTC:{display_code:"BTC",name:(0,d.localize)("Bitcoin")},BCH:{display_code:"BCH",name:(0,d.localize)("Bitcoin Cash")},ETH:{display_code:"ETH",name:(0,d.localize)("Ether")},ETC:{display_code:"ETC",name:(0,d.localize)("Ether Classic")},LTC:{display_code:"LTC",name:(0,d.localize)("Litecoin")},UST:{display_code:"USDT",name:(0,d.localize)("Tether")},USB:{display_code:"USB",name:(0,d.localize)("Binary Coin")},USD:{display_code:"USD",name:(0,d.localize)("US Dollar")},AUD:{display_code:"AUD",name:(0,d.localize)("Australian Dollar")},EUR:{display_code:"EUR",name:(0,d.localize)("Euro")},GBP:{display_code:"GBP",name:(0,d.localize)("Pound Sterling")}},_n=function(e){var t=e.currency,n=e.is_virtual;return r().createElement(r().Fragment,null,!n&&r().createElement(r().Fragment,null,r().createElement(m.Icon,{className:"account__inset_header-icon",icon:t?"IcCurrency-".concat(t):"IcCurrencyUnknown"}),r().createElement(m.Text,{color:"less-prominent",as:"p",size:"xs",className:"account__inset_header-subheading"},t?r().createElement(d.Localize,{i18n_default_text:"For your {{currency_name}} ({{currency}}) account",values:{currency_name:mn[t.toUpperCase()].name,currency:mn[t.toUpperCase()].display_code}}):r().createElement(d.Localize,{i18n_default_text:"No currency has been set for this account"}))))};_n.propTypes={currency:s().string,is_virtual:s().bool};const fn=_n;function pn(e,t){if(e){if("string"==typeof e)return hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?hn(e,t):void 0}}function hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var gn=function(e){var t=e.logout,n=e.history;return r().createElement("div",{className:"dc-vertical-tab__header account__logout ",onClick:function(){n.push(o.routes.index),t()}},r().createElement("div",{className:"dc-vertical-tab__header-group account__logout-tab"},r().createElement(m.Text,{color:"general",size:"xxs",weight:"normal"},(0,d.localize)("Log out"))))},yn=function(e){var t,n,a=e.account_status,i=e.currency,l=e.history,s=e.is_logged_in,c=e.is_logging_in,u=e.is_virtual,_=e.is_visible,f=e.location,p=e.logout,h=e.routeBackInApp,g=e.routes,y=e.should_allow_authentication,b=e.toggleAccount,v=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||pn(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r().useState(!0),2),x=v[0],E=v[1],w=r().useContext(o.PlatformContext).is_dashboard,z=(t=g.map((function(e){return e.subroutes})),(n=[]).concat.apply(n,function(e){return function(e){if(Array.isArray(e))return dn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return dn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dn(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t))),k=function(e){return function(e){if(Array.isArray(e))return hn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||pn(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(g);k=k.map((function(e){return{icon:e.icon,label:e.getTitle(),subitems:e.subroutes.map((function(e){return z.indexOf(e)}))}}));var C=z.filter((function(e){return e.path===f.pathname}))[0],S=r().useCallback((function(){return h(l)}),[h,l]);r().useEffect((function(){y&&E(!1),b(!0)}),[y,b]),x||(0,o.isEmptyObject)(a)||!(u&&/financial-assessment/.test(C.path)||!y&&/proof-of-identity|proof-of-address/.test(C.path))||h(l),g.forEach((function(e){e.subroutes.forEach((function(e){e.path===o.routes.financial_assessment&&(e.is_disabled=u),e.path!==o.routes.proof_of_identity&&e.path!==o.routes.proof_of_address||(e.is_disabled=!y)}))})),C||(C=z[0],l.push(o.routes.personal_details));var N=[{onClick:function(){h(l)},icon:"IcCross",title:(0,d.localize)("Close")}];if(C.path===g.account_limits&&N.push({component:function(){return r().createElement(fn,{currency:i,is_virtual:u})}}),!s&&c)return r().createElement(m.Loading,{is_fullscreen:!0,className:"account__initial-loader"});var T=(0,o.getSelectedRoute)({routes:z,pathname:f.pathname});return r().createElement(m.FadeWrapper,{is_visible:_,className:"account-page-wrapper",keyname:"account-page-wrapper"},r().createElement("div",{className:"account"},(0,o.isMobile)()&&T?r().createElement(m.PageOverlay,{header:T.getTitle(),onClickClose:S},r().createElement(T.component,{component_icon:T.icon_component})):w?r().createElement(m.VerticalTab,{title:T.getTitle(),onClickClose:S,alignment:"center",is_collapsible:!1,is_grid:!0,is_floating:!0,className:"dashboard",classNameHeader:"account__inset_header",current_path:f.pathname,is_routed:!0,is_full_width:!0,list:z,list_groups:k,extra_content:w&&r().createElement(gn,{logout:p,history:l})}):r().createElement(m.PageOverlay,{header:(0,d.localize)("Settings"),onClickClose:S},r().createElement(m.VerticalTab,{alignment:"center",is_floating:!0,classNameHeader:"account__inset_header",current_path:f.pathname,is_routed:!0,is_full_width:!0,list:z,list_groups:k}))))};yn.propTypes={account_status:s().object,currency:s().string,history:s().object,is_logged_in:s().bool,is_logging_in:s().bool,is_virtual:s().bool,is_visible:s().bool,location:s().object,logout:s().func,routes:s().arrayOf(s().object),should_allow_authentication:s().bool,toggleAccount:s().func};const bn=(0,_.$j)((function(e){var t=e.client,n=e.common,a=e.ui;return{account_status:t.account_status,currency:t.currency,is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,is_virtual:t.is_virtual,is_visible:a.is_account_settings_visible,logout:t.logout,routeBackInApp:n.routeBackInApp,should_allow_authentication:t.should_allow_authentication,toggleAccount:a.toggleAccountSettings}}))((0,u.withRouter)(yn)),vn=(0,_.$j)((function(){return{is_dxtrade_allowed:!1}}))((function(e){var t=e.redirectToReasons,n=e.is_dxtrade_allowed,a=r().useContext(o.PlatformContext).is_dashboard;return r().createElement("div",null,r().createElement("div",{className:"deactivate-account__information"},r().createElement(m.Text,{size:"xs",weight:"bold",className:"deactivate-account__information--bold",as:"p"},r().createElement(d.Localize,{i18n_default_text:"Deactivate account"})),r().createElement(m.Text,{size:"xs",as:"p",line_height:"s"},r().createElement(d.Localize,{i18n_default_text:"Before you deactivate your account, youll need to:"}))),r().createElement("div",{className:"deactivate-account__steps"},r().createElement(m.Text,{size:"xs",as:"p",weight:"bold",className:"deactivate-account__title"},r().createElement(d.Localize,{i18n_default_text:"1. Ensure to close all your positions"})),r().createElement(m.Text,{size:"xs",as:"p",line_height:"s"},r().createElement(d.Localize,{i18n_default_text:"If you have a Deriv real account, go to <0>Reports</0> to close or sell any open positions.",components:[r().createElement(u.Link,{to:"/reports/positions",key:0,className:"deactivate-account__link"})]})),r().createElement(m.Text,{size:"xs",as:"p"},n?r().createElement(d.Localize,{i18n_default_text:"If you have a DMT5 or Deriv X real account, log in to close any open positions."}):r().createElement(d.Localize,{i18n_default_text:"If you have a DMT5 real account, log in to close any open positions."}))),r().createElement("div",{className:"deactivate-account__steps"},r().createElement(m.Text,{size:"xs",as:"p",weight:"bold",line_height:"s",className:"deactivate-account__title"},r().createElement(d.Localize,{i18n_default_text:"2. Withdraw your funds"})),r().createElement(m.Text,{size:"xs",as:"p",line_height:"s"},r().createElement(d.Localize,{i18n_default_text:"If you have a Deriv real account, go to <0>Cashier</0> to withdraw your funds.",components:[r().createElement(u.Link,{to:"/cashier/withdrawal",key:0,className:"deactivate-account__link"})]})),r().createElement(m.Text,{size:"xs",as:"p"},n?r().createElement(d.Localize,{i18n_default_text:"If you have a DMT5 or Deriv X real account, go to your <0>DMT5</0> or <1>Deriv X</1> dashboard to withdraw your funds",components:[r().createElement(u.Link,{to:"/mt5",key:0,className:"deactivate-account__link"}),r().createElement(u.Link,{to:"/derivx",key:1,className:"deactivate-account__link"})]}):r().createElement(d.Localize,{i18n_default_text:"If you have a DMT5 real account, go to your <0>DMT5</0> dashboard to withdraw your funds",components:[r().createElement(u.Link,{to:"/mt5",key:0,className:"deactivate-account__link"})]}))),r().createElement(m.Button,{className:A()("deactivate-account__button",{"deactivate-account__button--dashboard":a}),large:!0,onClick:function(){return t()},primary:!0},r().createElement(d.Localize,{i18n_default_text:"Continue to account deactivation"})))}));function xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function En(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xn(Object(n),!0).forEach((function(t){wn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var zn=function(e,t){return e.find((function(e){return e.loginid===t}))},kn=function(e,t){return e.find((function(e){return e.login===t}))},Cn=function(e,t){return e.find((function(e){return e.account_id===t}))},Sn=function(e){var t=e.children,n=e.title,a=e.desc;return r().createElement("div",{className:"deactivate-account-error"},r().createElement(m.Text,{as:"p",line_height:"s",size:"xs",weight:"bold",color:"prominent",className:"deactivate-account-error__title"},n),a&&r().createElement(m.Text,{as:"p",size:"xxs",className:"deactivate-account-error__description"},a),r().createElement("div",{className:"deactivate-account-error__wrapper"},t))},Nn=function(e){var t=e.currency_icon,n=e.loginid,a=e.title,o=e.value;return r().createElement("div",{className:"deactivate-account-error__container"},r().createElement("div",{className:"deactivate-account-error__account-details"},r().createElement(m.Icon,{icon:t,size:24}),r().createElement("div",{className:"deactivate-account-error__account"},r().createElement(m.Text,{line_height:"s",color:"prominent",size:"xs"},a),r().createElement(m.Text,{color:"prominent",size:"xxxs",line_height:"xs"},n))),r().createElement(m.Text,{className:"deactivate-account-error__details",color:"prominent",size:"xs",line_height:"s",align:"right"},o))};const Tn=function(e){var t=e.details,n=e.mt5_login_list,a=e.dxtrade_accounts_list,i=e.client_accounts,l=e.onBackClick,s=[],c=[],u=[],_=[],f=[],p=[],h=[];return t.pending_withdrawals&&Object.keys(t.pending_withdrawals).forEach((function(e){var n={withdrawals:t.pending_withdrawals[e]},a=zn(i,e);a&&f.push(En(En({},a),n))})),t.open_positions&&Object.keys(t.open_positions).forEach((function(e){var r={positions:t.open_positions[e]},o=zn(i,e);if(o)s.push(En(En({},o),r));else{var l=kn(n,e);l&&u.push(En(En({},l),r));var c=Cn(a,e);c&&p.push(En(En({},c),r))}})),t.balance&&Object.keys(t.balance).forEach((function(e){var r={balance:t.balance[e].balance,currency:t.balance[e].currency},o=zn(i,e);if(o)c.push(En(En({},o),r));else{var l=kn(n,e);l&&_.push(En(En({},l),r));var s=Cn(a,e);s&&h.push(En(En({},s),r))}})),r().createElement(r().Fragment,null,r().createElement(m.ThemedScrollbars,{autohide:!1,width:"43rem"},!!s.length&&r().createElement(Sn,{title:(0,d.localize)("Please close your positions in the following Deriv account(s):")},s.map((function(e){return r().createElement(Nn,{key:e.loginid,currency_icon:"IcCurrency-".concat(e.icon),loginid:e.loginid,title:e.title,value:r().createElement(d.Localize,{i18n_default_text:"{{number_of_positions}} position(s)",values:{number_of_positions:e.positions}})})}))),!!c.length&&r().createElement(Sn,{title:(0,d.localize)("Please withdraw your funds from the following Deriv account(s):")},c.map((function(e){return r().createElement(Nn,{key:e.loginid,currency_icon:"IcCurrency-".concat(e.icon),loginid:e.loginid,title:e.title,value:r().createElement(m.Money,{currency:e.currency,amount:(0,o.formatMoney)(e.currency,e.balance,!0),should_format:!1})})}))),!!u.length&&r().createElement(Sn,{title:(0,d.localize)("Please close your positions in the following Deriv MT5 account(s):")},u.map((function(e){return r().createElement(Nn,{key:e.login,currency_icon:"IcMt5-".concat((0,o.getCFDAccount)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:o.CFD_PLATFORMS.MT5})),loginid:e.display_login,title:(0,o.getCFDAccountDisplay)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:o.CFD_PLATFORMS.MT5}),value:r().createElement(d.Localize,{i18n_default_text:"{{number_of_positions}} position(s)",values:{number_of_positions:e.positions}})})}))),!!_.length&&r().createElement(Sn,{title:(0,d.localize)("Please withdraw your funds from the following Deriv MT5 account(s):")},_.map((function(e){return r().createElement(Nn,{key:e.login,currency_icon:"IcMt5-".concat((0,o.getCFDAccount)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:o.CFD_PLATFORMS.MT5})),loginid:e.display_login,title:(0,o.getCFDAccountDisplay)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:o.CFD_PLATFORMS.MT5}),value:r().createElement(m.Money,{currency:e.currency,amount:(0,o.formatMoney)(e.currency,e.balance,!0),should_format:!1})})}))),!!p.length&&r().createElement(Sn,{title:(0,d.localize)("Please close your positions in the following Deriv X account(s):")},p.map((function(e){return r().createElement(Nn,{key:e.login,currency_icon:"IcDxtrade-".concat((0,o.getCFDAccount)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:o.CFD_PLATFORMS.DXTRADE})),loginid:e.display_login,title:(0,o.getCFDAccountDisplay)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:o.CFD_PLATFORMS.DXTRADE}),value:r().createElement(d.Localize,{i18n_default_text:"{{number_of_positions}} position(s)",values:{number_of_positions:e.positions}})})}))),!!h.length&&r().createElement(Sn,{title:(0,d.localize)("Please withdraw your funds from the following Deriv X account(s):")},h.map((function(e){return r().createElement(Nn,{key:e.login,currency_icon:"IcDxtrade-".concat((0,o.getCFDAccount)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:o.CFD_PLATFORMS.DXTRADE})),loginid:e.display_login,title:(0,o.getCFDAccountDisplay)({market_type:e.market_type,sub_account_type:e.sub_account_type,platform:o.CFD_PLATFORMS.DXTRADE}),value:r().createElement(m.Money,{currency:e.currency,amount:(0,o.formatMoney)(e.currency,e.balance,!0),should_format:!1})})}))),!!f.length&&r().createElement(Sn,{title:(0,d.localize)("Pending withdrawal request:"),desc:r().createElement(d.Localize,{i18n_default_text:"We are still processing your withdrawal request.<0 />Please wait for the transaction to be completed before deactivating your account.",components:[r().createElement("br",{key:0})]})},f.map((function(e){return r().createElement(Nn,{key:e.loginid,currency_icon:"IcCurrency-".concat(e.icon),loginid:e.loginid,title:e.title,value:r().createElement(d.Localize,{i18n_default_text:"{{pending_withdrawals}} pending withdrawal(s)",values:{pending_withdrawals:e.withdrawals}})})})))),r().createElement("div",null,r().createElement(m.Button,{className:"deactivate-account-error__button",primary:!0,onClick:l},(0,d.localize)("OK"))))};function On(e){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jn(){return(jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function Pn(e,t,n,a,r,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,r)}function Ln(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){Pn(o,a,r,i,l,"next",e)}function l(e){Pn(o,a,r,i,l,"throw",e)}i(void 0)}))}}function In(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function An(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dn(e,t){return!t||"object"!==On(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fn(e){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Bn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var qn={"I have other financial priorities":!1,"I want to stop myself from trading":!1,"I'm no longer interested in trading":!1,"I prefer another trading website":!1,"The platforms aren't user-friendly":!1,"Making deposits and withdrawals is difficult":!1,"The platforms lack key features or functionality":!1,"Customer service was unsatisfactory":!1,"I'm deactivating my account for other reasons":!1,other_trading_platforms:"",do_to_improve:""},Wn=function(e){var t=Un(e).map((function(e){return e[0]})).toString(),n=!!e.other_trading_platforms.length,a=!!e.do_to_improve.length;return n&&(t="".concat(t,", ").concat(e.other_trading_platforms)),a&&(t="".concat(t,", ").concat(e.do_to_improve)),t.replace(/(\r\n|\n|\r)/gm," ")},Un=function(e){return Object.entries(e).filter((function(e){var t=Rn(e,2),n=t[0],a=t[1];return!["other_trading_platforms","do_to_improve"].includes(n)&&a}))},Yn=function(e){return r().createElement("div",{className:"account-closure-warning-modal"},r().createElement(m.Icon,{icon:"IcRedWarning",size:96}),r().createElement(m.Text,{as:"p",weight:"bold",color:"loss-danger",className:"account-closure-warning-modal__warning-message"},(0,d.localize)("Warning!")),r().createElement(m.Text,{size:"xs",line_height:"x",weight:"bold"},(0,d.localize)("Deactivate account?")),r().createElement("div",{className:"account-closure-warning-modal__content-wrapper"},r().createElement(m.Text,{as:"p",align:"center",className:"account-closure-warning-modal__content"},(0,d.localize)("Deactivating your account will automatically log you out. You can reactivate your account by logging in at any time."))),r().createElement(m.FormSubmitButton,{is_disabled:!1,label:(0,d.localize)("Deactivate"),has_cancel:!0,cancel_label:(0,d.localize)("Go back"),onCancel:function(){return e.closeModal()},onClick:function(){return e.startDeactivating()}}))},$n=function(e){var t=e.message,n=e.onClick;return r().createElement(r().Fragment,null,r().createElement("div",{className:"deactivate-account-error__container deactivate-account-error__container-message"},r().createElement("div",{className:"deactivate-account-error__details deactivate-account-error__details-message"},t)),r().createElement("div",null,r().createElement(m.Button,{className:"deactivate-account-error__button",primary:!0,onClick:n},(0,d.localize)("OK"))))},Vn=110,Gn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(i,e);var t,n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Fn(e);if(t){var r=Fn(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Dn(this,n)}}(i);function i(){var e;In(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={api_error_message:"",is_loading:!1,is_account_deactivated:!1,is_modal_open:!1,reason:null,details:void 0,which_modal_should_render:void 0,is_checkbox_disabled:!1,total_checkbox_checked:0,remaining_characters:Vn,total_accumulated_characters:0},e.validateFields=function(t){var n={},a=Un(t).length,r=(t.other_trading_platforms+t.do_to_improve).length,o=Vn-r;if(a){var i=Wn(t);o=o>=0?o:0,/^[ a-zA-Z0-9.,'-\s]*$/.test(i)||(n.characters_limits=(0,d.localize)("Must be numbers, letters, and special characters . , ' -"))}else n.empty_reason=(0,d.localize)("Please select at least one reason");return e.setState({total_accumulated_characters:r,remaining_characters:o}),n},e.handleSubmitForm=function(t){var n=Wn(t);e.setState({is_modal_open:!0,which_modal_should_render:"warning_modal",reason:n})},e.handleChangeCheckbox=function(t,n,a){t[n]?e.setState({total_checkbox_checked:e.state.total_checkbox_checked-1},(function(){a(n,!t[n]),e.state.is_checkbox_disabled&&e.setState({is_checkbox_disabled:!1})})):e.setState({total_checkbox_checked:e.state.total_checkbox_checked+1},(function(){a(n,!t[n]),3===e.state.total_checkbox_checked&&e.setState({is_checkbox_disabled:!0})}))},e.closeModal=function(){e.setState({is_modal_open:!1})},e.startDeactivating=Ln(regeneratorRuntime.mark((function t(){var n,a,r,i,l,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.closeModal(),e.setState({is_loading:!0}),t.next=4,o.WS.authorized.accountClosure({account_closure:1,reason:e.state.reason});case 4:1===(n=t.sent).account_closure?e.setState({is_account_deactivated:!0}):(a=n.error,r=a.code,i=a.message,l=a.details,s=function(){return"AccountHasPendingConditions"===r?"AccountHasPendingConditions":"MT5AccountInaccessible"===r?"inaccessible_modal":"error_modal"},e.setState({which_modal_should_render:s(),details:l,api_error_message:i,is_modal_open:!0,is_loading:!1}));case 6:case"end":return t.stop()}}),t)}))),e.handleChange=function(t,n,a){var r=t.target.value,o=e.state,i=o.remaining_characters,l=o.total_accumulated_characters,s=n.length>r.length;(i<=0||l>=Vn)&&!s?t.preventDefault():a(t)},e.handleInputPaste=function(t){var n=(t.clipboardData||window.clipboardData).getData("text"),a=e.state.remaining_characters;(e.state.remaining_characters<=0||n.length>a)&&t.preventDefault()},e}return t=i,(n=[{key:"render",value:function(){var e=this;if(this.state.is_account_deactivated)return r().createElement(u.Redirect,{to:o.routes.account_deactivated});var t=this.context.is_dashboard;return this.state.is_loading?r().createElement(m.Loading,{is_fullscreen:!1}):r().createElement("div",{className:A()("deactivate-account-reasons",{"deactivate-account-reasons--dashboard":t})},r().createElement(m.Text,{weight:"bold",size:"xs",className:"deactivate-account-reasons__title",as:"p"},(0,d.localize)("Please tell us why youre leaving. (Select up to {{ allowed_reasons }} reasons.)",{allowed_reasons:3})),r().createElement(le.J9,{initialValues:qn,validate:this.validateFields,onSubmit:this.handleSubmitForm},(function(n){var a=n.values,o=n.setFieldValue,i=n.errors,l=n.handleChange,s=n.handleSubmit;return r().createElement("form",{onSubmit:s},r().createElement(le.gN,{name:"I have other financial priorities"},(function(t){var n=t.field;return r().createElement(m.Checkbox,jn({disabled:e.state.is_checkbox_disabled&&!a[n.name],className:"deactivate-account-reasons__checkbox"},n,{label:(0,d.localize)("I have other financial priorities."),onChange:function(){e.handleChangeCheckbox(a,n.name,o)}}))})),r().createElement(le.gN,{name:"I want to stop myself from trading"},(function(t){var n=t.field;return r().createElement(m.Checkbox,jn({disabled:e.state.is_checkbox_disabled&&!a[n.name],className:"deactivate-account-reasons__checkbox"},n,{label:(0,d.localize)("I want to stop myself from trading."),onChange:function(){e.handleChangeCheckbox(a,n.name,o)}}))})),r().createElement(le.gN,{name:"I'm no longer interested in trading"},(function(t){var n=t.field;return r().createElement(m.Checkbox,jn({disabled:e.state.is_checkbox_disabled&&!a[n.name],className:"deactivate-account-reasons__checkbox"},n,{label:(0,d.localize)("Im no longer interested in trading."),onChange:function(){e.handleChangeCheckbox(a,n.name,o)}}))})),r().createElement(le.gN,{name:"I prefer another trading website"},(function(t){var n=t.field;return r().createElement(m.Checkbox,jn({disabled:e.state.is_checkbox_disabled&&!a[n.name],className:"deactivate-account-reasons__checkbox"},n,{label:(0,d.localize)("I prefer another trading website."),onChange:function(){e.handleChangeCheckbox(a,n.name,o)}}))})),r().createElement(le.gN,{name:"The platforms aren't user-friendly"},(function(t){var n=t.field;return r().createElement(m.Checkbox,jn({disabled:e.state.is_checkbox_disabled&&!a[n.name],className:"deactivate-account-reasons__checkbox"},n,{label:(0,d.localize)("The platforms arent user-friendly."),onChange:function(){e.handleChangeCheckbox(a,n.name,o)}}))})),r().createElement(le.gN,{name:"Making deposits and withdrawals is difficult"},(function(t){var n=t.field;return r().createElement(m.Checkbox,jn({disabled:e.state.is_checkbox_disabled&&!a[n.name],className:"deactivate-account-reasons__checkbox"},n,{label:(0,d.localize)("Making deposits and withdrawals is difficult."),onChange:function(){e.handleChangeCheckbox(a,n.name,o)}}))})),r().createElement(le.gN,{name:"The platforms lack key features or functionality"},(function(t){var n=t.field;return r().createElement(m.Checkbox,jn({disabled:e.state.is_checkbox_disabled&&!a[n.name],className:"deactivate-account-reasons__checkbox"},n,{label:(0,d.localize)("The platforms lack key features or functionality."),onChange:function(){e.handleChangeCheckbox(a,n.name,o)}}))})),r().createElement(le.gN,{name:"Customer service was unsatisfactory"},(function(t){var n=t.field;return r().createElement(m.Checkbox,jn({disabled:e.state.is_checkbox_disabled&&!a[n.name],className:"deactivate-account-reasons__checkbox"},n,{label:(0,d.localize)("Customer service was unsatisfactory."),onChange:function(){e.handleChangeCheckbox(a,n.name,o)}}))})),r().createElement(le.gN,{name:"I'm deactivating my account for other reasons"},(function(t){var n=t.field;return r().createElement(m.Checkbox,jn({disabled:e.state.is_checkbox_disabled&&!a[n.name],className:"deactivate-account-reasons__checkbox"},n,{label:(0,d.localize)("Im deactivating my account for other reasons."),onChange:function(){e.handleChangeCheckbox(a,n.name,o)}}))})),r().createElement(le.gN,{name:"other_trading_platforms"},(function(t){var n=t.field;return r().createElement(m.Input,jn({},n,{className:"deactivate-account-reasons__input","data-lpignore":"true",autoComplete:"off",type:"textarea",placeholder:(0,d.localize)("If you dont mind sharing, which other trading platforms do you use?"),name:"other_trading_platforms",value:a.other_trading_platforms,max_characters:Vn,onChange:function(t){return e.handleChange(t,a.other_trading_platforms,l)},onKeyDown:e.handleInputKeyDown,onPaste:e.handleInputPaste}))})),r().createElement(le.gN,{name:"do_to_improve"},(function(t){var n=t.field;return r().createElement(m.Input,jn({},n,{className:"deactivate-account-reasons__input","data-lpignore":"true",autoComplete:"off",type:"textarea",placeholder:(0,d.localize)("What could we do to improve?"),name:"do_to_improve",value:a.do_to_improve,max_characters:Vn,onChange:function(t){return e.handleChange(t,a.do_to_improve,l)},onKeyDown:e.handleInputKeyDown,onPaste:e.handleInputPaste}))})),r().createElement("div",{className:"deactivate-account-reasons__footer"},r().createElement("div",{className:"deactivate-account-reasons__hint-wrapper"},r().createElement(m.Text,{size:"xxs",as:"p",color:"less-prominent",className:"deactivate-account-reasons__hint"},(0,d.localize)("Remaining characters: {{remaining_characters}}",{remaining_characters:e.state.remaining_characters})),Object.keys(i).length>0&&Object.entries(i).map((function(e){var n=Rn(e,2),a=n[0],o=n[1];return r().createElement(m.Text,{as:"p",weight:"bold",size:"xs",color:t?"blue":"loss-danger",className:"deactivate-account-reasons__error",key:a},o)}))),r().createElement(m.FormSubmitButton,{is_disabled:Object.keys(i).length>0,label:(0,d.localize)("Continue"),has_cancel:!0,cancel_label:(0,d.localize)("Back"),onCancel:function(){return e.props.onBackClick()}})))})),r().createElement(m.Modal,{className:"deactivate-account-reasons",is_open:this.state.is_modal_open,toggleModal:function(){return e.setState({is_modal_open:!e.state.is_modal_open})},title:"error_modal"===e.state.which_modal_should_render?(0,d.localize)("An error occurred"):"inaccessible_modal"===e.state.which_modal_should_render?(0,d.localize)("Inaccessible MT5 account(s)"):"warning_modal"!==e.state.which_modal_should_render?(0,d.localize)("Action required"):void 0},"warning_modal"===this.state.which_modal_should_render&&r().createElement(Yn,{closeModal:this.closeModal,startDeactivating:this.startDeactivating}),"AccountHasPendingConditions"===this.state.which_modal_should_render&&r().createElement(Tn,{details:this.state.details,mt5_login_list:this.props.mt5_login_list,client_accounts:this.props.client_accounts,dxtrade_accounts_list:this.props.dxtrade_accounts_list,onBackClick:this.props.onBackClick}),"inaccessible_modal"===this.state.which_modal_should_render&&r().createElement($n,{message:this.state.api_error_message,onClick:this.closeModal})))}}])&&An(t.prototype,n),i}(r().Component);Gn.contextType=o.PlatformContext;const Kn=(0,_.$j)((function(e){var t=e.client;return{client_accounts:t.account_list,mt5_login_list:t.mt5_login_list,dxtrade_accounts_list:t.dxtrade_accounts_list}}))(Gn);function Hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const Zn=function(){var e=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Hn(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,a.useState)(!1),2),t=e[0],n=e[1];return r().createElement("div",{className:"deactivate-account"},t?r().createElement(Kn,{onBackClick:function(){n(!1)}}):r().createElement(vn,{redirectToReasons:function(){n(!0)}}))};var Xn=n("./Components/error-component/index.js"),Jn=function(){return{read:(0,d.localize)("Read"),trade:(0,d.localize)("Trade"),trading_information:(0,d.localize)("Trading information"),payments:(0,d.localize)("Payments"),admin:(0,d.localize)("Admin")}};const Qn=function(e){return[{title:(0,d.localize)("Name"),col_index:"name",renderCellContent:function(e){var t=e.cell_value;return r().createElement(m.Text,{size:"xs",className:"name__content"},t)}},{title:(0,d.localize)("Permission"),col_index:"scopes",renderCellContent:function(e){return function(e){var t=[];e.includes("trading_information")?(t=e.filter((function(e){return"trading_information"!==e}))).push("trading_information"):t=e;var n=[];return t.forEach((function(t,a){e.length-1!==a?n.push("".concat(Jn()[t],", ")):n.push(Jn()[t])})),r().createElement("div",null,n)}(e.cell_value)}},{title:(0,d.localize)("Last login"),col_index:"last_used",renderCellContent:function(e){return function(e){return r().createElement(m.Text,{as:"p",size:"xs",className:"last_used_content"},(0,o.toMoment)(e).format("YYYY-MM-DD HH:mm:ss"))}(e.cell_value)}},{title:(0,d.localize)("Action"),col_index:"app_id",renderCellContent:function(t){return function(e,t){return r().createElement(m.Button,{className:"revoke_access",small:!0,secondary:!0,onClick:function(){return t(e)}},(0,d.localize)("Revoke access"))}(t.cell_value,e)}}]};function ea(e){return(ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ta(e,t,n,a,r,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,r)}function na(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){ta(o,a,r,i,l,"next",e)}function l(e){ta(o,a,r,i,l,"throw",e)}i(void 0)}))}}function aa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ra(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function oa(e,t){return(oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ia(e,t){return!t||"object"!==ea(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function la(e){return(la=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var sa=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oa(e,t)}(i,e);var t,n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=la(e);if(t){var r=la(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return ia(this,n)}}(i);function i(){var e;aa(this,i);for(var t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return(e=a.call.apply(a,[this].concat(n))).state={is_loading:!0,is_modal_open:!1,selected_app_id:null,is_error:!1,connected_apps:[]},e.columns_map=Qn((function(t){return e.handleToggleModal(t)})).reduce((function(e,t){return e[t.col_index]=t,e}),{}),e.handleRevokeAccess=function(){e.setState({is_modal_open:!1,is_loading:!0}),e.revokeConnectedApp(e.state.selected_app_id)},e.handleToggleModal=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e.state.is_modal_open?e.setState({is_modal_open:!1,selected_app_id:null}):e.setState({is_modal_open:!0,selected_app_id:t})},e.fetchConnectedApps=na(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.WS.authorized.send({oauth_apps:1});case 2:(n=t.sent).error||e.setState({is_loading:!1,connected_apps:n.oauth_apps});case 4:case"end":return t.stop()}}),t)}))),e.revokeConnectedApp=function(){var t=na(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({is_loading:!0}),t.next=3,o.WS.authorized.send({revoke_oauth_app:n});case 3:t.sent.error?e.setState({is_error:!0}):e.fetchConnectedApps();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.mobileRowRenderer=function(t){var n=t.row,a=e.context.is_dashboard;return r().createElement("div",{className:"data-list__row"},r().createElement("div",{className:"data-list__col"},r().createElement(m.DataList.Cell,{row:n,column:e.columns_map.name}),r().createElement(m.DataList.Cell,{row:n,column:e.columns_map.scopes})),r().createElement("div",{className:a?"data-list__col--dashboard":"data-list__col--small"},r().createElement(m.DataList.Cell,{row:n,column:e.columns_map.last_used}),r().createElement(m.DataList.Cell,{row:n,column:e.columns_map.app_id,is_footer:!a})))},e}return t=i,(n=[{key:"componentDidMount",value:function(){this.fetchConnectedApps()}},{key:"render",value:function(){var e=this.context.is_dashboard;return r().createElement("section",{className:A()("connected-apps__wrapper",{"connected-apps__wrapper--dashboard":e})},r().createElement(m.Text,{color:"prominent",weight:"bold",as:"p",className:"connected-apps__title"},(0,d.localize)("Authorised applications")),this.state.is_error&&r().createElement(Xn.default,null),this.state.is_loading?r().createElement(m.Loading,{is_fullscreen:!1}):r().createElement(r().Fragment,null,r().createElement(m.DesktopWrapper,null,r().createElement(m.DataTable,{className:"connected-apps",data_source:this.state.connected_apps,columns:Qn(this.handleToggleModal),getRowSize:e?38:56})),r().createElement(m.MobileWrapper,null,r().createElement(m.DataList,{className:"connected-apps",data_source:this.state.connected_apps,row_gap:e?16:10,rowRenderer:this.mobileRowRenderer}))),r().createElement(m.Modal,{is_open:this.state.is_modal_open,className:"connected-apps",toggleModal:this.handleToggleModal},r().createElement(m.Modal.Body,null,r().createElement("div",{className:"connected-app-modal"},r().createElement(m.Icon,{icon:e?"IcAccountTrashCanDashboard":"IcAccountTrashCan",size:128,className:"connected-app-modal__icon"}),r().createElement(m.Text,{as:"p",color:"prominent",weight:"bold"},(0,d.localize)("Confirm revoke access?")),r().createElement("div",{className:A()("connected-app-modal__confirmation",{"connected-app-modal__confirmation-dashboard":e})},r().createElement(m.Button,{secondary:!0,onClick:this.handleToggleModal},(0,d.localize)("Back")),r().createElement(m.Button,{primary:!0,onClick:this.handleRevokeAccess},(0,d.localize)("Confirm")))))))}}])&&ra(t.prototype,n),i}(r().Component);sa.contextType=o.PlatformContext;const ca=sa;var ua=n("../../../node_modules/bowser/es5.js"),da=n.n(ua);function ma(e){return(ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _a(e,t,n,a,r,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,r)}function fa(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ha(e,t){ha=function(e,t){return new o(e,void 0,t)};var n=ya(RegExp),a=RegExp.prototype,r=new WeakMap;function o(e,t,a){var o=n.call(this,e,t);return r.set(o,a||r.get(e)),o}function i(e,t){var n=r.get(t);return Object.keys(n).reduce((function(t,a){return t[a]=e[n[a]],t}),Object.create(null))}return ga(o,n),o.prototype.exec=function(e){var t=a.exec.call(this,e);return t&&(t.groups=i(t,this)),t},o.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var n=r.get(this);return a[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,(function(e,t){return"$"+n[t]})))}if("function"==typeof t){var o=this;return a[Symbol.replace].call(this,e,(function(){var e=[];return e.push.apply(e,arguments),"object"!==ma(e[e.length-1])&&e.push(i(e,o)),t.apply(this,e)}))}return a[Symbol.replace].call(this,e,t)},ha.apply(this,arguments)}function ga(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xa(e,t)}function ya(e){var t="function"==typeof Map?new Map:void 0;return(ya=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return ba(e,arguments,Ea(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),xa(a,e)})(e)}function ba(e,t,n){return(ba=va()?Reflect.construct:function(e,t,n){var a=[null];a.push.apply(a,t);var r=new(Function.bind.apply(e,a));return n&&xa(r,n.prototype),r}).apply(null,arguments)}function va(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function xa(e,t){return(xa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ea(e){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wa=function(e){for(var t=[],n=Math.min(50,e.length),a=0;a<n;a++){var r;t[a]={};var i=e[a].environment,l=i.split(" "),s=i.match(ha(/([\x2D0-9A-Za-z]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF][0-:]+GMT)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF](IP=)([\.0-:A-Z_a-z]+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]IP_COUNTRY=(([A-Za-z]{2}))[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF](User_AGENT=)([0-9A-Z_a-z].*)(iPhone|Android)([\0-\uFFFF]+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF](DP2P)([\0-\uFFFF]+)[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF](LANG=)([0-9A-Z_a-z]{2})/,{date:1,ip:3,country:4,name:8,app:10,version:11})),c=l[0],u=l[1].replace("GMT",""),m=(0,o.convertDateFormat)("".concat(c," ").concat(u),"D-MMMM-YY hh:mm:ss","YYYY-MM-DD hh:mm:ss");t[a].date="".concat(m," GMT"),t[a].action="login"===e[a].action?(0,d.localize)("Login"):(0,d.localize)("Logout");var _=i.substring(i.indexOf("User_AGENT"),i.indexOf("LANG")),f=s?s.groups:null===(r=da().getParser(_))||void 0===r?void 0:r.getBrowser();t[a].browser=f?"".concat(f.name," ").concat(f.app||""," v").concat(f.version):(0,d.localize)("Unknown"),t[a].ip=l[2].split("=")[1],t[a].status=1===e[a].status?(0,d.localize)("Successful"):(0,d.localize)("Failed"),t[a].id=a}return t},za=function(){return{date:(0,d.localize)("Date and time"),action:(0,d.localize)("Action"),browser:(0,d.localize)("Browser"),ip:(0,d.localize)("IP address"),status:(0,d.localize)("Status")}},ka=function(e){var t=e.data,n=r().useContext(o.PlatformContext).is_dashboard;return(0,o.isMobile)()?Sa(za(),t,n):Ca(za(),t)},Ca=function(e,t){return r().createElement(m.Table,{fixed:!0,className:"login-history__table"},r().createElement(m.Table.Header,null,r().createElement(m.Table.Row,{className:"login-history__table__header"},r().createElement(m.Table.Head,null,e.date),r().createElement(m.Table.Head,null,e.action),r().createElement(m.Table.Head,null,e.browser),r().createElement(m.Table.Head,null,e.ip),r().createElement(m.Table.Head,null,e.status))),r().createElement(m.Table.Body,null,t.map((function(e){return r().createElement(m.Table.Row,{className:"login-history__table__row",key:e.id},r().createElement(m.Table.Cell,null,r().createElement(m.Text,{line_height:"xs",size:"xs"},e.date)),r().createElement(m.Table.Cell,{className:"login-history__table__row__cell login-history__table__row__cell--action"},e.action),r().createElement(m.Table.Cell,null,e.browser),r().createElement(m.Table.Cell,null,e.ip),r().createElement(m.Table.Cell,null,e.status))}))))},Sa=function(e,t,n){return r().createElement(m.Table,{className:"login-history__list"},r().createElement(m.Table.Body,null,t.map((function(t){return r().createElement("div",{className:A()("login-history__list__wrapper",{"login-history__list__wrapper--dashboard":n}),key:t.id},r().createElement(m.Table.Row,{className:"login-history__list__row login-history__list__row--with-margin"},r().createElement(m.Table.Cell,{className:"login-history__list__row__cell"},r().createElement(Na,{title:e.date,text:t.date})),n&&(0,o.isMobile)()&&r().createElement(m.Table.Cell,{className:"login-history__list__row__cell"},r().createElement(Na,{className:"login-history__list__row__cell--action",title:e.action,text:t.action,right:!0}))),r().createElement(m.Table.Row,{className:"login-history__list__row login-history__list__row--with-margin"},r().createElement(m.Table.Cell,{className:"login-history__list__row__cell"},r().createElement(Na,{className:"login-history__list__row__cell--browser",title:e.browser,text:t.browser})),n&&(0,o.isMobile)()?r().createElement(m.Table.Cell,{className:"login-history__list__row__cell"},r().createElement(Na,{title:e.status,text:t.status,right:!0})):r().createElement(m.Table.Cell,{className:"login-history__list__row__cell"},r().createElement(Na,{className:"login-history__list__row__cell--action",title:e.action,text:t.action}))),r().createElement(m.Table.Row,{className:"login-history__list__row"},r().createElement(m.Table.Cell,{className:"login-history__list__row__cell"},r().createElement(Na,{className:"login-history__list__row__cell--ip-value",title:e.ip,text:t.ip})),!n||(0,o.isDesktop)()&&r().createElement(m.Table.Cell,{className:"login-history__list__row__cell"},r().createElement(Na,{title:e.status,text:t.status}))))}))))},Na=function(e){var t=e.title,n=e.text,a=e.className,o=e.right;return r().createElement(r().Fragment,null,r().createElement(m.Text,{as:"h3",align:o?"right":"left",weight:"bold",className:"login-history__list__row__cell--title"},t),r().createElement(m.Text,{className:A()(a,{"login-history__list__row__cell--right":o}),line_height:"xs",size:"xs",align:o?"right":"left"},n))},Ta=function(e){var t=e.is_switching,n=fa(r().useState(!0),2),a=n[0],i=n[1],l=fa(r().useState(""),2),s=l[0],c=l[1],u=fa(r().useState([]),2),d=u[0],_=u[1];return r().useEffect((function(){!function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.WS.authorized.fetchLoginHistory(50);case 2:t=e.sent,i(!1),t.error?c(t.error.message):(n=wa(t.login_history),_(n));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){_a(o,a,r,i,l,"next",e)}function l(e){_a(o,a,r,i,l,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}()()}),[]),t?r().createElement(m.Loading,null):a?r().createElement(m.Loading,{is_fullscreen:!1,className:"account__initial-loader"}):s?r().createElement(M.default,{error_message:s}):r().createElement(m.ThemedScrollbars,{is_bypassed:(0,o.isMobile)(),className:"login-history"},d.length?r().createElement(ka,{data:d}):null)};Ta.propTypes={is_switching:s().bool};const Oa=(0,_.$j)((function(e){return{is_switching:e.client.is_switching}}))(Ta);function ja(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Pa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pa(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}const La=(0,_.$j)((function(e){return{logout:e.client.logout}}))((function(e){var t=e.logout,n=ja(r().useState(!0),2),a=n[0],i=n[1],l=ja(r().useState(10),2),s=l[0],c=l[1],u=r().useContext(o.PlatformContext).is_dashboard;r().useEffect((function(){window.history.pushState(null,null,"/"),t();var e=setInterval((function(){return _()}),1e3);return function(){e&&clearInterval(e)}}),[s,a]);var _=function(){s>0?c(s-1):window.location.href=(0,o.getStaticUrl)("/",{is_dashboard:u})};return r().createElement(m.Modal,{is_open:a,toggleModal:function(){i(!a)}},r().createElement(m.Text,{as:"p",className:"account-deactivated"},r().createElement(d.Localize,{i18n_default_text:"Were sorry to see you leave. Your account is now deactivated."})," ",s))}));function Ia(e){return function(e){if(Array.isArray(e))return Aa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return Aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aa(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ma,Da={component:r().lazy((function(){return n.e("404").then(n.bind(n,"./Modules/Page404/index.js"))})),getTitle:function(){return(0,d.localize)("Error 404")}};const Fa=function(e){var t=e.is_dashboard;return Ma||(Ma=function(e){var t=e.is_dashboard;return[{path:o.routes.account_deactivated,component:La,is_authenticated:!1,getTitle:function(){return(0,d.localize)("Account deactivated")}},{path:o.routes.account,component:bn,is_authenticated:!0,getTitle:function(){return(0,d.localize)("Account Settings")},icon_component:"IcUserOutline",routes:[{getTitle:function(){return(0,d.localize)("Profile")},icon:"IcUserOutline",subroutes:[{path:o.routes.personal_details,component:Oe,getTitle:function(){return(0,d.localize)("Personal details")},default:!0},{path:o.routes.financial_assessment,component:je.default,getTitle:function(){return(0,d.localize)("Financial assessment")}}]},{getTitle:function(){return(0,d.localize)("Verification")},icon:"IcVerification",subroutes:[{path:o.routes.proof_of_identity,component:qe,getTitle:function(){return(0,d.localize)("Proof of identity")}},{path:o.routes.proof_of_address,component:Ye,getTitle:function(){return(0,d.localize)("Proof of address")}}]},{getTitle:function(){return(0,d.localize)("Security and safety")},icon:"IcSecurity",subroutes:[{path:o.routes.passwords,component:L,getTitle:function(){return(0,d.localize)("Passwords")}},{path:o.routes.self_exclusion,component:un,getTitle:function(){return t?(0,d.localize)("Self-exclusion"):(0,d.localize)("Self exclusion")}},{path:o.routes.account_limits,component:ie,getTitle:function(){return t?(0,d.localize)("Withdrawal limits"):(0,d.localize)("Account limits")}},{path:o.routes.login_history,component:Oa,getTitle:function(){return(0,d.localize)("Login history")}}].concat(Ia(t?[]:[{path:o.routes.api_token,component:Ot,getTitle:function(){return(0,d.localize)("API token")}}]),[{path:o.routes.connected_apps,component:ca,getTitle:function(){return(0,d.localize)("Connected apps")}},{path:o.routes.two_factor_authentication,component:at,getTitle:function(){return(0,d.localize)("Two-factor authentication")}},{path:o.routes.deactivate_account,component:Zn,getTitle:function(){return(0,d.localize)("Deactivate account")}}])}]}]}({is_dashboard:t})).push(Da),Ma};var Ra=function e(t,n){var a;return n.some((function(n){var r;try{r=(0,c.matchPath)(t,n)}catch(e){if(/undefined/.test(e.message))return}return r?(a=n,!0):!!n.routes&&(a=e(t,n.routes))})),a};function Ba(){return(Ba=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function qa(){return(qa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}(function(e){var t=e.active_class,n=e.to,a=e.children,i=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["active_class","to","children"]),l=r().useContext(o.PlatformContext).is_dashboard,s=function(e){return/^\//.test(e)?e:"/".concat(e||"")}(n),c=Ra(s,Fa({is_dashboard:l}));if(!c)throw new Error("Route not found: ".concat(n));return n?r().createElement(u.NavLink,Ba({to:s,activeClassName:t||"active",exact:c.exact},i),a):r().createElement("a",i,a)}).propTypes={active_class:s().string,children:s().oneOfType([s().object,s().array,s().string]),to:s().string};const Wa=function(e){return r().createElement(u.Route,{exact:e.exact,path:e.path,render:function(t){var n,a=null;if(e.component===u.Redirect){var i=e.to;e.path===o.routes.index&&(i=t.location.pathname.toLowerCase().replace(e.path,"")),a=r().createElement(u.Redirect,{to:i})}else if(!e.is_authenticated||e.is_logged_in||e.is_logging_in){var l=e.routes?e.routes.find((function(e){return e.default})):{},s=!(0,o.isEmptyObject)(l),c=(0,o.removeBranchName)(location.pathname);a=r().createElement(r().Fragment,null,s&&c===e.path&&r().createElement(u.Redirect,{to:l.path}),r().createElement(e.component,qa({},t,{routes:e.routes})))}else(0,o.redirectToLogin)(e.is_logged_in,(0,d.getLanguage)());var m=(null===(n=e.getTitle)||void 0===n?void 0:n.call(e))||"";return document.title="".concat(m," | ").concat(o.default_title),a}})};function Ua(){return(Ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}const Ya=function(e){var t=r().useContext(o.PlatformContext).is_dashboard;return r().createElement(r().Suspense,{fallback:function(){return r().createElement("div",null,r().createElement(o.Localize,{i18n_default_text:"Loading..."}))}},r().createElement(u.Switch,null,Fa({is_dashboard:t}).map((function(t,n){return r().createElement(Wa,Ua({key:n},t,e))}))))};var $a=function(e){return e.has_error?r().createElement(Xn.default,e.error):r().createElement(Ya,{is_logged_in:e.is_logged_in,is_logging_in:e.is_logging_in,passthrough:e.passthrough})};$a.propTypes={error:i.PropTypes.objectOrObservableObject,has_error:s().bool,is_logged_in:s().bool,is_virtual:s().bool};const Va=(0,c.withRouter)((0,_.$j)((function(e){var t=e.client,n=e.common;return{is_logged_in:t.is_logged_in,is_logging_in:t.is_logging_in,error:n.error,has_error:n.has_error}}))($a));var Ga=n("./Components/reset-trading-password-modal/index.js");function Ka(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Ha=function(e){var t,n=e.enableApp,a=e.disableApp,i=e.toggleResetTradingPasswordModal,l=e.mt5_verification_code,s=e.dxtrade_verification_code,c=e.is_visible,d=e.is_loading,m=(0,u.useLocation)(),_=new URLSearchParams(m.search),f=null===(t=/^trading_platform_(.*)_password_reset$/.exec(_.get("action")||""))||void 0===t?void 0:t[1],p=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ka(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ka(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r().useState(f),1)[0],h=p===o.CFD_PLATFORMS.MT5?l:s;return r().createElement(Ga.default,{platform:p,enableApp:n,disableApp:a,toggleResetTradingPasswordModal:i,is_visible:c,is_loading:d,verification_code:h})};Ha.propTypes={disableApp:s().func,enableApp:s().func,is_loading:s().bool,is_visible:s().bool,toggleResetTradingPasswordModal:s().func,mt5_verification_code:s().string,dxtrade_verification_code:s().string};const Za=(0,_.$j)((function(e){var t=e.ui,n=e.client;return{disableApp:t.disableApp,enableApp:t.enableApp,is_loading:t.is_loading,is_visible:t.is_reset_trading_password_modal_visible,toggleResetTradingPasswordModal:t.setResetTradingPasswordModalOpen,mt5_verification_code:n.verification_code.trading_platform_mt5_password_reset,dxtrade_verification_code:n.verification_code.trading_platform_dxtrade_password_reset}}))(Ha);var Xa=n("mobx"),Ja=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.client=t.client,this.common=t.common,this.ui=t.ui,this.gtm=t.gtm,this.rudderstack=t.rudderstack,this.pushwoosh=t.pushwoosh};(0,Xa.configure)({enforceActions:"observed"});function Qa(e){return(Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function er(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function tr(e,t){return(tr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nr(e,t){return!t||"object"!==Qa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ar(e){return(ar=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tr(e,t)}(i,e);var t,n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=ar(e);if(t){var r=ar(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return nr(this,n)}}(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=a.call(this,e);var n=e.passthrough,r=n.WS,l=n.root_store;return t.root_store=function(e,t){return(0,o.setWebsocket)(t),new Ja(e)}(l,r),(0,o.setWebsocket)(r),t}return t=i,(n=[{key:"render",value:function(){return r().createElement(_.z1,{store:this.props.passthrough.root_store},r().createElement(Va,null),r().createElement(Za,null))}}])&&er(t.prototype,n),i}(r().Component)},"./Components/demo-message/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var a=n("react"),r=n.n(a),o=n("../../../node_modules/prop-types/index.js"),i=n.n(o),l=n("@deriv/translations"),s=n("../../../node_modules/classnames/index.js"),c=n.n(s),u=n("@deriv/components"),d=n("@deriv/shared"),m=n("./Stores/connect.js"),_=function(e){var t=e.icon,n=e.message,r=e.has_button,o=e.toggleAccountsDialog,i=a.useContext(d.PlatformContext).is_dashboard;return a.createElement("div",{className:c()("da-icon-with-message",{"da-icon-with-message-full-width":i})},a.createElement(u.Icon,{icon:t,size:128}),a.createElement(u.Text,{className:"da-icon-with-message__text",as:"p",color:"general",size:d.isMobile?"xs":"s",line_height:"m",weight:"bold"},n),r&&a.createElement(u.Button,{primary:!0,onClick:o,className:"account__demo-message-button"},(0,l.localize)("Add a real account")))};_.propTypes={icon:i().string.isRequired,has_button:i().bool,message:i().string.isRequired,toggleAccountsDialog:i().func};const f=(0,m.$j)((function(e){return{toggleAccountsDialog:e.ui.toggleAccountsDialog}}))(_);var p=function(e){var t=e.has_demo_icon,n=e.has_button;return r().createElement(f,{icon:t?"IcPoaLockDemo":"IcPoaLock",message:(0,l.localize)("This feature is not available for demo accounts."),has_button:n})};p.propTypes={has_demo_icon:i().bool,full_width:i().bool};const h=p},"./Components/error-component/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>d});var a=n("../../../node_modules/prop-types/index.js"),r=n.n(a),o=n("react"),i=n.n(o),l=n("@deriv/components"),s=n("@deriv/translations"),c=n("@deriv/shared"),u=function(e){var t=e.header,n=e.message,a=e.redirect_label,r=e.redirectOnClick,o=e.should_show_refresh,u=void 0===o||o?(0,s.localize)("Please refresh this page to continue."):"";return i().createElement(l.PageError,{header:t||(0,s.localize)("Oops, something went wrong."),messages:n?[n,u]:[(0,s.localize)("Sorry, an error occured while processing your request."),u],redirect_urls:[c.routes.trade],redirect_labels:[a||(0,s.localize)("Refresh")],buttonOnClick:r||function(){return location.reload()}})};u.propTypes={message:r().oneOfType([r().node,r().string,r().object]),type:r().string};const d=u},"./Components/file-uploader-container/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>x});var a=n("react"),r=n.n(a),o=n("../../../node_modules/prop-types/index.js"),i=n.n(o),l=n("../../../node_modules/classnames/index.js"),s=n.n(l),c=n("@deriv/components"),u=n("@deriv/shared"),d=n("@deriv/translations"),m=n("../../../node_modules/@binary-com/binary-document-uploader/DocumentUploader.js"),_=n.n(m);function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var p=function(){var e=r().useContext(u.PlatformContext).is_dashboard;return r().createElement(r().Fragment,null,r().createElement(c.Icon,{icon:"IcCloudUpload",className:"dc-file-dropzone__message-icon",size:50}),r().createElement("div",{className:"dc-file-dropzone__message-subtitle"},e&&(0,u.isMobile)()?(0,d.localize)("Tap here to upload (JPEG  JPG  PNG  PDF  GIF)"):(0,d.localize)("Drop file (JPEG  JPG  PNG  PDF  GIF) or click here to upload")))},h=function(e){return(0,d.localize)("Unable to read file {{name}}",{name:e})},g=r().forwardRef((function(e,t){var n=e.onFileDrop,a=e.getSocket,o=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}((0,c.useStateCallback)({files:[],error_message:null}),2),i=o[0],l=o[1],m=function(){if(i.error_message||i.files.length<1)return 0;var e=new(_())({connection:a()}),t=!1;return new Promise((function(a,r){(0,u.compressImageFiles)(i.files).then((function(o){(0,u.readFiles)(o,h).then((function(o){o.forEach((function(e){e.message&&(t=!0,r(e))}));var i=o.length;if(!t&&i){var l=e.upload(o[0]).then((function(e){return e}));a(l)}else n(void 0)}))}))}))};return r().useImperativeHandle(t,(function(){return{upload:m}})),r().createElement(r().Fragment,null,r().createElement(c.FileDropzone,{accept:u.supported_filetypes,error_message:(0,d.localize)("Please upload supported file type."),filename_limit:26,hover_message:(0,d.localize)("Drop files here.."),max_size:u.max_document_size,message:r().createElement(p,null),multiple:!1,onDropAccepted:function(e){e.length>0&&l({files:e,error_message:null},(function(e){n(e)}))},onDropRejected:function(e){var t=e.length>0&&e[0].file.size>u.max_document_size,a=e.filter((function(e){return(0,u.getSupportedFiles)(e.file.name)})),r=t&&a.length>0?(0,d.localize)("File size should be 8MB or less"):(0,d.localize)("File uploaded is not supported");l({files:e,error_message:r},(function(e){return n(e)}))},validation_error_message:i.error_message,value:i.files}),(i.files.length>0||!!i.error_message)&&r().createElement("div",{className:"account-poa__upload-remove-btn-container"},r().createElement(c.Icon,{icon:"IcCloseCircle",className:s()("account-poa__upload-remove-btn",{"account-poa__upload-remove-btn--error":!!i.error_message}),onClick:function(){l({files:[],error_message:null},(function(e){return n(e)}))},color:"secondary"})))}));g.propTypes={onFileDrop:i().func,getSocket:i().func};const y=g;var b=function(){var e=[{name:"size",icon:"IcPoaFileEightMb",text:(0,d.localize)("Less than 8MB")},{name:"format",icon:"IcPoaFileFormat",text:(0,d.localize)("JPEG  JPG  PNG  PDF  GIF")},{name:"time",icon:"IcPoaFileTime",text:(0,d.localize)("1 - 6 months old")},{name:"clear",icon:"IcPoaFileClear",text:(0,d.localize)("A clear colour photo or scanned image")},{name:"with-address",icon:"IcPoaFileWithAddress",text:(0,d.localize)("Issued under your name with your current address")}];return r().createElement("div",{className:"account-poa__upload-property"},e.map((function(e){return r().createElement("div",{className:"account-poa__upload-property-item account-poa__upload-property-".concat(e.name),key:e.name},r().createElement("div",{className:"account-poa__upload-property-wrapper"},r().createElement(c.Icon,{icon:e.icon,className:"account-poa__upload-icon-dashboard",size:40}),r().createElement(c.Text,{size:"xxxs",weight:"bold",align:"center"},e.text)))})))},v=function(e){var t=e.is_description_enabled,n=void 0===t||t,a=e.getSocket,o=e.onFileDrop,i=e.onRef,l=r().useContext(u.PlatformContext).is_dashboard,m=r().useRef(),_=null!=a?a:u.WS.getSocket;return r().useEffect((function(){return m&&"function"==typeof i&&i(m),function(){return i(void 0)}}),[i,m]),l&&(0,u.isDesktop)()?r().createElement("div",{className:"account-poa__upload-section account-poa__upload-section-dashboard"},r().createElement("div",{className:"account-poa__upload-file account-poa__upload-file-dashboard"},r().createElement(b,null),r().createElement("div",{className:"account-poa__upload-file-zone"},r().createElement(y,{getSocket:_,ref:m,onFileDrop:o})))):r().createElement("div",{className:"account-poa__upload-section"},n&&r().createElement("ul",{className:"account-poa__upload-list"},!l&&r().createElement("li",{className:"account-poa__upload-box"},r().createElement(c.Icon,{icon:"IcUtility",className:"account-poa__upload-icon",size:20}),r().createElement("div",{className:"account-poa__upload-item"},r().createElement(d.Localize,{i18n_default_text:"A recent utility bill (e.g. electricity, water, gas, phone or internet)"}))),r().createElement("li",{className:"account-poa__upload-box"},l?r().createElement(c.Icon,{icon:"IcBankDashboard",className:"account-poa__upload-icon",size:24}):r().createElement(c.Icon,{icon:"IcBank",className:"account-poa__upload-icon",size:20}),r().createElement("div",{className:"account-poa__upload-item"},r().createElement(d.Localize,{i18n_default_text:"A recent bank statement or government-issued letter with your name and address"}))),r().createElement("li",{className:"account-poa__upload-box"},l?r().createElement(c.Icon,{icon:"IcPoaFileWithAddress",className:"account-poa__upload-icon",size:24}):r().createElement(c.Icon,{icon:"IcUser",className:"account-poa__upload-icon",size:20}),r().createElement("div",{className:"account-poa__upload-item"},r().createElement(d.Localize,{i18n_default_text:"Issued under your name with your current address"}))),r().createElement("li",{className:"account-poa__upload-box"},l?r().createElement(c.Icon,{icon:"IcPoaFileEightMb",className:"account-poa__upload-icon",size:24}):r().createElement(c.Icon,{icon:"IcLessThanEight",className:"account-poa__upload-icon",size:20}),r().createElement("div",{className:"account-poa__upload-item"},r().createElement(d.Localize,{i18n_default_text:"Less than 8MB"}))),r().createElement("li",{className:"account-poa__upload-box"},l?r().createElement(c.Icon,{icon:"IcPoaFileTime",className:"account-poa__upload-icon",size:24}):r().createElement(c.Icon,{icon:"IcClock",className:"account-poa__upload-icon",size:20}),r().createElement("div",{className:"account-poa__upload-item"},r().createElement(d.Localize,{i18n_default_text:"1 - 6 months old"}))),r().createElement("li",{className:"account-poa__upload-box"},l?r().createElement(c.Icon,{icon:"IcPoaFileClear",className:"account-poa__upload-icon",size:24}):r().createElement(c.Icon,{icon:"IcEye",className:"account-poa__upload-icon",size:20}),r().createElement("div",{className:"account-poa__upload-item"},r().createElement(d.Localize,{i18n_default_text:"A clear colour photo or scanned image"})))),r().createElement("div",{className:s()("account-poa__upload-file",{"account-poa__upload-file--dashboard":(0,u.isDesktop)()&&l})},r().createElement(y,{getSocket:_,ref:m,onFileDrop:o})))};v.propTypes={is_description_enabled:i().bool,getSocket:i().func,onFileDrop:i().func,onRef:i().func};const x=v},"./Components/form-body-section/index.js":(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var a=n("react"),r=n.n(a),o=n("../../../node_modules/classnames/index.js"),i=n.n(o),l=n("../../../node_modules/prop-types/index.js"),s=n("@deriv/components"),c=n("@deriv/shared"),u=function(e){var t=e.children,n=e.has_side_note,a=e.side_note,o=r().useContext(c.PlatformContext).is_dashboard;return n?r().createElement("div",{className:i()("account-form__section",{"account-form__section--dashboard":o})},r().createElement("div",{className:"account-form__section-side-note"},"string"==typeof a?r().createElement(s.Text,{size:"xxs"},a):a),r().createElement("div",{className:"account-form__section-content"},t)):t};u.prototype={children:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.object]),has_side_note:l.PropTypes.bool,side_note:l.PropTypes.oneOfType([l.PropTypes.string,l.PropTypes.object])};const d=u},"./Components/form-body/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var a=n("@deriv/components"),r=n("react"),o=n.n(r),i=n("../../../node_modules/classnames/index.js"),l=n.n(i),s=n("@deriv/shared"),c=function(e){var t=e.children,n=e.className,r=e.scroll_offset;return o().createElement(a.ThemedScrollbars,{is_bypassed:(0,s.isMobile)(),height:r?"calc(100% - ".concat(r,")"):"100%"},o().createElement("div",{className:l()("account__scrollbars_container",n)},t))};const u=function(e){var t=e.children,n=e.scroll_offset;return o().createElement(o().Fragment,null,o().createElement(a.DesktopWrapper,null,o().createElement(c,{className:"account__scrollbars_container--grid-layout",scroll_offset:n},t)),o().createElement(a.MobileWrapper,null,o().createElement(a.Div100vhContainer,{className:"account__scrollbars_container--grid-layout",height_offset:n||"200px"},t)))}},"./Components/form-footer/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var a=n("react"),r=n.n(a),o=n("../../../node_modules/prop-types/index.js"),i=n("@deriv/shared"),l=n("../../../node_modules/classnames/index.js"),s=n.n(l),c=function(e){var t=e.children,n=e.className,a=r().useContext(i.PlatformContext).is_dashboard;return r().createElement("div",{className:s()("account-form__footer",n,{"account-form__footer--dashboard":a})},t)};c.prototype={children:o.PropTypes.object};const u=c},"./Components/form-sub-header/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var a=n("../../../node_modules/classnames/index.js"),r=n.n(a),o=n("react"),i=n.n(o),l=n("@deriv/components");const s=function(e){var t=e.title,n=e.subtitle,a=e.description;return i().createElement(i().Fragment,null,i().createElement("div",{className:r()("account-form__header",{"account-form__header--has-description":!!a})},i().createElement("div",{className:"account-form__header-section"},i().createElement(l.Text,{as:"h1",color:"prominent",weight:"bold",size:"xs",className:"account-form__title"},t),n&&i().createElement(l.Text,{as:"h2",size:"xxxs",color:"prominent",className:"account-form__subtitle"},n))),a&&i().createElement(l.Text,{as:"p",className:"account-form__description"},a))}},"./Components/icon-message-content/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var a=n("react"),r=n.n(a),o=n("../../../node_modules/prop-types/index.js"),i=n("../../../node_modules/classnames/index.js"),l=n.n(i),s=n("@deriv/components"),c=n("@deriv/shared");function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(e){var t=e.children,n=e.className,a=e.full_width,o=e.icon,i=e.icon_row,d=e.message,m=e.text;return r().createElement(s.Div100vhContainer,{className:l()("account-management__message-wrapper",{"account-management__message-wrapper-full-width":a}),is_disabled:(0,c.isDesktop)(),height_offset:"110px"},r().createElement("div",{className:l()("account-management__message-content",u({},"".concat(n,"__message-content"),n))},o&&r().createElement("div",{className:l()("account-management__message-icon",u({},"".concat(n,"__message-icon"),n))},o),i&&r().createElement("div",null,i),r().createElement(s.Text,{as:"div",color:"general",weight:"bold",size:"s",align:"center",className:l()("account-management__message",u({},"".concat(n,"__message"),n))},d),m&&r().createElement("div",{className:"account-management__text-container"},r().createElement(s.Text,{className:l()(u({},"".concat(n,"__text"),n)),as:"p",size:"xs",align:"center"},m)),t))};d.propTypes={children:o.PropTypes.oneOfType([o.PropTypes.object,o.PropTypes.array]),className:o.PropTypes.string,full_width:o.PropTypes.bool,icon:o.PropTypes.object,message:o.PropTypes.oneOfType([o.PropTypes.node,o.PropTypes.string,o.PropTypes.object]),text:o.PropTypes.string};const m=d},"./Components/leave-confirm/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>w});var a=n("react"),r=n.n(a),o=n("../../../node_modules/prop-types/index.js"),i=n("react-router-dom"),l=n("../../../node_modules/formik/dist/formik.esm.js"),s=n("@deriv/components"),c=n("@deriv/shared"),u=n("@deriv/translations"),d=n("./Components/icon-message-content/index.js");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var b=function(e){var t=e.back,n=e.leave,a=r().useContext(c.PlatformContext).is_dashboard;return r().createElement(d.default,{className:"leave-confirm",message:(0,u.localize)("Unsaved changes"),text:(0,u.localize)("You have unsaved changes. Are you sure you want to discard changes and leave this page?"),icon:r().createElement(s.Icon,{icon:a?"IcUnsavedChangesDashboard":"IcUnsavedChanges",size:(0,c.isMobile)()?93:128})},r().createElement("div",{className:"account-management-flex-wrapper account-management-leave-confirm"},r().createElement(s.Button,y({type:"button",has_effect:!0,onClick:t,text:(0,u.localize)("Cancel"),secondary:!0},(0,c.isMobile)()?{large:!0}:{})),r().createElement(s.Button,y({type:"button",has_effect:!0,onClick:n,text:(0,u.localize)("Leave Settings"),primary:!0},(0,c.isMobile)()?{large:!0}:{}))))},v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,e);var t,n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=g(e);if(t){var r=g(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return h(this,n)}}(o);function o(){var e;_(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={show:!1},e.leave=function(){var t=e.state.next_location.pathname;e.unblock(),e.props.history.push(t)},e.back=function(){e.setState({nextLocation:null,show:!1}),e.props.onDirty&&e.props.onDirty(!0)},e}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.unblock=this.props.history.block((function(t){return e.props.dirty&&(e.props.onDirty&&e.props.onDirty(!1),e.state.show&&e.leave(),e.setState({show:!0,next_location:t})),!e.props.dirty}))}},{key:"componentWillUnmount",value:function(){this.unblock()}},{key:"render",value:function(){var e=this.state.show;return r().createElement(r().Fragment,null,e&&(0,c.isMobile)()?r().createElement(b,{back:this.back,leave:this.leave}):r().createElement(s.Modal,{is_open:e,small:!0,toggleModal:this.back},r().createElement(s.Modal.Body,null,r().createElement(b,{back:this.back,leave:this.leave}))))}}])&&f(t.prototype,n),o}(r().Component),x=(0,i.withRouter)(v),E=function(e){var t=e.onDirty;return r().createElement(l.IG,null,(function(e){return r().createElement(x,{onDirty:t,dirty:e.dirty&&0===e.submitCount})}))};E.propTypes={onDirty:o.PropTypes.func};const w=E},"./Components/load-error-message/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>l});var a=n("react"),r=n.n(a),o=n("@deriv/components"),i=n("./Components/icon-message-content/index.js");const l=function(e){var t=e.error_message;return r().createElement(i.default,{message:t,icon:r().createElement(o.Icon,{icon:"IcPoaLock",size:128})})}},"./Components/poa-button/index.js":(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});var a=n("@deriv/components"),r=n("@deriv/shared"),o=n("@deriv/translations"),i=n("react"),l=n.n(i);const s=function(){return l().createElement(a.ButtonLink,{className:"account-management__button",to:r.routes.proof_of_address},l().createElement(a.Text,{className:"dc-btn__text",as:"p",weight:"bold"},(0,o.localize)("Proof of address")))}},"./Components/poa-continue-trading-button/continue-trading-button.jsx":(e,t,n)=>{"use strict";n.d(t,{M:()=>l});var a=n("@deriv/components"),r=n("@deriv/translations"),o=n("react"),i=n.n(o),l=function(){return i().createElement(a.ButtonLink,{className:"account-management__button",to:"/"},i().createElement(a.Text,{className:"dc-btn__text",as:"p",weight:"bold"},(0,r.localize)("Continue trading")))}},"./Components/poa-continue-trading-button/index.js":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n("./Components/poa-continue-trading-button/continue-trading-button.jsx").M},"./Components/poa-expired/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var a=n("@deriv/components"),r=n("@deriv/translations"),o=n("react"),i=n.n(o),l=n("./Components/icon-message-content/index.js");const s=function(e){var t=e.onClick;return i().createElement(l.default,{message:(0,r.localize)("New proof of address is needed"),text:(0,r.localize)("Your documents for proof of address is expired. Please submit again."),icon:i().createElement(a.Icon,{icon:"IcPoaUpload",size:128})},i().createElement(a.Button,{onClick:t,has_effect:!0,primary:!0},i().createElement(a.Text,{className:"dc-btn__text",size:"xs",weight:"bold",as:"p"},(0,r.localize)("Resubmit"))))}},"./Components/poa-needs-review/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var a=n("@deriv/components"),r=n("@deriv/translations"),o=n("react"),i=n.n(o),l=n("./Components/icon-message-content/index.js"),s=n("./Components/poi-button/index.js"),c=n("./Components/poa-continue-trading-button/continue-trading-button.jsx");const u=function(e){var t=e.needs_poi,n=e.is_description_enabled,o=void 0===n||n,u=(0,r.localize)("Your proof of address was submitted successfully");return t?i().createElement(l.default,{message:u,icon:i().createElement(a.Icon,{icon:"IcPoaVerified",size:128})},o&&i().createElement(i().Fragment,null,i().createElement("div",{className:"account-management__text-container"},i().createElement(a.Text,{align:"center",size:"xs",as:"p"},(0,r.localize)("Your document is being reviewed, please check back in 1-3 days.")),i().createElement(a.Text,{align:"center",size:"xs",as:"p"},(0,r.localize)("You must also submit a proof of identity."))),i().createElement(s.Z,null))):i().createElement(l.default,{message:u,text:(0,r.localize)("Your document is being reviewed, please check back in 1-3 days."),icon:i().createElement(a.Icon,{icon:"IcPoaVerified",size:128})},o&&i().createElement(c.M,null))}},"./Components/poa-status-codes/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>a});const a={none:"none",pending:"pending",rejected:"rejected",verified:"verified",expired:"expired",suspected:"suspected"}},"./Components/poa-submitted/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>_});var a=n("@deriv/components"),r=n("@deriv/translations"),o=n("react"),i=n.n(o),l=n("../../../node_modules/classnames/index.js"),s=n.n(l),c=n("@deriv/shared"),u=n("./Components/poa-continue-trading-button/continue-trading-button.jsx"),d=n("./Components/poi-button/index.js"),m=n("./Components/icon-message-content/index.js");const _=function(e){var t=e.needs_poi,n=e.is_description_enabled,o=void 0===n||n,l=i().useContext(c.PlatformContext).is_dashboard,_=(0,r.localize)("Your proof of address was submitted successfully");return t?i().createElement("div",{className:s()("account-management__container",{"account-management__container-dashboard":l})},i().createElement(m.default,{message:_,icon:i().createElement(a.Icon,{icon:"IcPoaVerified",size:128,full_width:l})},i().createElement("div",{className:"account-management__text-container"},i().createElement(a.Text,{align:"center",size:"xs",as:"p"},(0,r.localize)("Your document is being reviewed, please check back in 1-3 days.")),i().createElement(a.Text,{align:"center",size:"xs",as:"p"},(0,r.localize)("You must also submit a proof of identity."))),i().createElement(d.Z,null))):i().createElement("div",{className:s()("account-management__container",{"account-management__container-dashboard":l})},i().createElement(m.default,{message:_,text:(0,r.localize)("Your document is being reviewed, please check back in 1-3 days."),icon:i().createElement(a.Icon,{icon:"IcPoaVerified",size:128}),full_width:l},!o&&i().createElement(u.M,null)))}},"./Components/poa-unverified/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>c});var a=n("react"),r=n.n(a),o=n("@deriv/shared"),i=n("@deriv/components"),l=n("@deriv/translations"),s=n("./Components/icon-message-content/index.js");const c=function(){var e=r().useContext(o.PlatformContext).is_dashboard;return r().createElement(s.default,{message:(0,l.localize)("We could not verify your proof of address"),text:r().createElement(l.Localize,{i18n_default_text:"Please check your email for details."}),icon:r().createElement(i.Icon,{icon:e?"IcPoaErrorDashboard":"IcPoaError",size:128})})}},"./Components/poa-verified/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>_});var a=n("react"),r=n.n(a),o=n("../../../node_modules/prop-types/index.js"),i=n("@deriv/components"),l=n("@deriv/shared"),s=n("@deriv/translations"),c=n("./Components/poi-button/poi-button.jsx"),u=n("./Components/icon-message-content/index.js"),d=n("./Components/poa-continue-trading-button/continue-trading-button.jsx"),m=function(e){var t=e.needs_poi,n=e.is_description_enabled,a=void 0===n||n,o=r().useContext(l.PlatformContext).is_dashboard,m=(0,s.localize)("Your proof of address is verified");return t?r().createElement("div",{className:o&&"account-management__container-dashboard"},r().createElement(u.default,{message:m,text:(0,s.localize)("To continue trading, you must also submit a proof of identity."),icon:r().createElement(i.Icon,{icon:"IcPoaVerified",size:128}),className:o&&"paaccount-management-dashboard"},r().createElement(c.x,null))):r().createElement("div",{className:o&&"account-management__container-dashboard"},r().createElement(u.default,{message:m,icon:r().createElement(i.Icon,{icon:"IcPoaVerified",size:128,className:o&&"account-management-dashboard"})},!a&&r().createElement(d.M,null)))};m.PropTypes={needs_poi:o.PropTypes.bool,is_description_disabled:o.PropTypes.bool};const _=m},"./Components/poi-button/index.js":(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});const a=n("./Components/poi-button/poi-button.jsx").x},"./Components/poi-button/poi-button.jsx":(e,t,n)=>{"use strict";n.d(t,{x:()=>l});var a=n("@deriv/components"),r=n("@deriv/translations"),o=n("react"),i=n.n(o),l=function(){return i().createElement(a.ButtonLink,{className:"account-management__button",to:"/account/proof-of-identity"},i().createElement(a.Text,{className:"dc-btn__text",weight:"bold",as:"p"},(0,r.localize)("Proof of identity")))}},"./Components/poi-expired/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>c});var a=n("react"),r=n.n(a),o=n("@deriv/components"),i=n("@deriv/shared"),l=n("@deriv/translations"),s=n("./Components/icon-message-content/index.js");const c=function(){var e=r().useContext(i.PlatformContext).is_dashboard;return r().createElement(s.default,{message:(0,l.localize)("New proof of identity document needed"),text:r().createElement(l.Localize,{i18n_default_text:"Kindly send a scan of a valid proof of identity to <0>support@deriv.com</0>",components:[r().createElement("a",{key:0,className:"link link--orange",rel:"noopener noreferrer",target:"_blank",href:"mailto:support@deriv.com"})]}),icon:e?r().createElement(o.Icon,{icon:"IcPoiUploadDashboard",height:128,width:237}):r().createElement(o.Icon,{icon:"IcPoiUpload",size:128}),className:"account-management-dashboard"})}},"./Components/poi-missing-personal-details/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var a=n("react"),r=n.n(a),o=n("@deriv/shared"),i=n("@deriv/components"),l=n("@deriv/translations"),s=n("./Components/icon-message-content/index.js"),c=function(e){var t=e.anchor,n=e.from,a=e.text;return r().createElement(i.ButtonLink,{to:"/account/personal-details".concat(n?"?from=".concat(n):"").concat(t?"#".concat(t):"")},r().createElement(i.Text,{className:"dc-btn__text",weight:"bold",as:"p"},a||(0,l.localize)("Go to personal details")))};const u=function(e){var t=e.has_invalid_postal_code,n=e.from,a=r().useContext(o.PlatformContext).is_dashboard;return t?r().createElement(s.default,{message:(0,l.localize)("Your postal code is invalid"),text:(0,l.localize)("Please check and update your postal code before submitting proof of identity."),icon:r().createElement(i.Icon,{icon:"IcAccountMissingDetails",size:128})},r().createElement(c,{anchor:"address_postcode",from:n,text:(0,l.localize)("Update postal code")})):r().createElement(s.default,{message:(0,l.localize)("Your personal details are missing"),text:(0,l.localize)("Please complete your personal details before you verify your identity."),icon:r().createElement(i.Icon,{icon:a?"IcAccountMissingDetailsDashboard":"IcAccountMissingDetails",size:128})},r().createElement(c,null))}},"./Components/poi-onfido-failed/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>m});var a=n("react"),r=n.n(a),o=n("../../../node_modules/prop-types/index.js"),i=n("@deriv/components"),l=n("@deriv/shared"),s=n("@deriv/translations"),c=n("./Components/icon-message-content/index.js"),u=n("./Components/poa-continue-trading-button/index.js"),d=function(e){var t=e.suspected,n=r().useContext(l.PlatformContext).is_dashboard;return n&&t&&(c.default,s.Localize,i.StaticUrl,i.Icon,u.Z),r().createElement(c.default,{message:(0,s.localize)("Proof of identity verification failed"),text:(0,s.localize)("We were unable to verify your document automatically. We will try to verify your document manually. Please check back in 1-3 days."),icon:n?r().createElement(i.Icon,{icon:"IcPoiFailedDashboard",width:237,height:128}):r().createElement(i.Icon,{icon:"IcPoiFailed",size:128}),className:"account-management-dashboard"},n&&r().createElement(u.Z,null))};d.propTypes={suspected:o.PropTypes.bool};const m=d},"./Components/poi-unsupported/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>u});var a=n("react"),r=n.n(a),o=n("@deriv/translations"),i=n("@deriv/components"),l=n("@deriv/shared"),s=n("./Components/icon-message-content/index.js"),c=function(){var e=r().useContext(l.PlatformContext).is_dashboard;return r().createElement("div",{className:"poi-icon-row"},r().createElement("div",{className:"poi-icon-row__icon-container"},r().createElement(i.Icon,{icon:e?"IcIdentityCardDashboard":"IcIdentityCard",size:90}),r().createElement(i.Text,{color:"prominent",as:"p"},(0,o.localize)("Identity card")),r().createElement(i.Text,{line_height:"xs",color:"less-prominent",as:"p"},(0,o.localize)("Front and back"))),r().createElement("div",{className:"poi-icon-row__icon-container"},r().createElement(i.Icon,{icon:e?"IcDrivingLicenseDashboard":"IcDrivingLicense",size:90}),r().createElement(i.Text,{color:"prominent",as:"p"},(0,o.localize)("Driving license")),r().createElement(i.Text,{line_height:"xs",color:"less-prominent",as:"p"},(0,o.localize)("Front and back"))),r().createElement("div",{className:"poi-icon-row__icon-container"},r().createElement(i.Icon,{icon:e?"IcPassportDashboard":"IcPassport",size:90}),r().createElement(i.Text,{color:"prominent",as:"p"},(0,o.localize)("Passport")),r().createElement(i.Text,{line_height:"xs",color:"less-prominent",as:"p"},(0,o.localize)("Face photo page"))))};const u=function(){var e=r().useContext(l.PlatformContext).is_dashboard;return r().createElement(s.default,{message:(0,o.localize)("Verify your identity"),text:r().createElement(o.Localize,{i18n_default_text:"To continue trading with us, you need to send us a copy of any one of these government-issued photo ID documents via <0>LiveChat</0>.",components:[r().createElement("span",{key:0,className:"link link--orange",onClick:function(){return window.LC_API.open_chat_window()}})]}),className:e&&"dashboard",icon_row:r().createElement(c,null)})}},"./Components/poi-unverified/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>c});var a=n("@deriv/translations"),r=n("react"),o=n.n(r),i=n("@deriv/shared"),l=n("@deriv/components"),s=n("./Components/icon-message-content/index.js");const c=function(e){var t=e.is_description_enabled,n=o().useContext(i.PlatformContext).is_dashboard;return o().createElement(s.default,{message:(0,a.localize)("We could not verify your proof of identity"),text:t?o().createElement(a.Localize,{i18n_default_text:"As a precaution, we have disabled trading, deposits and withdrawals for this account. If you have any questions, please go to our Help Center.<0>Help Centre</0>.",components:[o().createElement(l.StaticUrl,{key:0,className:"link",href:"/help-centre"})]}):null,icon:n?o().createElement(l.Icon,{icon:"IcPoiErrorDashboard",width:273,height:128}):o().createElement(l.Icon,{icon:"IcPoiError",size:128}),className:n&&"account-management-dashboard"})}},"./Components/poi-upload-complete/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>_});var a=n("react"),r=n.n(a),o=n("../../../node_modules/prop-types/index.js"),i=n("@deriv/components"),l=n("@deriv/shared"),s=n("@deriv/translations"),c=n("./Components/poa-continue-trading-button/index.js"),u=n("./Components/poa-button/index.js"),d=n("./Components/icon-message-content/index.js"),m=function(e){var t=e.needs_poa,n=e.is_description_enabled,a=e.redirect_button,o=r().useContext(l.PlatformContext).is_dashboard,m=(0,s.localize)("Your proof of identity was submitted successfully");return t?r().createElement(d.default,{message:m,icon:o?r().createElement(i.Icon,{icon:"IcPoiVerifiedDashboard",width:273,height:128}):r().createElement(i.Icon,{icon:"IcPoiVerified",size:128}),className:o&&"account-management-dashboard"},n&&r().createElement(r().Fragment,null,r().createElement("div",{className:"account-management__text-container"},r().createElement(i.Text,{align:"center",size:"xs",as:o?"span":"p"},(0,s.localize)("Your document is being reviewed, please check back in 1-3 days.")),r().createElement(i.Text,{align:"center",size:"xs",as:o?"span":"p"},(0,s.localize)("You must also submit a proof of address."))),r().createElement(u.Z,null)),a):r().createElement(d.default,{message:m,text:(0,s.localize)("Your document is being reviewed, please check back in 1-3 days."),icon:o?r().createElement(i.Icon,{icon:"IcPoiVerifiedDashboard",width:273,height:128}):r().createElement(i.Icon,{icon:"IcPoiVerified",size:128}),className:o&&"account-management-dashboard"},n&&r().createElement(c.Z,null))};m.protoTypes={is_description_enabled:o.PropTypes.bool,has_poa:o.PropTypes.bool,redirect_button:o.PropTypes.object};const _=m},"./Components/poi-verified/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>_});var a=n("react"),r=n.n(a),o=n("../../../node_modules/prop-types/index.js"),i=n("@deriv/components"),l=n("@deriv/shared"),s=n("@deriv/translations"),c=n("./Components/poa-continue-trading-button/index.js"),u=n("./Components/poa-button/index.js"),d=n("./Components/icon-message-content/index.js"),m=function(e){var t=e.needs_poa,n=e.is_description_enabled,a=e.redirect_button,o=r().useContext(l.PlatformContext).is_dashboard,m=(0,s.localize)("Your proof of identity is verified");return t?r().createElement(d.default,{message:m,icon:o?r().createElement(i.Icon,{icon:"IcPoaVerifiedDashboard",height:128,width:237}):r().createElement(i.Icon,{icon:"IcPoaVerified",size:128}),className:"account-management-dashboard",text:(0,s.localize)("To continue trading, you must also submit a proof of address.")},n&&r().createElement(u.Z,null),a):r().createElement(d.default,{message:m,icon:o?r().createElement(i.Icon,{icon:"IcPoaVerifiedDashboard",height:128,width:237}):r().createElement(i.Icon,{icon:"IcPoaVerified",size:128}),className:"account-management-dashboard"},n&&r().createElement(c.Z,null))};m.propTypes={has_poa:o.PropTypes.bool,is_description_enabled:o.PropTypes.bool,redirect_button:o.PropTypes.oneOfType([o.PropTypes.object,o.PropTypes.bool])};const _=m},"./Components/reset-trading-password-modal/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>g});var a=n("react"),r=n.n(a),o=n("../../../node_modules/prop-types/index.js"),i=n.n(o),l=n("../../../node_modules/formik/dist/formik.esm.js"),s=n("react-router-dom"),c=n("@deriv/components"),u=n("@deriv/shared"),d=n("@deriv/translations");function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function f(e,t,n,a,r,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,r)}var p=function(e){var t=e.setDialogTitleFunc,n=e.toggleResetTradingPasswordModal,a=e.verification_code,o=e.platform;return r().createElement("div",{className:"reset-trading-password"},r().createElement(l.J9,{initialValues:{password:""},initialStatus:{reset_complete:!1,error_msg:"",error_code:""},validate:function(e){var t={};return(0,u.validLength)(e.password,{min:8,max:25})?(0,u.validPassword)(e.password)||(t.password=(0,u.getErrorMessages)().password()):t.password=(0,d.localize)("You should enter {{min_number}}-{{max_number}} characters.",{min_number:8,max_number:25}),t},onSubmit:function(e,n){n.setSubmitting(!0);var r={new_password:e.password,verification_code:a,platform:o};u.WS.tradingPlatformPasswordReset(r).then(function(){var e,a=(e=regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.error?(n.setStatus({error_msg:a.error.message,error_code:a.error.code}),t(!0)):(n.resetForm({password:""}),n.setStatus({reset_complete:!0})),n.setSubmitting(!1);case 2:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){f(o,a,r,i,l,"next",e)}function l(e){f(o,a,r,i,l,"throw",e)}i(void 0)}))});return function(e){return a.apply(this,arguments)}}())}},(function(e){var t=e.handleBlur,a=e.errors,i=e.values,s=e.touched,m=e.isSubmitting,_=e.setFieldTouched,f=e.handleChange,p=e.status;return r().createElement(l.l0,null,r().createElement(r().Fragment,null,p.error_msg&&r().createElement("div",{className:"reset-trading-password__error"},r().createElement(c.Icon,{icon:"IcMt5Expired",size:128}),r().createElement(c.Text,{as:"p",size:"xs",weight:"bold",align:"center",className:"reset-trading-password__lead"},p.error_msg),"InvalidToken"===p.error_code&&r().createElement(c.Text,{as:"p",color:"prominent",size:"xs",align:"center",className:"reset-trading-password__description--is-centered"},r().createElement(d.Localize,{i18n_default_text:"Please request a new password and check your email for the new token."})),r().createElement(c.Button,{className:"reset-trading-password__confirm-button",primary:!0,large:!0,onClick:function(){return n(!1)}},r().createElement(d.Localize,{i18n_default_text:"Ok"}))),p.reset_complete&&r().createElement("div",{className:"reset-trading-password__password-success"},r().createElement(c.Icon,{className:"reset-trading-password__icon",icon:"IcSuccessResetTradingPassword",size:128}),r().createElement(c.Text,{as:"p",weight:"bold",className:"reset-trading-password__heading"},r().createElement(d.Localize,{i18n_default_text:"Success"})),r().createElement(c.Text,{align:"center",as:"p",size:"xs",className:"reset-trading-password__subtext"},(0,d.localize)("You have a new {{platform}} password to log in to your {{platform}} accounts on the web and mobile apps.",{platform:(0,u.getCFDPlatformLabel)(o)})),r().createElement(c.Button,{type:"button",onClick:function(){return n(!1)},primary:!0,large:!0},r().createElement(d.Localize,{i18n_default_text:"Done"}))),!p.error_msg&&!p.reset_complete&&r().createElement("div",{className:"reset-trading-password__set-password"},r().createElement(c.Text,{as:"p",weight:"bold",className:"reset-trading-password__heading"},r().createElement(d.Localize,{i18n_default_text:"Create a new {{platform}} password",values:{platform:(0,u.getCFDPlatformLabel)(o)}})),r().createElement("fieldset",{className:"reset-trading-password__input-field"},r().createElement(c.PasswordMeter,{input:i.password,has_error:!(!s.password||!a.password),custom_feedback_messages:(0,u.getErrorMessages)().password_warnings},r().createElement(c.PasswordInput,{autoComplete:"new-password",className:"reset-trading-password__password-field",name:"password",label:(0,d.localize)("{{platform}} password",{platform:(0,u.getCFDPlatformLabel)(o)}),onChange:function(e){_("password",!0),f(e)},onBlur:t,error:s.password&&a.password,value:i.password,"data-lpignore":"true",required:!0}))),r().createElement(c.Text,{as:"p",size:"xs",className:"reset-trading-password__hint"},p.error_msg?r().createElement(d.Localize,{i18n_default_text:"{{error_msg}}",values:{error_msg:p.error_msg}}):r().createElement(d.Localize,{i18n_default_text:"Strong passwords contain at least 8 characters that include uppercase and lowercase letters, numbers, and symbols."})),r().createElement(c.FormSubmitButton,{is_disabled:!i.password||!!a.password||m,has_cancel:!0,cancel_label:(0,d.localize)("Cancel"),onCancel:function(){return n(!1)},is_loading:m,label:(0,d.localize)("Create")}))))})))};p.propTypes={is_dxtrade_allowed:i().bool,setDialogTitleFunc:i().func,toggleResetTradingPasswordModal:i().func,verification_code:i().string,platform:i().string};var h=function(e){var t=e.disableApp,n=e.enableApp,a=e.is_loading,o=e.is_visible,i=e.toggleResetTradingPasswordModal,l=e.verification_code,_=e.platform,f=m(r().useState(""),2),h=f[0],g=f[1],y=(0,s.useHistory)();return r().useEffect((function(){o&&y.replace({search:"",hash:location.hash})}),[y,o]),r().createElement(c.Dialog,{className:"reset-trading-password__dialog",disableApp:t,enableApp:n,has_close_icon:!!h,is_loading:a,is_visible:o,onConfirm:function(){return i(!1)},title:h},r().createElement(p,{toggleResetTradingPasswordModal:i,verification_code:l,setDialogTitleFunc:function(e){g(e?(0,d.localize)("Reset {{platform}} password",{platform:(0,u.getCFDPlatformLabel)(_)}):"")},platform:_}))};h.propTypes={disableApp:i().func,enableApp:i().func,is_loading:i().bool,is_visible:i().bool,toggleResetTradingPasswordModal:i().func,verification_code:i().string,platform:i().string};const g=h},"./Components/sent-email-modal/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>d});var a=n("react"),r=n.n(a),o=n("../../../node_modules/prop-types/index.js"),i=n.n(o),l=n("@deriv/translations"),s=n("@deriv/components"),c=n("@deriv/shared"),u=function(e){var t=e.identifier_title,n=e.is_open,a=e.onClose,o=e.onClickSendEmail,i=r().createElement(s.SendEmailTemplate,{className:"sent-email",subtitle:function(){var e="";switch(t){case c.CFD_PLATFORMS.DXTRADE:e=(0,l.localize)("Please click on the link in the email to change your Deriv X password.");break;case c.CFD_PLATFORMS.MT5:e=(0,l.localize)("Please click on the link in the email to change your DMT5 password.");break;case"Google":case"Facebook":e=(0,l.localize)("Check your {{ identifier_title }} account email and click the link in the email to proceed.",{identifier_title:t});break;default:e=(0,l.localize)("Please click on the link in the email to reset your password.")}return e}(),title:(0,l.localize)("Weve sent you an email"),lbl_no_receive:(0,l.localize)("Didn't receive the email?"),txt_resend:(0,l.localize)("Resend email"),txt_resend_in:(0,l.localize)("Resend email in"),onClickSendEmail:o},[{key:"email_spam",icon:"IcEmailSpam",content:(0,l.localize)("The email is in your spam folder (Sometimes things get lost there).")},{key:"wrong_email",icon:"IcEmail",content:(0,l.localize)("You accidentally gave us another email address (Usually a work or a personal one instead of the one you meant).")},{key:"email_firewall",icon:"IcEmailFirewall",content:(0,l.localize)("We cant deliver the email to this address (Usually because of firewalls or filtering).")}].map((function(e){return r().createElement("div",{className:"sent-email__content",key:e.key},r().createElement(s.Icon,{icon:e.icon,size:32}),r().createElement(s.Text,{size:"xxs",as:"p"},e.content))})));return(0,c.isMobile)()?r().createElement(s.MobileDialog,{portal_element_id:"modal_root",title:(0,l.localize)("Weve sent you an email"),wrapper_classname:"mt5-email-sent",visible:n,onClose:a,has_content_scroll:!0},i):r().createElement(s.Modal,{className:"sent-email__modal",is_open:n,has_close_icon:!0,should_header_stick_body:!0,title:"",toggleModal:a,width:"440px"},r().createElement(s.Div100vhContainer,{className:"account__scrollbars_container-wrapper",is_disabled:(0,c.isDesktop)(),height_offset:"80px"},r().createElement(s.Modal.Body,null,r().createElement("div",{onClick:a,className:"send-email-template__close"},r().createElement(s.Icon,{icon:"IcCross"})),i)))};u.propTypes={identifier_title:i().string,is_open:i().bool,is_unlink_modal:i().bool,onClose:i().func,onClickSendEmail:i().func};const d=u},"./Sections/Profile/FinancialAssessment/index.js":(e,t,n)=>{"use strict";n.d(t,{default:()=>J});var a=n("../../../node_modules/classnames/index.js"),r=n.n(a),o=n("react"),i=n.n(o),l=n("../../../node_modules/formik/dist/formik.esm.js"),s=n("react-router"),c=n("@deriv/components"),u=n("@deriv/shared"),d=n("@deriv/translations"),m=n("./Stores/connect.js"),_=n("./Components/leave-confirm/index.js"),f=n("./Components/icon-message-content/index.js"),p=n("./Components/demo-message/index.js"),h=n("./Components/load-error-message/index.js"),g=n("./Components/form-body/index.js"),y=n("./Components/form-body-section/index.js"),b=n("./Components/form-sub-header/index.js"),v=n("./Components/form-footer/index.js"),x=function(){return[{text:(0,d.localize)("Salaried Employee"),value:"Salaried Employee"},{text:(0,d.localize)("Self-Employed"),value:"Self-Employed"},{text:(0,d.localize)("Investments & Dividends"),value:"Investments & Dividends"},{text:(0,d.localize)("Pension"),value:"Pension"},{text:(0,d.localize)("State Benefits"),value:"State Benefits"},{text:(0,d.localize)("Savings & Inheritance"),value:"Savings & Inheritance"}]},E=function(){return[{text:(0,d.localize)("Employed"),value:"Employed"},{text:(0,d.localize)("Pensioner"),value:"Pensioner"},{text:(0,d.localize)("Self-Employed"),value:"Self-Employed"},{text:(0,d.localize)("Student"),value:"Student"},{text:(0,d.localize)("Unemployed"),value:"Unemployed"}]},w=function(){return[{text:(0,d.localize)("Construction"),value:"Construction"},{text:(0,d.localize)("Education"),value:"Education"},{text:(0,d.localize)("Finance"),value:"Finance"},{text:(0,d.localize)("Health"),value:"Health"},{text:(0,d.localize)("Tourism"),value:"Tourism"},{text:(0,d.localize)("Information & Communications Technology"),value:"Information & Communications Technology"},{text:(0,d.localize)("Science & Engineering"),value:"Science & Engineering"},{text:(0,d.localize)("Legal"),value:"Legal"},{text:(0,d.localize)("Social & Cultural"),value:"Social & Cultural"},{text:(0,d.localize)("Agriculture"),value:"Agriculture"},{text:(0,d.localize)("Real Estate"),value:"Real Estate"},{text:(0,d.localize)("Food Services"),value:"Food Services"},{text:(0,d.localize)("Manufacturing"),value:"Manufacturing"},{text:(0,d.localize)("Unemployed"),value:"Unemployed"}]},z=function(){return[{text:(0,d.localize)("Chief Executives, Senior Officials and Legislators"),value:"Chief Executives, Senior Officials and Legislators"},{text:(0,d.localize)("Managers"),value:"Managers"},{text:(0,d.localize)("Professionals"),value:"Professionals"},{text:(0,d.localize)("Clerks"),value:"Clerks"},{text:(0,d.localize)("Personal Care, Sales and Service Workers"),value:"Personal Care, Sales and Service Workers"},{text:(0,d.localize)("Agricultural, Forestry and Fishery Workers"),value:"Agricultural, Forestry and Fishery Workers"},{text:(0,d.localize)("Craft, Metal, Electrical and Electronics Workers"),value:"Craft, Metal, Electrical and Electronics Workers"},{text:(0,d.localize)("Plant and Machine Operators and Assemblers"),value:"Plant and Machine Operators and Assemblers"},{text:(0,d.localize)("Cleaners and Helpers"),value:"Cleaners and Helpers"},{text:(0,d.localize)("Mining, Construction, Manufacturing and Transport Workers"),value:"Mining, Construction, Manufacturing and Transport Workers"},{text:(0,d.localize)("Armed Forces"),value:"Armed Forces"},{text:(0,d.localize)("Government Officers"),value:"Government Officers"},{text:(0,d.localize)("Students"),value:"Students"},{text:(0,d.localize)("Unemployed"),value:"Unemployed"}]},k=function(){return[{text:(0,d.localize)("Accumulation of Income/Savings"),value:"Accumulation of Income/Savings"},{text:(0,d.localize)("Cash Business"),value:"Cash Business"},{text:(0,d.localize)("Company Ownership"),value:"Company Ownership"},{text:(0,d.localize)("Divorce Settlement"),value:"Divorce Settlement"},{text:(0,d.localize)("Inheritance"),value:"Inheritance"},{text:(0,d.localize)("Investment Income"),value:"Investment Income"},{text:(0,d.localize)("Sale of Property"),value:"Sale of Property"}]},C=function(){return[{text:(0,d.localize)("Primary"),value:"Primary"},{text:(0,d.localize)("Secondary"),value:"Secondary"},{text:(0,d.localize)("Tertiary"),value:"Tertiary"}]},S=function(){return[{text:(0,d.localize)("Less than $25,000"),value:"Less than $25,000"},{text:(0,d.localize)("$25,000 - $50,000"),value:"$25,000 - $50,000"},{text:(0,d.localize)("$50,001 - $100,000"),value:"$50,001 - $100,000"},{text:(0,d.localize)("$100,001 - $500,000"),value:"$100,001 - $500,000"},{text:(0,d.localize)("Over $500,000"),value:"Over $500,000"}]},N=function(){return[{text:(0,d.localize)("Less than $100,000"),value:"Less than $100,000"},{text:(0,d.localize)("$100,000 - $250,000"),value:"$100,000 - $250,000"},{text:(0,d.localize)("$250,001 - $500,000"),value:"$250,001 - $500,000"},{text:(0,d.localize)("$500,001 - $1,000,000"),value:"$500,001 - $1,000,000"},{text:(0,d.localize)("Over $1,000,000"),value:"Over $1,000,000"}]},T=function(){return[{text:(0,d.localize)("Less than $25,000"),value:"Less than $25,000"},{text:(0,d.localize)("$25,000 - $50,000"),value:"$25,000 - $50,000"},{text:(0,d.localize)("$50,001 - $100,000"),value:"$50,001 - $100,000"},{text:(0,d.localize)("$100,001 - $500,000"),value:"$100,001 - $500,000"},{text:(0,d.localize)("Over $500,000"),value:"Over $500,000"}]},O=function(){return[{text:(0,d.localize)("0-1 year"),value:"0-1 year"},{text:(0,d.localize)("1-2 years"),value:"1-2 years"},{text:(0,d.localize)("Over 3 years"),value:"Over 3 years"}]},j=function(){return[{text:(0,d.localize)("0-5 transactions in the past 12 months"),value:"0-5 transactions in the past 12 months"},{text:(0,d.localize)("6-10 transactions in the past 12 months"),value:"6-10 transactions in the past 12 months"},{text:(0,d.localize)("11-39 transactions in the past 12 months"),value:"11-39 transactions in the past 12 months"},{text:(0,d.localize)("40 transactions or more in the past 12 months"),value:"40 transactions or more in the past 12 months"}]},P=function(){return[{text:(0,d.localize)("0-1 year"),value:"0-1 year"},{text:(0,d.localize)("1-2 years"),value:"1-2 years"},{text:(0,d.localize)("Over 3 years"),value:"Over 3 years"}]},L=function(){return[{text:(0,d.localize)("0-5 transactions in the past 12 months"),value:"0-5 transactions in the past 12 months"},{text:(0,d.localize)("6-10 transactions in the past 12 months"),value:"6-10 transactions in the past 12 months"},{text:(0,d.localize)("11-39 transactions in the past 12 months"),value:"11-39 transactions in the past 12 months"},{text:(0,d.localize)("40 transactions or more in the past 12 months"),value:"40 transactions or more in the past 12 months"}]},I=function(){return[{text:(0,d.localize)("0-1 year"),value:"0-1 year"},{text:(0,d.localize)("1-2 years"),value:"1-2 years"},{text:(0,d.localize)("Over 3 years"),value:"Over 3 years"}]},A=function(){return[{text:(0,d.localize)("0-5 transactions in the past 12 months"),value:"0-5 transactions in the past 12 months"},{text:(0,d.localize)("6-10 transactions in the past 12 months"),value:"6-10 transactions in the past 12 months"},{text:(0,d.localize)("11-39 transactions in the past 12 months"),value:"11-39 transactions in the past 12 months"},{text:(0,d.localize)("40 transactions or more in the past 12 months"),value:"40 transactions or more in the past 12 months"}]},M=function(){return[{text:(0,d.localize)("0-1 year"),value:"0-1 year"},{text:(0,d.localize)("1-2 years"),value:"1-2 years"},{text:(0,d.localize)("Over 3 years"),value:"Over 3 years"}]},D=function(){return[{text:(0,d.localize)("0-5 transactions in the past 12 months"),value:"0-5 transactions in the past 12 months"},{text:(0,d.localize)("6-10 transactions in the past 12 months"),value:"6-10 transactions in the past 12 months"},{text:(0,d.localize)("11-39 transactions in the past 12 months"),value:"11-39 transactions in the past 12 months"},{text:(0,d.localize)("40 transactions or more in the past 12 months"),value:"40 transactions or more in the past 12 months"}]};function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function W(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function V(e){return(V=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){var t=e.className;return i().createElement(i().Fragment,null,i().createElement(c.Text,{as:"p",size:"xs",className:t},i().createElement(d.Localize,{i18n_default_text:"In providing our services to you, we are required to obtain information from you in order to assess whether a given product or service is appropriate for you (that is, whether you possess the experience and knowledge to understand the risks involved).<0/><1/>",components:[i().createElement("br",{key:0}),i().createElement("br",{key:1})]}),i().createElement(d.Localize,{i18n_default_text:"On the basis of the information provided in relation to your knowledge and experience, we consider that the investments available via this website are not appropriate for you.<0/><1/>",components:[i().createElement("br",{key:0}),i().createElement("br",{key:1})]}),i().createElement(d.Localize,{i18n_default_text:"By clicking Accept below and proceeding with the Account Opening you should note that you may be exposing yourself to risks (which may be significant, including the risk of loss of the entire sum invested) that you may not have the knowledge and experience to properly assess or mitigate."})))},K=function(e){var t=e.is_visible,n=e.toggleModal,a=e.onSubmit;return i().createElement(c.Modal,{className:"financial-assessment-confirmation",is_open:t,small:!0,toggleModal:function(){return n(!1)},title:(0,d.localize)("Appropriateness Test, WARNING:")},i().createElement(c.Modal.Body,null,i().createElement(G,null)),i().createElement(c.Modal.Footer,null,i().createElement(c.Button,{large:!0,text:(0,d.localize)("Decline"),onClick:function(){return n(!1)},secondary:!0}),i().createElement(c.Button,{large:!0,text:(0,d.localize)("Accept"),onClick:function(){a(),n(!1)},primary:!0})))},H=function(e){var t=e.toggleModal,n=e.onSubmit;return i().createElement("div",{className:"account__confirmation-page"},i().createElement(c.Text,{size:"xs",weight:"bold",styles:{color:"var(--brand-red-coral)"},className:"account__confirmation-page-title"},(0,d.localize)("Notice")),i().createElement(G,{className:"account__confirmation-page-content"}),i().createElement("div",{className:"account__confirmation-page-footer"},i().createElement(c.Button,{large:!0,text:(0,d.localize)("Back"),onClick:function(){return t(!1)},secondary:!0}),i().createElement(c.Button,{large:!0,text:(0,d.localize)("Accept"),onClick:function(){n(),t(!1)},primary:!0})))},Z=function(e){var t=e.platform,n=(0,s.useHistory)();return t&&u.platforms[t]?i().createElement(f.default,{className:"submit-success",message:(0,d.localize)("Financial assessment submitted successfully"),text:u.platforms[t].icon_text,icon:i().createElement(c.Icon,{icon:"IcSuccess",width:96,height:90})},i().createElement("div",{className:"account-management-flex-wrapper account-management-submit-success"},i().createElement(c.Button,{type:"button",has_effect:!0,text:(0,d.localize)("Back to {{platform_name}}",{platform_name:u.platforms[t].platform_name}),onClick:function(){if(u.platforms[t].is_hard_redirect){var e=window.location.origin+u.platforms[t].route_to_path;window.location.href=e}else n.push(u.platforms[t].route_to_path)},primary:!0,large:!0}))):i().createElement(f.default,{className:"submit-success",message:(0,d.localize)("Financial assessment submitted successfully"),text:(0,d.localize)("Lets continue with providing proofs of address and identity."),icon:i().createElement(c.Icon,{icon:"IcSuccess",width:96,height:90})},i().createElement("div",{className:"account-management-flex-wrapper account-management-submit-success"},i().createElement(c.Button,{type:"button",has_effect:!0,text:(0,d.localize)("Continue"),onClick:function(){n.push(u.routes.proof_of_address)},primary:!0,large:!0})))},X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(o,e);var t,n,a=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=V(e);if(t){var r=V(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return $(this,n)}}(o);function o(){var e;W(this,o);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).is_mounted=!1,e.state={is_loading:!0,is_confirmation_visible:!1,has_trading_experience:!1,show_form:!0,income_source:"",employment_status:"",employment_industry:"",occupation:"",source_of_wealth:"",education_level:"",net_income:"",estimated_worth:"",account_turnover:"",binary_options_trading_experience:"",binary_options_trading_frequency:"",cfd_trading_experience:"",cfd_trading_frequency:"",forex_trading_experience:"",forex_trading_frequency:"",other_instruments_trading_experience:"",other_instruments_trading_frequency:""},e.onSubmit=function(t,n){var a=n.setSubmitting,r=n.setStatus;r({msg:""}),e.setState({is_btn_loading:!0}),u.WS.setFinancialAssessment(t).then((function(t){t.error?(e.setState({is_btn_loading:!1}),r({msg:t.error.message})):u.WS.authorized.storage.getFinancialAssessment().then((function(t){e.setState(B(B({},t.get_financial_assessment),{},{is_submit_success:!0,is_btn_loading:!1})),(0,u.isDesktop)()&&setTimeout((function(){return e.setState({is_submit_success:!1})}),1e4),e.props.removeNotificationMessage({key:"risk"}),e.props.removeNotificationByKey({key:"risk"})})),a(!1)}))},e.validateFields=function(t){e.setState({is_submit_success:!1});var n={};return Object.keys(t).forEach((function(e){void 0===t[e]||t[e]||(n[e]=(0,d.localize)("This field is required"))})),n},e.showForm=function(t){return e.setState({show_form:t,is_confirmation_visible:!1})},e.toggleConfirmationModal=function(t){var n={is_confirmation_visible:t};(0,u.isMobile)()&&(n.show_form=!t),e.setState(n)},e.onClickSubmit=function(t){e.state.has_trading_experience&&e.props.is_trading_experience_incomplete?e.toggleConfirmationModal(!0):t()},e}return t=o,(n=[{key:"componentDidMount",value:function(){var e=this;this.is_mounted=!0,this.props.is_virtual?(this.setState({is_loading:!1}),this.props.history.push(u.routes.personal_details)):u.WS.authorized.storage.getFinancialAssessment().then((function(t){e.is_mounted&&u.WS.wait("get_account_status").then((function(){var n=(e.props.is_financial_account||e.props.is_trading_experience_incomplete)&&!e.props.is_svg;e.setState({has_trading_experience:n}),t.error?e.setState({api_initial_load_error:t.error.message}):e.setState(B(B({},t.get_financial_assessment),{},{is_loading:!1}))}))}))}},{key:"componentWillUnmount",value:function(){this.is_mounted=!1}},{key:"render",value:function(){var e=this,t=this.state,n=t.api_initial_load_error,a=t.income_source,o=t.employment_status,s=t.employment_industry,m=t.occupation,f=t.source_of_wealth,F=t.education_level,R=t.net_income,q=t.estimated_worth,W=t.account_turnover,U=t.binary_options_trading_experience,Y=t.binary_options_trading_frequency,$=t.cfd_trading_experience,V=t.cfd_trading_frequency,G=t.forex_trading_experience,X=t.forex_trading_frequency,J=t.other_instruments_trading_experience,Q=t.other_instruments_trading_frequency,ee=t.show_form,te=t.is_loading,ne=t.is_btn_loading,ae=t.is_submit_success,re=t.is_confirmation_visible,oe=t.has_trading_experience,ie=this.context.is_dashboard;return te?i().createElement(c.Loading,{is_fullscreen:!1,className:"account__initial-loader"}):n?i().createElement(h.default,{error_message:n}):this.props.is_virtual?i().createElement(p.default,{has_demo_icon:ie,has_button:ie}):(0,u.isMobile)()&&ae?i().createElement(Z,{platform:this.props.platform}):i().createElement(i().Fragment,null,i().createElement(l.J9,{initialValues:B({income_source:a,employment_status:o,employment_industry:s,occupation:m,source_of_wealth:f,education_level:F,net_income:R,estimated_worth:q,account_turnover:W},oe&&{binary_options_trading_experience:U,binary_options_trading_frequency:Y,cfd_trading_experience:$,cfd_trading_frequency:V,forex_trading_experience:G,forex_trading_frequency:X,other_instruments_trading_experience:J,other_instruments_trading_frequency:Q}),enableReinitialize:!0,validate:this.validateFields,onSubmit:this.onSubmit},(function(t){var n=t.values,a=t.errors,o=t.status,l=t.touched,s=t.handleChange,m=t.handleBlur,f=t.handleSubmit,p=t.isSubmitting,h=t.dirty;return i().createElement(i().Fragment,null,!ie&&(0,u.isMobile)()&&re&&i().createElement(H,{toggleModal:e.toggleConfirmationModal,onSubmit:f}),((0,u.isDesktop)()||ie)&&i().createElement(K,{is_visible:re,toggleModal:e.toggleConfirmationModal,onSubmit:f}),i().createElement(_.default,{onDirty:(0,u.isMobile)()?e.showForm:null}),ee&&i().createElement("form",{className:"account-form account-form__financial-assessment",onSubmit:f},i().createElement(g.default,{scroll_offset:(0,u.isMobile)()?ie?"160px":"200px":"80px"},i().createElement(b.default,{title:(0,d.localize)("Financial information"),subtitle:"(".concat((0,d.localize)("All fields are required"),")")}),i().createElement(y.Z,{has_side_note:ie,side_note:(0,d.localize)("Were legally obliged to ask for your financial information.")},i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Source of income"),is_align_text_left:!0,name:"income_source",list:x(),value:n.income_source,onChange:s,handleBlur:m,error:l.income_source&&a.income_source})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"income_source",label:(0,d.localize)("Source of income"),list_items:x(),value:n.income_source,error:l.income_source&&a.income_source,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Employment status"),is_align_text_left:!0,name:"employment_status",list:E(),value:n.employment_status,onChange:s,handleBlur:m,error:l.employment_status&&a.employment_status})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"employment_status",label:(0,d.localize)("Employment status"),list_items:E(),value:n.employment_status,error:l.employment_status&&a.employment_status,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Industry of employment"),is_align_text_left:!0,name:"employment_industry",list:w(),value:n.employment_industry,onChange:s,handleBlur:m,error:l.employment_industry&&a.employment_industry})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"employment_industry",label:(0,d.localize)("Industry of employment"),list_items:w(),value:n.employment_industry,error:l.employment_industry&&a.employment_industry,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{className:"account-form__occupation",placeholder:(0,d.localize)("Occupation"),is_align_text_left:!0,name:"occupation",list:z(),value:n.occupation,onChange:s,handleBlur:m,error:l.occupation&&a.occupation})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"occupation",label:(0,d.localize)("Occupation"),list_items:z(),value:n.occupation,error:l.occupation&&a.occupation,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Source of wealth"),is_align_text_left:!0,name:"source_of_wealth",list:k(),value:n.source_of_wealth,onChange:s,handleBlur:m,error:l.source_of_wealth&&a.source_of_wealth})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"source_of_wealth",label:(0,d.localize)("Source of wealth"),list_items:k(),value:n.source_of_wealth,error:l.source_of_wealth&&a.source_of_wealth,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Level of education"),is_align_text_left:!0,name:"education_level",list:C(),value:n.education_level,onChange:s,handleBlur:m,error:l.education_level&&a.education_level})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"education_level",label:(0,d.localize)("Level of education"),list_items:C(),value:n.education_level,error:l.education_level&&a.education_level,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Net annual income"),is_align_text_left:!0,name:"net_income",list:S(),value:n.net_income,onChange:s,handleBlur:m,error:l.net_income&&a.net_income})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"net_income",label:(0,d.localize)("Net annual income"),list_items:S(),value:n.net_income,error:l.net_income&&a.net_income,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Estimated net worth"),is_alignment_top:!0,is_align_text_left:!0,name:"estimated_worth",list:N(),value:n.estimated_worth,onChange:s,handleBlur:m,error:l.estimated_worth&&a.estimated_worth})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"estimated_worth",label:(0,d.localize)("Estimated net worth"),list_items:N(),value:n.estimated_worth,error:l.estimated_worth&&a.estimated_worth,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Anticipated account turnover"),is_alignment_top:!0,is_align_text_left:!0,name:"account_turnover",list:T(),value:n.account_turnover,onChange:s,handleBlur:m,error:l.account_turnover&&a.account_turnover})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"account_turnover",label:(0,d.localize)("Anticipated account turnover"),list_items:T(),value:n.account_turnover,error:l.account_turnover&&a.account_turnover,onChange:s})))),oe&&i().createElement(i().Fragment,null,i().createElement(b.default,{title:(0,d.localize)("Trading experience"),subtitle:"(".concat((0,d.localize)("All fields are required"),")")}),i().createElement(y.Z,{has_side_note:ie,side_note:(0,d.localize)("Tell us about your trading experience.")},i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Forex trading experience"),is_align_text_left:!0,name:"forex_trading_experience",list:I(),value:n.forex_trading_experience,onChange:s,handleBlur:m,error:l.forex_trading_experience&&a.forex_trading_experience})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"forex_trading_experience",label:(0,d.localize)("Forex trading experience"),list_items:I(),value:n.forex_trading_experience,error:l.forex_trading_experience&&a.forex_trading_experience,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Forex trading frequency"),is_align_text_left:!0,name:"forex_trading_frequency",list:A(),value:n.forex_trading_frequency,onChange:s,handleBlur:m,error:l.forex_trading_frequency&&a.forex_trading_frequency})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"forex_trading_frequency",label:(0,d.localize)("Forex trading frequency"),list_items:A(),value:n.forex_trading_frequency,error:l.forex_trading_frequency&&a.forex_trading_frequency,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Binary options trading experience"),is_align_text_left:!0,name:"binary_options_trading_experience",list:O(),value:n.binary_options_trading_experience,onChange:s,handleBlur:m,error:l.binary_options_trading_experience&&a.binary_options_trading_experience})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"binary_options_trading_experience",label:(0,d.localize)("Binary options trading experience"),list_items:O(),value:n.binary_options_trading_experience,error:l.binary_options_trading_experience&&a.binary_options_trading_experience,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Binary options trading frequency"),is_align_text_left:!0,name:"binary_options_trading_frequency",list:j(),value:n.binary_options_trading_frequency,onChange:s,handleBlur:m,error:l.binary_options_trading_frequency&&a.binary_options_trading_frequency})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"binary_options_trading_frequency",label:(0,d.localize)("Binary options trading frequency"),list_items:j(),value:n.binary_options_trading_frequency,error:l.binary_options_trading_frequency&&a.binary_options_trading_frequency,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("CFD trading experience"),is_align_text_left:!0,name:"cfd_trading_experience",list:P(),value:n.cfd_trading_experience,onChange:s,handleBlur:m,error:l.cfd_trading_experience&&a.cfd_trading_experience})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"cfd_trading_experience",label:(0,d.localize)("CFD trading experience"),list_items:P(),value:n.cfd_trading_experience,error:l.cfd_trading_experience&&a.cfd_trading_experience,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("CFD trading frequency"),is_align_text_left:!0,name:"cfd_trading_frequency",list:L(),value:n.cfd_trading_frequency,onChange:s,handleBlur:m,error:l.cfd_trading_frequency&&a.cfd_trading_frequency})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"cfd_trading_frequency",label:(0,d.localize)("CFD trading frequency"),list_items:L(),value:n.cfd_trading_frequency,error:l.cfd_trading_frequency&&a.cfd_trading_frequency,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Other trading instruments experience"),is_align_text_left:!0,name:"other_instruments_trading_experience",list:M(),value:n.other_instruments_trading_experience,onChange:s,handleBlur:m,error:l.other_instruments_trading_experience&&a.other_instruments_trading_experience})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"other_instruments_trading_experience",label:(0,d.localize)("Other trading instruments experience"),list_items:M(),value:n.other_instruments_trading_experience,error:l.other_instruments_trading_experience&&a.other_instruments_trading_experience,onChange:s}))),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(c.DesktopWrapper,null,i().createElement(c.Dropdown,{placeholder:(0,d.localize)("Other trading instruments frequency"),is_alignment_top:!0,is_align_text_left:!0,name:"other_instruments_trading_frequency",list:D(),value:n.other_instruments_trading_frequency,onChange:s,handleBlur:m,error:l.other_instruments_trading_frequency&&a.other_instruments_trading_frequency})),i().createElement(c.MobileWrapper,null,i().createElement(c.SelectNative,{placeholder:(0,d.localize)("Please select"),name:"other_instruments_trading_frequency",label:(0,d.localize)("Other trading instruments frequency"),list_items:D(),value:n.other_instruments_trading_frequency,error:l.other_instruments_trading_frequency&&a.other_instruments_trading_frequency,onChange:s})))))),i().createElement(v.default,null,o&&o.msg&&i().createElement(c.FormSubmitErrorMessage,{message:o.msg}),(0,u.isMobile)()&&!ie&&i().createElement(c.Text,{align:"center",size:"xxs",className:"account-form__footer-all-fields-required"},(0,d.localize)("All fields are required")),i().createElement(c.Button,{type:"button",className:r()("account-form__footer-btn",{"dc-btn--green":ae}),onClick:function(){return e.onClickSubmit(f)},is_disabled:p||!h||ne||Object.keys(a).length>0,has_effect:!0,is_loading:ne,is_submit_success:ae,text:ie?(0,d.localize)("Save"):(0,d.localize)("Submit"),large:!0,primary:!0}))))})))}}])&&U(t.prototype,n),o}(i().Component);X.contextType=u.PlatformContext;const J=(0,m.$j)((function(e){var t=e.client,n=e.common,a=e.ui;return{account_status:t.account_status,is_virtual:t.is_virtual,is_high_risk:t.is_high_risk,is_financial_account:t.is_financial_account,is_trading_experience_incomplete:t.is_trading_experience_incomplete,is_financial_information_incomplete:t.is_financial_information_incomplete,is_svg:t.is_svg,platform:n.platform,removeNotificationMessage:a.removeNotificationMessage,removeNotificationByKey:a.removeNotificationByKey}}))((0,s.withRouter)(X))},"./Sections/Verification/ProofOfAddress/proof-of-address-container.jsx":(e,t,n)=>{"use strict";n.d(t,{default:()=>U});var a=n("../../../node_modules/prop-types/index.js"),r=n.n(a),o=n("react"),i=n.n(o),l=n("@deriv/components"),s=n("@deriv/shared"),c=n("./Components/poa-expired/index.js"),u=n("./Components/poa-unverified/index.js"),d=n("./Components/poa-needs-review/index.js"),m=n("./Components/poa-submitted/index.js"),_=n("./Components/poa-verified/index.js"),f=n("@deriv/translations"),p=n("./Components/icon-message-content/index.js");const h=function(){return i().createElement(p.default,{message:(0,f.localize)("Proof of address verification not required"),text:(0,f.localize)("Your account does not need address verification at this time. We will inform you if address verification is required in the future."),icon:i().createElement(l.Icon,{icon:"IcPoaVerified",size:128})})};var g=n("./Components/poa-status-codes/index.js"),y=n("../../../node_modules/formik/dist/formik.esm.js"),b=n("./Stores/connect.js"),v=n("./Components/form-footer/index.js"),x=n("./Components/form-body/index.js"),E=n("./Components/form-body-section/index.js"),w=n("./Components/form-sub-header/index.js"),z=n("./Components/load-error-message/index.js"),k=n("./Components/leave-confirm/index.js"),C=n("./Components/file-uploader-container/index.js");function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?P(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var L=null,I=function(){return i().createElement("div",{className:"account-poa__upload-box account-poa__upload-box-dashboard"},i().createElement(l.Text,{size:"xs",line_height:"s"},i().createElement(f.Localize,{i18n_default_text:"A recent utility bill (e.g. electricity, water, gas, phone or internet)"})),i().createElement(l.Text,{size:"xs",line_height:"s"},i().createElement(f.Localize,{i18n_default_text:"A recent bank statement or government-issued letter with your name and address."})))},A=function(e){var t=e.account_settings,n=e.addNotificationByKey,a=e.is_eu,r=e.fetchResidenceList,o=e.fetchStatesList,c=e.onSubmit,u=e.removeNotificationByKey,d=e.removeNotificationMessage,m=e.states_list,_=j(i().useState({files:[],error_message:null}),2),p=_[0],h=_[1],g=j(i().useState(!0),2),b=g[0],N=g[1],O=j((0,l.useStateCallback)({}),2),P=O[0],A=O[1],M=j(i().useState(null),2),D=M[0],F=M[1],R=j((0,l.useStateCallback)({should_show_form:!0}),2),B=R[0],q=R[1],W=i().useContext(s.PlatformContext).is_dashboard;i().useEffect((function(){r().then((function(){Promise.all([o(),s.WS.wait("get_settings")]).then((function(){var e=t.citizen,n=t.tax_identification_number,r=t.tax_residence;A(T(T({},t),a?{citizen:e,tax_identification_number:n,tax_residence:r}:{}),(function(){return N(!1)}))}))}))}),[]);var U=function(e){q(T(T({},B),{should_show_form:e}))},Y={address_line_1:P.address_line_1,address_line_2:P.address_line_2,address_city:P.address_city,address_state:P.address_state,address_postcode:P.address_postcode};if(D)return i().createElement(z.default,{error_message:D});if(b)return i().createElement(l.Loading,{is_fullscreen:!1,className:"account__initial-loader"});var $=status&&status.msg?"200px":"154px";return Y.address_state?Y.address_state=m.length?(0,s.getLocation)(m,Y.address_state,"text"):Y.address_state:Y.address_state="",i().createElement(y.J9,{initialValues:Y,onSubmit:function(e,t){var r=t.setStatus,o=t.setSubmitting;r({msg:""}),q(T(T({},B),{is_btn_loading:!0}));var i=e;if(e.address_state&&m.length&&(i.address_state=(0,s.getLocation)(m,e.address_state,"value")||""),a){var l=P.citizen,_=P.tax_residence,f=P.tax_identification_number;i=(0,s.removeEmptyPropertiesFromObject)(T(T({},e),{},{citizen:l,tax_identification_number:f,tax_residence:_}))}s.WS.setSettings(i).then((function(e){e.error?(r({msg:e.error.message}),q(T(T({},B),{is_btn_loading:!1}))):s.WS.authorized.storage.getSettings().then((function(e){var t=e.error,n=e.get_settings;if(t)F(t.message);else{var a=n.address_line_1,r=n.address_line_2,o=n.address_city,i=n.address_state,l=n.address_postcode;A({address_line_1:a,address_line_2:r,address_city:o,address_state:i,address_postcode:l},(function(){return N(!1)}))}})).then((function(){var e;null===(e=L)||void 0===e||e.current.upload().then((function(e){e.warning?(r({msg:e.message}),q(T(T({},B),{is_btn_loading:!1}))):s.WS.authorized.storage.getAccountStatus().then((function(e){var t=e.error,a=e.get_account_status;t?F(t.message):q(T(T({},B),{is_submit_success:!0,is_btn_loading:!1}),(function(){var e=a.authentication,t=e.identity,r=e.needs_verification,o=!(t&&"none"===t.status),i=r.length&&r.includes("identity");c({has_poi:o}),d({key:"authenticate"}),u({key:"authenticate"}),d({key:"needs_poa"}),u({key:"needs_poa"}),d({key:"poa_expired"}),u({key:"poa_expired"}),i&&n("needs_poi")}))}))})).catch((function(e){r({msg:e.message}),q(T(T({},B),{is_btn_loading:!1}))})).then((function(){o(!1),q(T(T({},B),{is_btn_loading:!1}))}))}))}))},validate:function(e){q(T(T({},B),{should_allow_submit:!1}));var t={};!function(e,t){return function(n,a,r){a.forEach((function(a){var o=t[a];n(o)||e[a]||!0===r||(e[a]=r)}))}}(t,e)((function(e){return e}),["address_line_1","address_city"],(0,f.localize)("This field is required"));var n=(0,f.localize)("Only letters, numbers, space, and these special characters are allowed: {{ permitted_characters }}",{permitted_characters:"- . ' # ; : ( ) , @ /",interpolation:{escapeValue:!1}});e.address_line_1&&!(0,s.validAddress)(e.address_line_1)&&(t.address_line_1=n),e.address_line_2&&!(0,s.validAddress)(e.address_line_2)&&(t.address_line_2=n);var a=(0,f.localize)("Only letters, space, hyphen, period, and apostrophe are allowed.");return e.address_city&&!(0,s.validLetterSymbol)(e.address_city)&&(t.address_city=a),e.address_state&&!(0,s.validLetterSymbol)(e.address_state)&&(null==m?void 0:m.length)<1&&(t.address_state=a),e.address_postcode&&((0,s.validLength)(e.address_postcode,{min:0,max:20})?(0,s.validPostCode)(e.address_postcode)||(t.address_postcode=(0,f.localize)("Only letters, numbers, space, and hyphen are allowed.")):t.address_postcode=(0,f.localize)("Please enter a {{field_name}} under {{max_number}} characters.",{field_name:(0,f.localize)("Postal/ZIP code"),max_number:20,interpolation:{escapeValue:!1}})),t}},(function(e){var t=e.values,n=e.errors,a=e.status,r=e.touched,o=e.handleChange,c=e.handleBlur,u=e.handleSubmit,d=e.isSubmitting,_=e.setFieldValue;return i().createElement(i().Fragment,null,i().createElement(k.default,{onDirty:(0,s.isMobile)()?U:null}),B.should_show_form&&i().createElement("form",{noValidate:!0,className:"account-form",onSubmit:u},i().createElement(x.default,{scroll_offset:(0,s.isMobile)()?$:"80px"},i().createElement(w.default,{title:W?(0,f.localize)("1. Address"):(0,f.localize)("Details"),subtitle:W&&"(All fields are required)"}),i().createElement(E.Z,{has_side_note:W,side_note:(0,f.localize)("An accurate and complete address helps to speed up your verification process.")},i().createElement("div",{className:"account-poa__details-section"},!W&&i().createElement("div",{className:"account-poa__details-description"},i().createElement(l.Text,{size:(0,s.isMobile)()?"xxs":"xs"},(0,f.localize)("Please ensure that this address is the same as in your proof of address"))),i().createElement("div",{className:"account-poa__details-fields"},i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(l.Input,{"data-lpignore":"true",autoComplete:"off",type:"text",maxLength:70,name:"address_line_1",label:(0,f.localize)("First line of address*"),value:t.address_line_1,onChange:o,onBlur:c,error:r.address_line_1&&n.address_line_1,required:!0})),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(l.Input,{"data-lpignore":"true",autoComplete:"off",type:"text",maxLength:70,name:"address_line_2",label:(0,f.localize)("Second line of address (optional)"),value:t.address_line_2,error:r.address_line_2&&n.address_line_2,onChange:o,onBlur:c})),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(l.Input,{"data-lpignore":"true",autoComplete:"off",type:"text",name:"address_city",label:(0,f.localize)("Town/City*"),value:t.address_city,error:r.address_city&&n.address_city,onChange:o,onBlur:c,required:!0})),i().createElement("fieldset",{className:"account-form__fieldset"},m.length?i().createElement(i().Fragment,null,i().createElement(l.DesktopWrapper,null,i().createElement(y.gN,{name:"address_state"},(function(e){var t=e.field;return i().createElement(l.Autocomplete,S({},t,{"data-lpignore":"true",autoComplete:"new-password",type:"text",label:(0,f.localize)("State/Province (optional)"),error:r.address_state&&n.address_state,list_items:m,onItemSelection:function(e){var t=e.value,n=e.text;return _("address_state",t?n:"",!0)}}))}))),i().createElement(l.MobileWrapper,null,i().createElement(l.SelectNative,{placeholder:(0,f.localize)("Please select"),label:(0,f.localize)("State/Province (optional)"),value:t.address_state,list_items:m,error:r.address_state&&n.address_state,use_text:!0,onChange:function(e){return _("address_state",e.target.value,!0)}}))):i().createElement(l.Input,{"data-lpignore":"true",autoComplete:"off",type:"text",name:"address_state",label:(0,f.localize)("State/Province (optional)"),value:t.address_state,error:r.address_state&&n.address_state,onChange:o,onBlur:c})),i().createElement("fieldset",{className:"account-form__fieldset"},i().createElement(l.Input,{"data-lpignore":"true",autoComplete:"off",type:"text",name:"address_postcode",label:(0,f.localize)("Postal/ZIP code (optional)"),value:t.address_postcode,error:r.address_postcode&&n.address_postcode,onChange:o,onBlur:c}))))),i().createElement(w.default,{title:W?(0,f.localize)("2. Please upload one of the following:"):(0,f.localize)("Please upload one of the following:")}),i().createElement(E.Z,{has_side_note:W&&(0,s.isDesktop)(),side_note:i().createElement(I,null)},i().createElement(C.default,{onRef:function(e){return L=e},onFileDrop:function(e){return h({files:e.files,error_message:e.error_message})},getSocket:s.WS.getSocket}))),i().createElement(v.default,{className:"account-form__footer-poa"},a&&a.msg&&i().createElement(l.FormSubmitErrorMessage,{message:a.msg}),i().createElement(l.Button,{className:"account-form__footer-btn",type:"submit",is_disabled:d||!(!n.address_line_1&&t.address_line_1&&!n.address_line_2&&!n.address_city&&t.address_city&&!n.address_postcode)||p.files&&p.files.length<1||!!p.error_message,has_effect:!0,is_loading:B.is_btn_loading,is_submit_success:B.is_submit_success,text:(0,f.localize)("Save and submit"),primary:!0}))))}))};A.propTypes={account_settings:r().object,addNotificationByKey:r().func,is_eu:r().bool,fetchResidenceList:r().func,fetchStatesList:r().func,onSubmit:r().func,removeNotificationByKey:r().func,removeNotificationMessage:r().func,states_list:r().array};const M=(0,b.$j)((function(e){var t=e.client,n=e.ui;return{account_settings:t.account_settings,is_eu:t.is_eu,addNotificationByKey:n.addNotificationMessageByKey,removeNotificationMessage:n.removeNotificationMessage,removeNotificationByKey:n.removeNotificationByKey,states_list:t.states_list,fetchResidenceList:t.fetchResidenceList,fetchStatesList:t.fetchStatesList}}))(A);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var W=function(e){var t=e.is_mx_mlt,n=e.refreshNotifications,a=B(i().useState(!0),2),r=a[0],o=a[1],f=B((0,l.useStateCallback)({allow_resubmission:!1,needs_poi:!1,has_poi:!1,resubmit_poa:!1,submitted_poa:!1,document_status:null}),2),p=f[0],y=f[1];i().useEffect((function(){s.WS.authorized.getAccountStatus().then((function(e){var t=e.get_account_status.authentication,a=t.document,r=t.needs_verification,i=null==r?void 0:r.includes("identity"),l=null==r?void 0:r.includes("document"),s=a.status===g.default.pending&&!l,c=a.status;y(F(F({},p),{allow_resubmission:l,needs_poi:i,document_status:c,submitted_poa:s}),(function(){o(!1),n()}))}))}),[]);var b=function(e){var t=e.needs_poi;y(F(F({},p),{submitted_poa:!0,needs_poi:t}))},v=p.allow_resubmission,x=p.document_status,E=p.needs_poi,w=p.resubmit_poa,z=p.submitted_poa;if(r)return i().createElement(l.Loading,{is_fullscreen:!1,className:"account__initial-loader"});if(!v&&"none"===status&&t)return i().createElement(h,null);if(z)return i().createElement(m.default,{needs_poi:E});if(w||v)return i().createElement(M,{onSubmit:function(){return b({needs_poi:E})}});switch(x){case g.default.none:return i().createElement(M,{onSubmit:function(){return b({needs_poi:E})}});case g.default.pending:return i().createElement(d.default,{needs_poi:E});case g.default.verified:return i().createElement(_.default,{needs_poi:E});case g.default.expired:return i().createElement(c.default,{onClick:function(){y(F(F({},p),{resubmit_poa:!0}))}});case g.default.rejected:case g.default.suspected:return i().createElement(u.default,null);default:return null}};W.propTypes={is_mx_mlt:r().bool,refreshNotifications:r().func};const U=W},"./Sections/Verification/ProofOfIdentity/proof-of-identity-container.jsx":(e,t,n)=>{"use strict";n.d(t,{default:()=>$});var a=n("../../../node_modules/js-cookie/src/js.cookie.js"),r=n("react"),o=n.n(r),i=n("../../../node_modules/prop-types/index.js"),l=n.n(i),s=n("@deriv/components"),c=n("@deriv/translations"),u=n("./Components/icon-message-content/index.js");const d=function(){return o().createElement(u.default,{message:(0,c.localize)("You've reached the limit for uploading your documents."),text:o().createElement(c.Localize,{i18n_default_text:"Please contact us via <0>live chat</0>.",components:[o().createElement("span",{key:0,className:"link link--orange",onClick:function(){return window.LC_API.open_chat_window()}})]}),icon:o().createElement(s.Icon,{icon:"IcPoiFailed",size:128})})};var m=n("./Components/poi-unverified/index.js");const _=function(){return o().createElement(u.default,{message:(0,c.localize)("Proof of identity verification not required"),text:(0,c.localize)("Your account does not need identity verification at this time. We will inform you if identity verification is required in the future."),icon:o().createElement(s.Icon,{icon:"IcPoiVerified",size:128})})};var f=n("../../../node_modules/classnames/index.js"),p=n.n(f),h=n("@deriv/shared");function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){var t=e.text;return o().createElement("div",{className:"account-management__list-message"},o().createElement("div",{className:"account-management__list-icon"},o().createElement(s.Icon,{icon:"IcCloseCircle",color:"red"})),o().createElement("div",{className:"account-management__list-text-container"},o().createElement(s.Text,{size:"xs",className:"account-management__list-text"},t)))},v=function(e){var t=e.message_list,n=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(o().useState(!1),2),a=n[0],r=n[1],i=t.slice(0,3);return a?o().createElement(o().Fragment,null,t.map((function(e,t){return o().createElement(b,{key:t,text:e})})),o().createElement(s.Button,{type:"button",className:"account-management__list-button",onClick:function(){return r(!1)},large:!0,text:(0,c.localize)("Show less"),tertiary:!0})):o().createElement(o().Fragment,null,i.map((function(e,t){return o().createElement(b,{key:t,text:e})})),o().createElement(s.Button,{type:"button",className:"account-management__list-button",onClick:function(){return r(!0)},large:!0,text:(0,c.localize)("Show more"),tertiary:!0}))};const x=function(e){var t=e.className,n=e.icon,a=e.message,r=e.message_list,i=e.onContinue,l=(null==r?void 0:r.length)>3;return o().createElement(s.ThemedScrollbars,{is_bypassed:(0,h.isMobile)()},o().createElement(s.Div100vhContainer,{className:"account-management__message-wrapper",is_disabled:(0,h.isDesktop)(),height_offset:"110px"},o().createElement("div",{className:p()("account-management__message-content",y({},"".concat(t,"__message-content"),t))},n&&o().createElement("div",{className:p()("account-management__message-icon",y({},"".concat(t,"__message-icon"),t))},n),o().createElement(s.Text,{as:"div",weight:"bold",className:p()("account-management__message",y({},"".concat(t,"__message"),t))},a),r&&o().createElement("div",{className:"account-management__list-container"},l?o().createElement(v,{message_list:r}):r.map((function(e,t){return o().createElement(b,{key:t,text:e})}))),i&&o().createElement(s.Button,{type:"button",className:"account-management__continue",onClick:function(){return i(!0)},large:!0,text:(0,c.localize)("Upload Document"),primary:!0}))))},E=function(e){var t=e.rejected_reasons,n=e.setContinueUploading;return o().createElement(x,{message:(0,c.localize)("Your proof of identity submission failed because:"),icon:o().createElement(s.Icon,{icon:"IcPoiFailed",size:128}),message_list:t,onContinue:n})};var w=n("./Components/error-component/index.js"),z=n("react-router-dom"),k=n("../../../node_modules/onfido-sdk-ui/lib/index.js"),C=n("./Components/poi-upload-complete/index.js"),S=n("./Components/poi-unsupported/index.js"),N=n("./Components/poi-expired/index.js"),T=n("./Components/poi-onfido-failed/index.js"),O=n("./Components/poi-verified/index.js");const j=function(){return{country_select:{alert_dropdown:{country_not_found:o().createElement(c.Localize,{i18n_default_text:"Country not found"})},alert:{another_doc:o().createElement(c.Localize,{i18n_default_text:"Documents from that country are not currently supported  <fallback>try another document type</fallback>"})},button_primary:o().createElement(c.Localize,{i18n_default_text:"Submit document"}),search:{accessibility:o().createElement(c.Localize,{i18n_default_text:"Select country"}),input_placeholder:o().createElement(c.Localize,{i18n_default_text:"e.g. United States"}),label:o().createElement(c.Localize,{i18n_default_text:"Search for country"})},title:o().createElement(c.Localize,{i18n_default_text:"Select issuing country"})},cross_device_checklist:{button_primary:o().createElement(c.Localize,{i18n_default_text:"Submit verification"}),info:o().createElement(c.Localize,{i18n_default_text:"Tips"}),list_item_doc_multiple:o().createElement(c.Localize,{i18n_default_text:"Documents uploaded"}),list_item_doc_one:o().createElement(c.Localize,{i18n_default_text:"Document uploaded"}),list_item_selfie:o().createElement(c.Localize,{i18n_default_text:"Selfie uploaded"}),subtitle:o().createElement(c.Localize,{i18n_default_text:"We're now ready to verify your identity"}),title:o().createElement(c.Localize,{i18n_default_text:"Great, that's everything we need"})},cross_device_error_desktop:{subtitle:o().createElement(c.Localize,{i18n_default_text:"The link only works on mobile devices"}),title:o().createElement(c.Localize,{i18n_default_text:"Something's gone wrong"})},cross_device_error_restart:{subtitle:o().createElement(c.Localize,{i18n_default_text:"You'll need to restart your verification on your computer"}),title:o().createElement(c.Localize,{i18n_default_text:"Something's gone wrong"})},cross_device_intro:{button_primary:o().createElement(c.Localize,{i18n_default_text:"Get secure link"}),list_accessibility:o().createElement(c.Localize,{i18n_default_text:"Steps required to continue verification on your mobile"}),list_item_finish:o().createElement(c.Localize,{i18n_default_text:"Check back here to finish the submission"}),list_item_open_link:o().createElement(c.Localize,{i18n_default_text:"Open the link and complete the tasks"}),list_item_send_phone:o().createElement(c.Localize,{i18n_default_text:"Send a secure link to your phone"}),subtitle:o().createElement(c.Localize,{i18n_default_text:"Here's how to do it:"}),title:o().createElement(c.Localize,{i18n_default_text:"Continue on your phone"})},cross_device_return:{body:o().createElement(c.Localize,{i18n_default_text:"Your computer may take a few seconds to update"}),subtitle:o().createElement(c.Localize,{i18n_default_text:"You can now return to your computer to continue"}),title:o().createElement(c.Localize,{i18n_default_text:"Uploads successful"})},doc_confirmation:{alert:{blur_detail:o().createElement(c.Localize,{i18n_default_text:"Make sure everything is clear"}),blur_title:o().createElement(c.Localize,{i18n_default_text:"Blurry photo detected"}),crop_detail:o().createElement(c.Localize,{i18n_default_text:"Make sure full document is visible"}),crop_title:o().createElement(c.Localize,{i18n_default_text:"Cut-off image detected"}),glare_detail:o().createElement(c.Localize,{i18n_default_text:"Move away from direct light"}),glare_title:o().createElement(c.Localize,{i18n_default_text:"Glare detected"}),no_doc_detail:o().createElement(c.Localize,{i18n_default_text:"Make sure all of the document is in the photo"}),no_doc_title:o().createElement(c.Localize,{i18n_default_text:"No document detected"})},body_id:o().createElement(c.Localize,{i18n_default_text:"Make sure your card details are clear to read, with no blur or glare"}),body_image_medium:o().createElement(c.Localize,{i18n_default_text:"Itll take longer to verify you if we cant read it"}),body_image_poor:o().createElement(c.Localize,{i18n_default_text:"To smoothly verify you, we need a better photo"}),body_license:o().createElement(c.Localize,{i18n_default_text:"Make sure your license details are clear to read, with no blur or glare"}),body_passport:o().createElement(c.Localize,{i18n_default_text:"Make sure your passport details are clear to read, with no blur or glare"}),body_permit:o().createElement(c.Localize,{i18n_default_text:"Make sure your permit details are clear to read, with no blur or glare"}),body_tax_letter:o().createElement(c.Localize,{i18n_default_text:"Make sure details are clear to read, with no blur or glare"}),button_close:o().createElement(c.Localize,{i18n_default_text:"Close"}),button_primary_redo:o().createElement(c.Localize,{i18n_default_text:"Redo"}),button_primary_upload:o().createElement(c.Localize,{i18n_default_text:"Confirm"}),button_primary_upload_anyway:o().createElement(c.Localize,{i18n_default_text:"Upload anyway"}),button_secondary_redo:o().createElement(c.Localize,{i18n_default_text:"Redo"}),button_zoom:o().createElement(c.Localize,{i18n_default_text:"Enlarge image"}),image_accessibility:o().createElement(c.Localize,{i18n_default_text:"Photo of your document"}),title:o().createElement(c.Localize,{i18n_default_text:"Check your image"})},doc_select:{button_id:o().createElement(c.Localize,{i18n_default_text:"Identity card"}),button_id_detail:o().createElement(c.Localize,{i18n_default_text:"Front and back"}),button_license:o().createElement(c.Localize,{i18n_default_text:"Driver's license"}),button_license_detail:o().createElement(c.Localize,{i18n_default_text:"Front and back"}),button_passport:o().createElement(c.Localize,{i18n_default_text:"Passport"}),button_passport_detail:o().createElement(c.Localize,{i18n_default_text:"Face photo page"}),button_permit:o().createElement(c.Localize,{i18n_default_text:"Residence permit"}),button_permit_detail:o().createElement(c.Localize,{i18n_default_text:"Front and back"}),extra_no_mobile:o().createElement(c.Localize,{i18n_default_text:"Sorry, no mobile phone bills"}),list_accessibility:o().createElement(c.Localize,{i18n_default_text:"Documents you can use to verify your identity"}),subtitle:o().createElement(c.Localize,{i18n_default_text:"It must be an official photo ID"}),subtitle_poa:o().createElement(c.Localize,{i18n_default_text:"These are the documents most likely to show your current home address"}),title:o().createElement(c.Localize,{i18n_default_text:"Choose document"}),title_poa:o().createElement(c.Localize,{i18n_default_text:"Select a %{country} document"})},doc_submit:{button_link_upload:o().createElement(c.Localize,{i18n_default_text:"or upload photo  no scans or photocopies"}),button_primary:o().createElement(c.Localize,{i18n_default_text:"Continue on phone"}),subtitle:o().createElement(c.Localize,{i18n_default_text:"Take a photo with your phone"}),title_id_back:o().createElement(c.Localize,{i18n_default_text:"Submit identity card (back)"}),title_id_front:o().createElement(c.Localize,{i18n_default_text:"Submit identity card (front)"}),title_license_back:o().createElement(c.Localize,{i18n_default_text:"Submit license (back)"}),title_license_front:o().createElement(c.Localize,{i18n_default_text:"Submit license (front)"}),title_passport:o().createElement(c.Localize,{i18n_default_text:"Submit passport photo page"}),title_permit_back:o().createElement(c.Localize,{i18n_default_text:"Submit residence permit (back)"}),title_permit_front:o().createElement(c.Localize,{i18n_default_text:"Submit residence permit (front)"})},error_unsupported_browser:{subtitle_android:o().createElement(c.Localize,{i18n_default_text:"Restart the process on the latest version of Google Chrome"}),subtitle_ios:o().createElement(c.Localize,{i18n_default_text:"Restart the process on the latest version of Safari"}),title_android:o().createElement(c.Localize,{i18n_default_text:"Unsupported browser"}),title_ios:o().createElement(c.Localize,{i18n_default_text:"Unsupported browser"})},generic:{accessibility:{close_sdk_screen:o().createElement(c.Localize,{i18n_default_text:"Close identity verification screen"}),dismiss_alert:o().createElement(c.Localize,{i18n_default_text:"Dismiss alert"})},back:o().createElement(c.Localize,{i18n_default_text:"back"}),close:o().createElement(c.Localize,{i18n_default_text:"close"}),errors:{interrupted_flow_error:{instruction:o().createElement(c.Localize,{i18n_default_text:"Restart process on a different device"}),message:o().createElement(c.Localize,{i18n_default_text:"Camera not detected"})},invalid_size:{instruction:o().createElement(c.Localize,{i18n_default_text:"Must be under 10MB."}),message:o().createElement(c.Localize,{i18n_default_text:"File size exceeded."})},invalid_type:{instruction:o().createElement(c.Localize,{i18n_default_text:"Try using another file type."}),message:o().createElement(c.Localize,{i18n_default_text:"File not uploaded."})},lazy_loading:{message:o().createElement(c.Localize,{i18n_default_text:"An error occurred while loading the component"})},multiple_faces:{instruction:o().createElement(c.Localize,{i18n_default_text:"Only your face can be in the selfie"}),message:o().createElement(c.Localize,{i18n_default_text:"Multiple faces found"})},no_face:{instruction:o().createElement(c.Localize,{i18n_default_text:"Your face is needed in the selfie"}),message:o().createElement(c.Localize,{i18n_default_text:"No face found"})},request_error:{instruction:o().createElement(c.Localize,{i18n_default_text:"Please try again"}),message:o().createElement(c.Localize,{i18n_default_text:"Connection lost"})},sms_failed:{instruction:o().createElement(c.Localize,{i18n_default_text:"Copy the link to your phone"}),message:o().createElement(c.Localize,{i18n_default_text:"Something's gone wrong"})},sms_overuse:{instruction:o().createElement(c.Localize,{i18n_default_text:"Copy the link to your phone"}),message:o().createElement(c.Localize,{i18n_default_text:"Too many failed attempts"})},unsupported_file:{instruction:o().createElement(c.Localize,{i18n_default_text:"Try using a JPG or PNG file"}),message:o().createElement(c.Localize,{i18n_default_text:"File type not supported"})}},lazy_load_placeholder:o().createElement(c.Localize,{i18n_default_text:"Loading..."}),loading:o().createElement(c.Localize,{i18n_default_text:"Loading"})},get_link:{alert_wrong_number:o().createElement(c.Localize,{i18n_default_text:"Check that your number is correct"}),button_copied:o().createElement(c.Localize,{i18n_default_text:"Copied"}),button_copy:o().createElement(c.Localize,{i18n_default_text:"Copy"}),button_submit:o().createElement(c.Localize,{i18n_default_text:"Send link"}),info_qr_how:o().createElement(c.Localize,{i18n_default_text:"How to scan a QR code"}),info_qr_how_list_item_camera:o().createElement(c.Localize,{i18n_default_text:"Point your phones camera at the QR code"}),info_qr_how_list_item_download:o().createElement(c.Localize,{i18n_default_text:"If it doesnt work, download a QR code scanner from Google Play or the App Store"}),link_divider:o().createElement(c.Localize,{i18n_default_text:"or"}),link_qr:o().createElement(c.Localize,{i18n_default_text:"Scan QR code"}),link_sms:o().createElement(c.Localize,{i18n_default_text:"Get link via SMS"}),link_url:o().createElement(c.Localize,{i18n_default_text:"Copy link"}),loader_sending:o().createElement(c.Localize,{i18n_default_text:"Sending"}),number_field_input_placeholder:o().createElement(c.Localize,{i18n_default_text:"Enter mobile number"}),number_field_label:o().createElement(c.Localize,{i18n_default_text:"Enter your mobile number:"}),subtitle_qr:o().createElement(c.Localize,{i18n_default_text:"Scan the QR code with your phone"}),subtitle_sms:o().createElement(c.Localize,{i18n_default_text:"Send this one-time link to your phone"}),subtitle_url:o().createElement(c.Localize,{i18n_default_text:"Open the link on your mobile"}),title:o().createElement(c.Localize,{i18n_default_text:"Get your secure link"}),url_field_label:o().createElement(c.Localize,{i18n_default_text:"Copy the link to your mobile browser"})},linked_computer:{button_primary:o().createElement(c.Localize,{i18n_default_text:"Continue"}),info:o().createElement(c.Localize,{i18n_default_text:"Make sure"}),list_item_desktop_open:o().createElement(c.Localize,{i18n_default_text:"2. Your desktop window stays open"}),list_item_sent_by_you:o().createElement(c.Localize,{i18n_default_text:"1. This link was sent by you"}),subtitle:o().createElement(c.Localize,{i18n_default_text:"Continue with the verification"}),title:o().createElement(c.Localize,{i18n_default_text:"Linked to your computer"})},mobilePhrases:{photo_upload:{body_id_back:o().createElement(c.Localize,{i18n_default_text:"Take a photo of the back of your card"}),body_id_front:o().createElement(c.Localize,{i18n_default_text:"Take a photo of the front of your card"}),body_license_back:o().createElement(c.Localize,{i18n_default_text:"Take a photo of the back of your license"}),body_license_front:o().createElement(c.Localize,{i18n_default_text:"Take a photo of the front of your license"}),body_passport:o().createElement(c.Localize,{i18n_default_text:"Take a photo of your passport photo page"}),body_selfie:o().createElement(c.Localize,{i18n_default_text:"Take a selfie showing your face"})},selfie_capture:{alert:{camera_inactive:{detail:o().createElement(c.Localize,{i18n_default_text:"Take a photo using the <fallback>basic camera mode</fallback> instead"})},camera_not_working:{detail:o().createElement(c.Localize,{i18n_default_text:"Take a photo using the <fallback>basic camera mode</fallback> instead"})}}},upload_guide:{button_primary:o().createElement(c.Localize,{i18n_default_text:"Take a photo"}),title:o().createElement(c.Localize,{i18n_default_text:"Passport photo page"})}},outro:{body:o().createElement(c.Localize,{i18n_default_text:"Thank you"}),title:o().createElement(c.Localize,{i18n_default_text:"Verification complete"})},permission_recovery:{button_primary:o().createElement(c.Localize,{i18n_default_text:"Refresh"}),info:o().createElement(c.Localize,{i18n_default_text:"Recovery"}),list_header_cam:o().createElement(c.Localize,{i18n_default_text:"Follow these steps to recover camera access:"}),list_item_action_cam:o().createElement(c.Localize,{i18n_default_text:"Refresh this page to restart the identity verification process"}),list_item_how_to_cam:o().createElement(c.Localize,{i18n_default_text:"Grant access to your camera from your browser settings"}),subtitle_cam:o().createElement(c.Localize,{i18n_default_text:"Recover camera access to continue face verification"}),title_cam:o().createElement(c.Localize,{i18n_default_text:"Camera access is denied"})},permission:{body_cam:o().createElement(c.Localize,{i18n_default_text:"We cannot verify you without using your camera"}),button_primary_cam:o().createElement(c.Localize,{i18n_default_text:"Enable camera"}),subtitle_cam:o().createElement(c.Localize,{i18n_default_text:"When prompted, you must enable camera access to continue"}),title_cam:o().createElement(c.Localize,{i18n_default_text:"Allow camera access"})},photo_upload:{body_bank_statement:o().createElement(c.Localize,{i18n_default_text:"Provide the whole document page for best results"}),body_benefits_letter:o().createElement(c.Localize,{i18n_default_text:"Provide the whole document page for best results"}),body_bill:o().createElement(c.Localize,{i18n_default_text:"Provide the whole document page for best results"}),body_government_letter:o().createElement(c.Localize,{i18n_default_text:"Provide the whole document page for best results"}),body_id_back:o().createElement(c.Localize,{i18n_default_text:"Upload back of card from your computer"}),body_id_front:o().createElement(c.Localize,{i18n_default_text:"Upload front of card from your computer"}),body_license_back:o().createElement(c.Localize,{i18n_default_text:"Upload back of license from your computer"}),body_license_front:o().createElement(c.Localize,{i18n_default_text:"Upload front of license from your computer"}),body_passport:o().createElement(c.Localize,{i18n_default_text:"Upload passport photo page from your computer"}),body_selfie:o().createElement(c.Localize,{i18n_default_text:"Upload a selfie from your computer"}),body_tax_letter:o().createElement(c.Localize,{i18n_default_text:"Provide the whole document page for best results"}),button_take_photo:o().createElement(c.Localize,{i18n_default_text:"Take photo"}),button_upload:o().createElement(c.Localize,{i18n_default_text:"Upload"}),title_selfie:o().createElement(c.Localize,{i18n_default_text:"Selfie"})},selfie_capture:{alert:{camera_inactive:{detail:o().createElement(c.Localize,{i18n_default_text:"Check that it is connected and functional. You can also <fallback>continue verification on your phone</fallback>"}),detail_no_fallback:o().createElement(c.Localize,{i18n_default_text:"Make sure your device has a working camera"}),title:o().createElement(c.Localize,{i18n_default_text:"Camera not working?"})},camera_not_working:{detail:o().createElement(c.Localize,{i18n_default_text:"It may be disconnected. <fallback>Try using your phone instead</fallback>."}),detail_no_fallback:o().createElement(c.Localize,{i18n_default_text:"Make sure your device's camera works"}),title:o().createElement(c.Localize,{i18n_default_text:"Camera not working"})},timeout:{detail:o().createElement(c.Localize,{i18n_default_text:"Remember to press stop when you're done. <fallback>Redo video actions</fallback>"}),title:o().createElement(c.Localize,{i18n_default_text:"Looks like you took too long"})}},button_accessibility:o().createElement(c.Localize,{i18n_default_text:"Take a photo"}),frame_accessibility:o().createElement(c.Localize,{i18n_default_text:"View from camera"}),title:o().createElement(c.Localize,{i18n_default_text:"Take a selfie"})},selfie_confirmation:{image_accessibility:o().createElement(c.Localize,{i18n_default_text:"Photo of your face"}),subtitle:o().createElement(c.Localize,{i18n_default_text:"Make sure your selfie clearly shows your face"}),title:o().createElement(c.Localize,{i18n_default_text:"Check selfie"})},selfie_intro:{button_primary:o().createElement(c.Localize,{i18n_default_text:"Continue"}),list_accessibility:o().createElement(c.Localize,{i18n_default_text:"Tips to take a good selfie"}),list_item_face_forward:o().createElement(c.Localize,{i18n_default_text:"Face forward and make sure your eyes are clearly visible"}),list_item_no_glasses:o().createElement(c.Localize,{i18n_default_text:"Remove your glasses, if necessary"}),subtitle:o().createElement(c.Localize,{i18n_default_text:"We'll compare it with your document"}),title:o().createElement(c.Localize,{i18n_default_text:"Take a selfie"})},sms_sent:{info:o().createElement(c.Localize,{i18n_default_text:"Tips"}),info_link_expire:o().createElement(c.Localize,{i18n_default_text:"Your link will expire in one hour"}),info_link_window:o().createElement(c.Localize,{i18n_default_text:"Keep this window open while using your mobile"}),link:o().createElement(c.Localize,{i18n_default_text:"Resend link"}),subtitle:o().createElement(c.Localize,{i18n_default_text:"We've sent a secure link to %{number}"}),subtitle_minutes:o().createElement(c.Localize,{i18n_default_text:"It may take a few minutes to arrive"}),title:o().createElement(c.Localize,{i18n_default_text:"Check your mobile"})},switch_phone:{info:o().createElement(c.Localize,{i18n_default_text:"Tips"}),info_link_expire:o().createElement(c.Localize,{i18n_default_text:"Your mobile link will expire in one hour"}),info_link_refresh:o().createElement(c.Localize,{i18n_default_text:"Don't refresh this page"}),info_link_window:o().createElement(c.Localize,{i18n_default_text:"Keep this window open while using your mobile"}),link:o().createElement(c.Localize,{i18n_default_text:"Cancel"}),subtitle:o().createElement(c.Localize,{i18n_default_text:"Once you\\'ve finished we'll take you to the next step"}),title:o().createElement(c.Localize,{i18n_default_text:"Connected to your mobile"})},upload_guide:{button_primary:o().createElement(c.Localize,{i18n_default_text:"Upload photo"}),image_detail_blur_alt:o().createElement(c.Localize,{i18n_default_text:"Example of a blurry document"}),image_detail_blur_label:o().createElement(c.Localize,{i18n_default_text:"All details must be clear  nothing blurry"}),image_detail_cutoff_alt:o().createElement(c.Localize,{i18n_default_text:"Example of a cut-off document"}),image_detail_cutoff_label:o().createElement(c.Localize,{i18n_default_text:"Show all details  including the bottom 2 lines"}),image_detail_glare_alt:o().createElement(c.Localize,{i18n_default_text:"Example of a document with glare"}),image_detail_glare_label:o().createElement(c.Localize,{i18n_default_text:"Move away from direct light  no glare"}),image_detail_good_alt:o().createElement(c.Localize,{i18n_default_text:"Document example"}),image_detail_good_label:o().createElement(c.Localize,{i18n_default_text:"The photo should clearly show your document"}),subtitle:o().createElement(c.Localize,{i18n_default_text:"Scans and photocopies are not accepted"}),title:o().createElement(c.Localize,{i18n_default_text:"Upload passport photo page"})}}};var P=n("./Components/poi-missing-personal-details/index.js"),L={none:"onfido",onfido:"onfido",pending:"pending",rejected:"rejected",verified:"verified",unsupported:"unsupported",not_required:"not_required",expired:"expired",suspected:"suspected"};function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function A(e,t,n,a,r,o,i){try{var l=e[o](i),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(a,r)}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var F="onfido",R=function(e){var t=e.height,n=e.is_message_enabled;return o().createElement(s.ThemedScrollbars,{is_bypassed:(0,h.isMobile)(),height:t},o().createElement("div",{className:"onfido-container"},n&&o().createElement("div",{className:"onfido-container__message"},o().createElement(s.Text,{size:"xs"},o().createElement(c.Localize,{i18n_default_text:"Before uploading your document, please ensure that your <0>personal details</0> are updated to match your proof of identity. This will help to avoid delays during the verification process.",components:[o().createElement(z.Link,{to:h.routes.personal_details,key:0,className:"link"})]}))),o().createElement("div",{id:F})))},B=function(e){var t,n=e.documents_supported,a=e.country_code,r=e.handleComplete,i=e.height,l=e.is_message_enabled,u=e.onfido_service_token,d=e.status,m=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["documents_supported","country_code","handleComplete","height","is_message_enabled","onfido_service_token","status"]),_=M(o().useState(null),2),f=_[0],p=_[1],h=M(o().useState(!1),2),g=h[0],y=h[1];o().useEffect((function(){return d===L.onfido&&u&&x(),function(){null==f||f.tearDown()}}),[u]);var b=(0,s.usePrevious)(u),v=o().useCallback((function(e){null==f||f.tearDown(),r(e)}),[r,f]),x=o().useCallback(function(e){return function(){var t=this,n=arguments;return new Promise((function(a,r){var o=e.apply(t,n);function i(e){A(o,a,r,i,l,"next",e)}function l(e){A(o,a,r,i,l,"throw",e)}i(void 0)}))}}(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,k.init)({containerId:F,language:{locale:(0,c.getLanguage)().toLowerCase()||"en",phrases:j(),mobilePhrases:j()},token:u,useModal:!1,onComplete:v,steps:[{type:"document",options:{documentTypes:{passport:n.some((function(e){return/Passport/g.test(e)})),driving_licence:!!n.some((function(e){return/Driving Licence/g.test(e)}))&&{country:a},national_identity_card:!!n.some((function(e){return/National Identity Card/g.test(e)}))&&{country:a}}}},"face"]});case 3:t=e.sent,p(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),y(!0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),[n,v,u]);if(o().useEffect((function(){b&&u&&b!==u&&d===L.onfido&&u&&x()}),[x,b,u,d]),d===L.unsupported)return o().createElement(S.default,m);if("InvalidPostalCode"===(null==u||null===(t=u.error)||void 0===t?void 0:t.code)&&"verified"!==d)return o().createElement(P.default,{has_invalid_postal_code:!0,from:"proof_of_identity"});if(g&&null!=u&&u.error&&"verified"!==d)return o().createElement(T.default,m);if(d===L.onfido)return o().createElement(R,{height:i,is_message_enabled:l});switch(d){case L.pending:return o().createElement(C.default,m);case L.rejected:return o().createElement(T.default,m);case L.verified:return o().createElement(O.default,m);case L.expired:return o().createElement(N.default,m);case L.suspected:return o().createElement(T.default,I({suspected:L.suspected},m));default:return null}};B.propTypes={country_code:l().string,documents_supported:l().array,handleComplete:l().func,has_poa:l().bool,height:l().number,is_message_enabled:l().bool,onfido_service_token:l().oneOfType([l().object,l().string]),status:l().oneOf(Object.keys(L))};const q=B;function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(a=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);a=!0);}catch(e){r=!0,o=e}finally{try{a||null==l.return||l.return()}finally{if(r)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Y=function(e){var t=e.account_status,n=e.addNotificationByKey,r=e.getAccountStatus,i=e.serviceToken,l=e.notificationEvent,u=e.removeNotificationByKey,f=e.refreshNotifications,p=e.removeNotificationMessage,h=e.onStateChange,g=e.is_message_enabled,y=void 0===g||g,b=e.is_description_enabled,v=void 0===b||b,x=e.is_mx_mlt,z=e.height,k=e.redirect_button,C=W(o().useState(!0),2),S=C[0],N=C[1],T=W(o().useState(!1),2),O=T[0],j=T[1],P=W(o().useState(""),2),I=P[0],A=P[1],M=W(o().useState(null),2),D=M[0],F=M[1],R=W(o().useState(null),2),B=R[0],U=R[1],Y=W(o().useState(null),2),$=Y[0],V=Y[1],G=W((0,s.useStateCallback)({}),2),K=G[0],H=G[1],Z=W(o().useState(null),2),X=Z[0],J=Z[1],Q=W(o().useState([]),2),ee=Q[0],te=Q[1],ne=W(o().useState(!1),2),ae=ne[0],re=ne[1],oe=W(o().useState(!1),2),ie=oe[0],le=oe[1],se=(0,s.usePrevious)(t),ce=W(o().useState(),2),ue=ce[0],de=ce[1],me=o().useCallback((function(){return new Promise((function(e){var t="onfido_token",n=a.get(t);n?e(n):i({service_token:1,service:"onfido"}).then((function(n){if(n.error)e({error:n.error});else{var r=n.service_token.onfido.token;a.set(t,r,{expires:1/16,secure:!0,sameSite:"strict"}),e(r)}}))}))}),[i]),_e=o().useCallback((function(e,t){var n=function(e){var t=e.authentication,n=t.document,a=t.identity,r=t.needs_verification,o=!(n&&"none"===n.status),i=!(a&&"none"===a.status),l=r.length&&r.includes("document"),s=r.length&&r.includes("identity"),c=e.status.some((function(e){return"unwelcome"===e})),u=e.status.some((function(e){return"allow_document_upload"===e})),d=e.status.some((function(e){return"allow_poi_resubmission"===e})),m=a.services.onfido.documents_supported,_=a.services.onfido.country_code,f=a.services.onfido.submissions_left;return{allow_document_upload:u,allow_poi_resubmission:d,country_code:_,has_poa:o,has_poi:i,is_unwelcome:c,needs_poa:l,needs_poi:s,onfido_supported_docs:m,rejected_reasons:a.services.onfido.last_rejected,submissions_left:f}}(e),a=n.allow_document_upload,r=n.allow_poi_resubmission,o=n.has_poa,i=n.needs_poa,l=n.is_unwelcome,s=n.onfido_supported_docs,c=n.country_code,u=n.rejected_reasons,d=n.submissions_left,m=e.authentication,_=m.identity,p=m.needs_verification,g=function(e,t,n,a){var r=e.status,o=!e.services.onfido.is_country_supported,i=null==t?void 0:t.includes("identity");return!o||["pending","verified"].includes(r)&&!a?i?o?L.unsupported:L.onfido:"none"===r&&n?L.not_required:L[r]:L.unsupported}(_,p,x,r),y=!(null!=u&&u.length);H({allow_document_upload:a,has_poa:o,needs_poa:i,is_unwelcome:l},(function(){A(g),le(null==_?void 0:_.status),t&&V(t),F(s),U(c),J(d),te(u),re(y),f(),h&&h({status:I})}))}),[x,h,f,H,I]);o().useEffect((function(){r().then((function(e){var t=e.get_account_status;me().then((function(e){_e(t,e),de(t)})).finally((function(){N(!1)}))}))}),[]),o().useEffect((function(){ue&&se&&se!==ue&&_e(ue)}),[_e,se,t]);var fe=K.needs_poa,pe=K.is_unwelcome,he=K.allow_document_upload,ge=[L.rejected,L.suspected].map((function(e){return L[e]})).includes(ie),ye=!!ee.length&&ge;return O?o().createElement(w.default,{error_message:(0,c.localize)("Sorry, there was a connection error. Please try again later.")}):S||0===I.length?o().createElement(s.Loading,{is_fullscreen:!1,className:"account__initial-loader"}):pe&&!he?o().createElement(m.default,{is_description_enabled:v}):I===L.not_required?o().createElement(_,null):!X&&ge?o().createElement(d,null):ye&&!ae?o().createElement(E,{rejected_reasons:ee,setContinueUploading:re}):o().createElement(q,{country_code:B,documents_supported:D,status:I,onfido_service_token:$,needs_poa:fe,height:null!=z?z:null,handleComplete:function(e){var t=[];Object.keys(e).forEach((function(n){t.push(e[n].id)})),l({notification_event:1,category:"authentication",event:"poi_documents_uploaded",args:{documents:t}}).then((function(e){e.error?j(!0):(A("pending"),p({key:"authenticate"}),u({key:"authenticate"}),p({key:"needs_poi"}),u({key:"needs_poi"}),p({key:"poi_expired"}),u({key:"poi_expired"}),null!=K&&K.needs_poa&&n("needs_poa"),h&&h({status:"pending"}))}))},is_message_enabled:y,is_description_enabled:v,redirect_button:k})};Y.propTypes={account_status:i.PropTypes.object,addNotificationByKey:i.PropTypes.func,getAccountStatus:i.PropTypes.func,is_description_enabled:i.PropTypes.bool,serviceToken:i.PropTypes.func,notificationEvent:i.PropTypes.func,removeNotificationByKey:i.PropTypes.func,refreshNotifications:i.PropTypes.func,removeNotificationMessage:i.PropTypes.func,onStateChange:i.PropTypes.func,is_mx_mlt:i.PropTypes.bool,height:i.PropTypes.number,redirect_button:i.PropTypes.oneOfType([i.PropTypes.object,i.PropTypes.bool])};const $=Y},"./Stores/connect.js":(e,t,n)=>{"use strict";n.d(t,{z1:()=>u,$j:()=>d});var a=n("mobx-react"),r=n("react"),o=n.n(r);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=o().createContext(null),u=function(e){var t=e.store,n=e.children;return o().createElement(c.Provider,{value:l(l({},t),{},{mobxStores:t})},n)},d=function(e){return function(t){return function(e,t){var n=function(n){var r=o().useContext(c),i=t;return function(e){return!("function"!=typeof e||!e.prototype||!e.prototype.isReactComponent)}(t)&&(i=function(e){return o().createElement(t,e)}),(0,a.useObserver)((function(){return i(l(l({},n),e(r,n)))}))};return n.displayName=t.name,n}(e,t)}}},"?98fa":()=>{}}]);